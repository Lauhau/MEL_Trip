(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function y_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v_={exports:{}},Bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=Symbol.for("react.transitional.element"),Ew=Symbol.for("react.fragment");function __(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:Tw,type:e,key:i,ref:t!==void 0?t:null,props:n}}Bu.Fragment=Ew;Bu.jsx=__;Bu.jsxs=__;v_.exports=Bu;var T=v_.exports,T_={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=Symbol.for("react.transitional.element"),Sw=Symbol.for("react.portal"),Aw=Symbol.for("react.fragment"),Cw=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),Rw=Symbol.for("react.consumer"),Iw=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),bw=Symbol.for("react.suspense"),Nw=Symbol.for("react.memo"),E_=Symbol.for("react.lazy"),Mw=Symbol.for("react.activity"),mg=Symbol.iterator;function Dw(e){return e===null||typeof e!="object"?null:(e=mg&&e[mg]||e["@@iterator"],typeof e=="function"?e:null)}var S_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A_=Object.assign,C_={};function xs(e,t,n){this.props=e,this.context=t,this.refs=C_,this.updater=n||S_}xs.prototype.isReactComponent={};xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function w_(){}w_.prototype=xs.prototype;function Rh(e,t,n){this.props=e,this.context=t,this.refs=C_,this.updater=n||S_}var Ih=Rh.prototype=new w_;Ih.constructor=Rh;A_(Ih,xs.prototype);Ih.isPureReactComponent=!0;var gg=Array.isArray;function Yf(){}var bt={H:null,A:null,T:null,S:null},R_=Object.prototype.hasOwnProperty;function xh(e,t,n){var i=n.ref;return{$$typeof:wh,type:e,key:t,ref:i!==void 0?i:null,props:n}}function Vw(e,t){return xh(e.type,t,e.props)}function bh(e){return typeof e=="object"&&e!==null&&e.$$typeof===wh}function Pw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yg=/\/+/g;function Qc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pw(""+e.key):t.toString(36)}function kw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Yf,Yf):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Do(e,t,n,i,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case wh:case Sw:r=!0;break;case E_:return r=e._init,Do(r(e._payload),t,n,i,o)}}if(r)return o=o(e),r=i===""?"."+Qc(e,0):i,gg(o)?(n="",r!=null&&(n=r.replace(yg,"$&/")+"/"),Do(o,t,n,"",function(c){return c})):o!=null&&(bh(o)&&(o=Vw(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(yg,"$&/")+"/")+r)),t.push(o)),1;r=0;var a=i===""?".":i+":";if(gg(e))for(var u=0;u<e.length;u++)i=e[u],s=a+Qc(i,u),r+=Do(i,t,n,s,o);else if(u=Dw(e),typeof u=="function")for(e=u.call(e),u=0;!(i=e.next()).done;)i=i.value,s=a+Qc(i,u++),r+=Do(i,t,n,s,o);else if(s==="object"){if(typeof e.then=="function")return Do(kw(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Qa(e,t,n){if(e==null)return e;var i=[],o=0;return Do(e,i,"","",function(s){return t.call(n,s,o++)}),i}function Uw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Lw={map:Qa,forEach:function(e,t,n){Qa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qa(e,function(){t++}),t},toArray:function(e){return Qa(e,function(t){return t})||[]},only:function(e){if(!bh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};et.Activity=Mw;et.Children=Lw;et.Component=xs;et.Fragment=Aw;et.Profiler=ww;et.PureComponent=Rh;et.StrictMode=Cw;et.Suspense=bw;et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=bt;et.__COMPILER_RUNTIME={__proto__:null,c:function(e){return bt.H.useMemoCache(e)}};et.cache=function(e){return function(){return e.apply(null,arguments)}};et.cacheSignal=function(){return null};et.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=A_({},e.props),o=e.key;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)!R_.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(i[s]=t[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),a=0;a<s;a++)r[a]=arguments[a+2];i.children=r}return xh(e.type,o,i)};et.createContext=function(e){return e={$$typeof:Iw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Rw,_context:e},e};et.createElement=function(e,t,n){var i,o={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)R_.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var r=arguments.length-2;if(r===1)o.children=n;else if(1<r){for(var a=Array(r),u=0;u<r;u++)a[u]=arguments[u+2];o.children=a}if(e&&e.defaultProps)for(i in r=e.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return xh(e,s,o)};et.createRef=function(){return{current:null}};et.forwardRef=function(e){return{$$typeof:xw,render:e}};et.isValidElement=bh;et.lazy=function(e){return{$$typeof:E_,_payload:{_status:-1,_result:e},_init:Uw}};et.memo=function(e,t){return{$$typeof:Nw,type:e,compare:t===void 0?null:t}};et.startTransition=function(e){var t=bt.T,n={};bt.T=n;try{var i=e(),o=bt.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Yf,vg)}catch(s){vg(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),bt.T=t}};et.unstable_useCacheRefresh=function(){return bt.H.useCacheRefresh()};et.use=function(e){return bt.H.use(e)};et.useActionState=function(e,t,n){return bt.H.useActionState(e,t,n)};et.useCallback=function(e,t){return bt.H.useCallback(e,t)};et.useContext=function(e){return bt.H.useContext(e)};et.useDebugValue=function(){};et.useDeferredValue=function(e,t){return bt.H.useDeferredValue(e,t)};et.useEffect=function(e,t){return bt.H.useEffect(e,t)};et.useEffectEvent=function(e){return bt.H.useEffectEvent(e)};et.useId=function(){return bt.H.useId()};et.useImperativeHandle=function(e,t,n){return bt.H.useImperativeHandle(e,t,n)};et.useInsertionEffect=function(e,t){return bt.H.useInsertionEffect(e,t)};et.useLayoutEffect=function(e,t){return bt.H.useLayoutEffect(e,t)};et.useMemo=function(e,t){return bt.H.useMemo(e,t)};et.useOptimistic=function(e,t){return bt.H.useOptimistic(e,t)};et.useReducer=function(e,t,n){return bt.H.useReducer(e,t,n)};et.useRef=function(e){return bt.H.useRef(e)};et.useState=function(e){return bt.H.useState(e)};et.useSyncExternalStore=function(e,t,n){return bt.H.useSyncExternalStore(e,t,n)};et.useTransition=function(){return bt.H.useTransition()};et.version="19.2.3";T_.exports=et;var st=T_.exports;const Ow=y_(st);var I_={exports:{}},Gu={},x_={exports:{}},b_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,$){var Z=H.length;H.push($);t:for(;0<Z;){var wt=Z-1>>>1,Lt=H[wt];if(0<o(Lt,$))H[wt]=$,H[Z]=Lt,Z=wt;else break t}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var $=H[0],Z=H.pop();if(Z!==$){H[0]=Z;t:for(var wt=0,Lt=H.length,wo=Lt>>>1;wt<wo;){var ke=2*(wt+1)-1,qt=H[ke],xn=ke+1,gn=H[xn];if(0>o(qt,Z))xn<Lt&&0>o(gn,qt)?(H[wt]=gn,H[xn]=Z,wt=xn):(H[wt]=qt,H[ke]=Z,wt=ke);else if(xn<Lt&&0>o(gn,Z))H[wt]=gn,H[xn]=Z,wt=xn;else break t}}return $}function o(H,$){var Z=H.sortIndex-$.sortIndex;return Z!==0?Z:H.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,a=r.now();e.unstable_now=function(){return r.now()-a}}var u=[],c=[],h=1,m=null,p=3,v=!1,x=!1,b=!1,D=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function V(H){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=H)i(c),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(c)}}function L(H){if(b=!1,V(H),!x)if(n(u)!==null)x=!0,B||(B=!0,P());else{var $=n(c);$!==null&&$e(L,$.startTime-H)}}var B=!1,I=-1,w=5,A=-1;function M(){return D?!0:!(e.unstable_now()-A<w)}function R(){if(D=!1,B){var H=e.unstable_now();A=H;var $=!0;try{t:{x=!1,b&&(b=!1,_(I),I=-1),v=!0;var Z=p;try{e:{for(V(H),m=n(u);m!==null&&!(m.expirationTime>H&&M());){var wt=m.callback;if(typeof wt=="function"){m.callback=null,p=m.priorityLevel;var Lt=wt(m.expirationTime<=H);if(H=e.unstable_now(),typeof Lt=="function"){m.callback=Lt,V(H),$=!0;break e}m===n(u)&&i(u),V(H)}else i(u);m=n(u)}if(m!==null)$=!0;else{var wo=n(c);wo!==null&&$e(L,wo.startTime-H),$=!1}}break t}finally{m=null,p=Z,v=!1}$=void 0}}finally{$?P():B=!1}}}var P;if(typeof C=="function")P=function(){C(R)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,gt=N.port2;N.port1.onmessage=R,P=function(){gt.postMessage(null)}}else P=function(){E(R,0)};function $e(H,$){I=E(function(){H(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(H){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var Z=p;p=$;try{return H()}finally{p=Z}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=p;p=H;try{return $()}finally{p=Z}},e.unstable_scheduleCallback=function(H,$,Z){var wt=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?wt+Z:wt):Z=wt,H){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=Z+Lt,H={id:h++,callback:$,priorityLevel:H,startTime:Z,expirationTime:Lt,sortIndex:-1},Z>wt?(H.sortIndex=Z,t(c,H),n(u)===null&&H===n(c)&&(b?(_(I),I=-1):b=!0,$e(L,Z-wt))):(H.sortIndex=Lt,t(u,H),x||v||(x=!0,B||(B=!0,P()))),H},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(H){var $=p;return function(){var Z=p;p=$;try{return H.apply(this,arguments)}finally{p=Z}}}})(b_);x_.exports=b_;var Bw=x_.exports,N_={exports:{}},we={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw=st;function M_(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function si(){}var Ae={d:{f:si,r:function(){throw Error(M_(522))},D:si,C:si,L:si,m:si,X:si,S:si,M:si},p:0,findDOMNode:null},qw=Symbol.for("react.portal");function Fw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Ar=Gw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function qu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}we.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ae;we.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(M_(299));return Fw(e,t,null,n)};we.flushSync=function(e){var t=Ar.T,n=Ae.p;try{if(Ar.T=null,Ae.p=2,e)return e()}finally{Ar.T=t,Ae.p=n,Ae.d.f()}};we.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ae.d.C(e,t))};we.prefetchDNS=function(e){typeof e=="string"&&Ae.d.D(e)};we.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=qu(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ae.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):n==="script"&&Ae.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};we.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=qu(t.as,t.crossOrigin);Ae.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ae.d.M(e)};we.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=qu(n,t.crossOrigin);Ae.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};we.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=qu(t.as,t.crossOrigin);Ae.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ae.d.m(e)};we.requestFormReset=function(e){Ae.d.r(e)};we.unstable_batchedUpdates=function(e,t){return e(t)};we.useFormState=function(e,t,n){return Ar.H.useFormState(e,t,n)};we.useFormStatus=function(){return Ar.H.useHostTransitionStatus()};we.version="19.2.3";function D_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D_)}catch(e){console.error(e)}}D_(),N_.exports=we;var Hw=N_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt=Bw,V_=st,zw=Hw;function O(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function P_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function k_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function U_(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _g(e){if(fa(e)!==e)throw Error(O(188))}function Yw(e){var t=e.alternate;if(!t){if(t=fa(e),t===null)throw Error(O(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return _g(o),e;if(s===i)return _g(o),t;s=s.sibling}throw Error(O(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,a=o.child;a;){if(a===n){r=!0,n=o,i=s;break}if(a===i){r=!0,i=o,n=s;break}a=a.sibling}if(!r){for(a=s.child;a;){if(a===n){r=!0,n=s,i=o;break}if(a===i){r=!0,i=s,n=o;break}a=a.sibling}if(!r)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?e:t}function L_(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=L_(e),t!==null)return t;e=e.sibling}return null}var Nt=Object.assign,Kw=Symbol.for("react.element"),$a=Symbol.for("react.transitional.element"),hr=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),Kf=Symbol.for("react.profiler"),B_=Symbol.for("react.consumer"),On=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),Jf=Symbol.for("react.suspense"),Qf=Symbol.for("react.suspense_list"),Mh=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),$f=Symbol.for("react.activity"),Jw=Symbol.for("react.memo_cache_sentinel"),Tg=Symbol.iterator;function nr(e){return e===null||typeof e!="object"?null:(e=Tg&&e[Tg]||e["@@iterator"],typeof e=="function"?e:null)}var Qw=Symbol.for("react.client.reference");function Xf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Bo:return"Fragment";case Kf:return"Profiler";case O_:return"StrictMode";case Jf:return"Suspense";case Qf:return"SuspenseList";case $f:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case hr:return"Portal";case On:return e.displayName||"Context";case B_:return(e._context.displayName||"Context")+".Consumer";case Nh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mh:return t=e.displayName||null,t!==null?t:Xf(e.type)||"Memo";case ri:t=e._payload,e=e._init;try{return Xf(e(t))}catch{}}return null}var pr=Array.isArray,Q=V_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt=zw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,eo={pending:!1,data:null,method:null,action:null},Wf=[],Go=-1;function Rn(e){return{current:e}}function te(e){0>Go||(e.current=Wf[Go],Wf[Go]=null,Go--)}function Ct(e,t){Go++,Wf[Go]=e.current,e.current=t}var Tn=Rn(null),qr=Rn(null),_i=Rn(null),Yl=Rn(null);function Kl(e,t){switch(Ct(_i,t),Ct(qr,e),Ct(Tn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ry(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ry(t),e=sS(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}te(Tn),Ct(Tn,e)}function cs(){te(Tn),te(qr),te(_i)}function Zf(e){e.memoizedState!==null&&Ct(Yl,e);var t=Tn.current,n=sS(t,e.type);t!==n&&(Ct(qr,e),Ct(Tn,n))}function Jl(e){qr.current===e&&(te(Tn),te(qr)),Yl.current===e&&(te(Yl),Zr._currentValue=eo)}var $c,Eg;function Qi(e){if($c===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$c=t&&t[1]||"",Eg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$c+e+Eg}var Xc=!1;function Wc(e,t){if(!e||Xc)return"";Xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(v){var p=v}Reflect.construct(e,[],m)}else{try{m.call()}catch(v){p=v}e.call(m.prototype)}}else{try{throw Error()}catch(v){p=v}(m=e())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(v){if(v&&p&&typeof v.stack=="string")return[v.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],a=s[1];if(r&&a){var u=r.split(`
`),c=a.split(`
`);for(o=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===u.length||o===c.length)for(i=u.length-1,o=c.length-1;1<=i&&0<=o&&u[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(u[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||u[i]!==c[o]){var h=`
`+u[i].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=i&&0<=o);break}}}finally{Xc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Qi(n):""}function $w(e,t){switch(e.tag){case 26:case 27:case 5:return Qi(e.type);case 16:return Qi("Lazy");case 13:return e.child!==t&&t!==null?Qi("Suspense Fallback"):Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 15:return Wc(e.type,!1);case 11:return Wc(e.type.render,!1);case 1:return Wc(e.type,!0);case 31:return Qi("Activity");default:return""}}function Sg(e){try{var t="",n=null;do t+=$w(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var jf=Object.prototype.hasOwnProperty,Dh=Xt.unstable_scheduleCallback,Zc=Xt.unstable_cancelCallback,Xw=Xt.unstable_shouldYield,Ww=Xt.unstable_requestPaint,Fe=Xt.unstable_now,Zw=Xt.unstable_getCurrentPriorityLevel,G_=Xt.unstable_ImmediatePriority,q_=Xt.unstable_UserBlockingPriority,Ql=Xt.unstable_NormalPriority,jw=Xt.unstable_LowPriority,F_=Xt.unstable_IdlePriority,tR=Xt.log,eR=Xt.unstable_setDisableYieldValue,da=null,He=null;function di(e){if(typeof tR=="function"&&eR(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(da,e)}catch{}}var ze=Math.clz32?Math.clz32:oR,nR=Math.log,iR=Math.LN2;function oR(e){return e>>>=0,e===0?32:31-(nR(e)/iR|0)|0}var Xa=256,Wa=262144,Za=4194304;function $i(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fu(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var a=i&134217727;return a!==0?(i=a&~s,i!==0?o=$i(i):(r&=a,r!==0?o=$i(r):n||(n=a&~e,n!==0&&(o=$i(n))))):(a=i&~s,a!==0?o=$i(a):r!==0?o=$i(r):n||(n=i&~e,n!==0&&(o=$i(n)))),o===0?0:t!==0&&t!==o&&!(t&s)&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function ha(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function sR(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H_(){var e=Za;return Za<<=1,!(Za&62914560)&&(Za=4194304),e}function jc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function rR(e,t,n,i,o,s){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,u=e.expirationTimes,c=e.hiddenUpdates;for(n=r&~n;0<n;){var h=31-ze(n),m=1<<h;a[h]=0,u[h]=-1;var p=c[h];if(p!==null)for(c[h]=null,h=0;h<p.length;h++){var v=p[h];v!==null&&(v.lane&=-536870913)}n&=~m}i!==0&&z_(e,i,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function z_(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-ze(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Y_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ze(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function K_(e,t){var n=t&-t;return n=n&42?1:Vh(n),n&(e.suspendedLanes|t)?0:n}function Vh(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ph(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function J_(){var e=mt.p;return e!==0?e:(e=window.event,e===void 0?32:gS(e.type))}function Ag(e,t){var n=mt.p;try{return mt.p=e,t()}finally{mt.p=n}}var Bi=Math.random().toString(36).slice(2),se="__reactFiber$"+Bi,Ve="__reactProps$"+Bi,bs="__reactContainer$"+Bi,td="__reactEvents$"+Bi,aR="__reactListeners$"+Bi,lR="__reactHandles$"+Bi,Cg="__reactResources$"+Bi,ma="__reactMarker$"+Bi;function kh(e){delete e[se],delete e[Ve],delete e[td],delete e[aR],delete e[lR]}function qo(e){var t=e[se];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bs]||n[se]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=My(e);e!==null;){if(n=e[se])return n;e=My(e)}return t}e=n,n=e.parentNode}return null}function Ns(e){if(e=e[se]||e[bs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function mr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(O(33))}function jo(e){var t=e[Cg];return t||(t=e[Cg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function jt(e){e[ma]=!0}var Q_=new Set,$_={};function yo(e,t){fs(e,t),fs(e+"Capture",t)}function fs(e,t){for($_[e]=t,e=0;e<t.length;e++)Q_.add(t[e])}var uR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wg={},Rg={};function cR(e){return jf.call(Rg,e)?!0:jf.call(wg,e)?!1:uR.test(e)?Rg[e]=!0:(wg[e]=!0,!1)}function Al(e,t,n){if(cR(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ja(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Mn(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function We(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function X_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fR(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ed(e){if(!e._valueTracker){var t=X_(e)?"checked":"value";e._valueTracker=fR(e,t,""+e[t])}}function W_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=X_(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function $l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var dR=/[\n"\\]/g;function tn(e){return e.replace(dR,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function nd(e,t,n,i,o,s,r,a){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+We(t)):e.value!==""+We(t)&&(e.value=""+We(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?id(e,r,We(t)):n!=null?id(e,r,We(n)):i!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+We(a):e.removeAttribute("name")}function Z_(e,t,n,i,o,s,r,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){ed(e);return}n=n!=null?""+We(n):"",t=t!=null?""+We(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),ed(e)}function id(e,t,n){t==="number"&&$l(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ts(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+We(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function j_(e,t,n){if(t!=null&&(t=""+We(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+We(n):""}function tT(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(O(92));if(pr(i)){if(1<i.length)throw Error(O(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=We(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),ed(e)}function ds(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ig(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||hR.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function eT(e,t,n){if(t!=null&&typeof t!="object")throw Error(O(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&Ig(e,o,i)}else for(var s in t)t.hasOwnProperty(s)&&Ig(e,s,t[s])}function Uh(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cl(e){return mR.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Bn(){}var od=null;function Lh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fo=null,es=null;function xg(e){var t=Ns(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;t:switch(e=t.stateNode,t.type){case"input":if(nd(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+tn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[Ve]||null;if(!o)throw Error(O(90));nd(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&W_(i)}break t;case"textarea":j_(e,n.value,n.defaultValue);break t;case"select":t=n.value,t!=null&&ts(e,!!n.multiple,t,!1)}}}var tf=!1;function nT(e,t,n){if(tf)return e(t,n);tf=!0;try{var i=e(t);return i}finally{if(tf=!1,(Fo!==null||es!==null)&&(tc(),Fo&&(t=Fo,e=es,es=Fo=null,xg(t),e)))for(t=0;t<e.length;t++)xg(e[t])}}function Fr(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Ve]||null;if(i===null)return null;n=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(O(231,t,typeof n));return n}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sd=!1;if(zn)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){sd=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{sd=!1}var hi=null,Oh=null,wl=null;function iT(){if(wl)return wl;var e,t=Oh,n=t.length,i,o="value"in hi?hi.value:hi.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var r=n-e;for(i=1;i<=r&&t[n-i]===o[s-i];i++);return wl=o.slice(e,1<i?1-i:void 0)}function Rl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tl(){return!0}function bg(){return!1}function Pe(e){function t(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tl:bg,this.isPropagationStopped=bg,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tl)},persist:function(){},isPersistent:tl}),t}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=Pe(vo),ga=Nt({},vo,{view:0,detail:0}),gR=Pe(ga),ef,nf,or,zu=Nt({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&e.type==="mousemove"?(ef=e.screenX-or.screenX,nf=e.screenY-or.screenY):nf=ef=0,or=e),ef)},movementY:function(e){return"movementY"in e?e.movementY:nf}}),Ng=Pe(zu),yR=Nt({},zu,{dataTransfer:0}),vR=Pe(yR),_R=Nt({},ga,{relatedTarget:0}),of=Pe(_R),TR=Nt({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),ER=Pe(TR),SR=Nt({},vo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AR=Pe(SR),CR=Nt({},vo,{data:0}),Mg=Pe(CR),wR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=IR[e])?!!t[e]:!1}function Bh(){return xR}var bR=Nt({},ga,{key:function(e){if(e.key){var t=wR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bh,charCode:function(e){return e.type==="keypress"?Rl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NR=Pe(bR),MR=Nt({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=Pe(MR),DR=Nt({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bh}),VR=Pe(DR),PR=Nt({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kR=Pe(PR),UR=Nt({},zu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LR=Pe(UR),OR=Nt({},vo,{newState:0,oldState:0}),BR=Pe(OR),GR=[9,13,27,32],Gh=zn&&"CompositionEvent"in window,Cr=null;zn&&"documentMode"in document&&(Cr=document.documentMode);var qR=zn&&"TextEvent"in window&&!Cr,oT=zn&&(!Gh||Cr&&8<Cr&&11>=Cr),Vg=" ",Pg=!1;function sT(e,t){switch(e){case"keyup":return GR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ho=!1;function FR(e,t){switch(e){case"compositionend":return rT(t);case"keypress":return t.which!==32?null:(Pg=!0,Vg);case"textInput":return e=t.data,e===Vg&&Pg?null:e;default:return null}}function HR(e,t){if(Ho)return e==="compositionend"||!Gh&&sT(e,t)?(e=iT(),wl=Oh=hi=null,Ho=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oT&&t.locale!=="ko"?null:t.data;default:return null}}var zR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zR[e.type]:t==="textarea"}function aT(e,t,n,i){Fo?es?es.push(i):es=[i]:Fo=i,t=hu(t,"onChange"),0<t.length&&(n=new Hu("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var wr=null,Hr=null;function YR(e){nS(e,0)}function Yu(e){var t=mr(e);if(W_(t))return e}function Ug(e,t){if(e==="change")return t}var lT=!1;if(zn){var sf;if(zn){var rf="oninput"in document;if(!rf){var Lg=document.createElement("div");Lg.setAttribute("oninput","return;"),rf=typeof Lg.oninput=="function"}sf=rf}else sf=!1;lT=sf&&(!document.documentMode||9<document.documentMode)}function Og(){wr&&(wr.detachEvent("onpropertychange",uT),Hr=wr=null)}function uT(e){if(e.propertyName==="value"&&Yu(Hr)){var t=[];aT(t,Hr,e,Lh(e)),nT(YR,t)}}function KR(e,t,n){e==="focusin"?(Og(),wr=t,Hr=n,wr.attachEvent("onpropertychange",uT)):e==="focusout"&&Og()}function JR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yu(Hr)}function QR(e,t){if(e==="click")return Yu(t)}function $R(e,t){if(e==="input"||e==="change")return Yu(t)}function XR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Je=typeof Object.is=="function"?Object.is:XR;function zr(e,t){if(Je(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!jf.call(t,o)||!Je(e[o],t[o]))return!1}return!0}function Bg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gg(e,t){var n=Bg(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Bg(n)}}function cT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fT(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$l(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$l(e.document)}return t}function qh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var WR=zn&&"documentMode"in document&&11>=document.documentMode,zo=null,rd=null,Rr=null,ad=!1;function qg(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ad||zo==null||zo!==$l(i)||(i=zo,"selectionStart"in i&&qh(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rr&&zr(Rr,i)||(Rr=i,i=hu(rd,"onSelect"),0<i.length&&(t=new Hu("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=zo)))}function Ji(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yo={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},af={},dT={};zn&&(dT=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function _o(e){if(af[e])return af[e];if(!Yo[e])return e;var t=Yo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dT)return af[e]=t[n];return e}var hT=_o("animationend"),pT=_o("animationiteration"),mT=_o("animationstart"),ZR=_o("transitionrun"),jR=_o("transitionstart"),tI=_o("transitioncancel"),gT=_o("transitionend"),yT=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ld.push("scrollEnd");function pn(e,t){yT.set(e,t),yo(t,[e])}var Xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Xe=[],Ko=0,Fh=0;function Ku(){for(var e=Ko,t=Fh=Ko=0;t<e;){var n=Xe[t];Xe[t++]=null;var i=Xe[t];Xe[t++]=null;var o=Xe[t];Xe[t++]=null;var s=Xe[t];if(Xe[t++]=null,i!==null&&o!==null){var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}s!==0&&vT(n,o,s)}}function Ju(e,t,n,i){Xe[Ko++]=e,Xe[Ko++]=t,Xe[Ko++]=n,Xe[Ko++]=i,Fh|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Hh(e,t,n,i){return Ju(e,t,n,i),Wl(e)}function To(e,t){return Ju(e,null,null,t),Wl(e)}function vT(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-ze(n),e=s.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),s):null}function Wl(e){if(50<kr)throw kr=0,bd=null,Error(O(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Jo={};function eI(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Be(e,t,n,i){return new eI(e,t,n,i)}function zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qn(e,t){var n=e.alternate;return n===null?(n=Be(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function _T(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Il(e,t,n,i,o,s){var r=0;if(i=e,typeof e=="function")zh(e)&&(r=1);else if(typeof e=="string")r=rx(e,n,Tn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case $f:return e=Be(31,n,t,o),e.elementType=$f,e.lanes=s,e;case Bo:return no(n.children,o,s,t);case O_:r=8,o|=24;break;case Kf:return e=Be(12,n,t,o|2),e.elementType=Kf,e.lanes=s,e;case Jf:return e=Be(13,n,t,o),e.elementType=Jf,e.lanes=s,e;case Qf:return e=Be(19,n,t,o),e.elementType=Qf,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case On:r=10;break t;case B_:r=9;break t;case Nh:r=11;break t;case Mh:r=14;break t;case ri:r=16,i=null;break t}r=29,n=Error(O(130,e===null?"null":typeof e,"")),i=null}return t=Be(r,n,t,o),t.elementType=e,t.type=i,t.lanes=s,t}function no(e,t,n,i){return e=Be(7,e,i,t),e.lanes=n,e}function lf(e,t,n){return e=Be(6,e,null,t),e.lanes=n,e}function TT(e){var t=Be(18,null,null,0);return t.stateNode=e,t}function uf(e,t,n){return t=Be(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Fg=new WeakMap;function en(e,t){if(typeof e=="object"&&e!==null){var n=Fg.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Sg(t)},Fg.set(e,t),t)}return{value:e,source:t,stack:Sg(t)}}var Qo=[],$o=0,Zl=null,Yr=0,Ze=[],je=0,Mi=null,yn=1,vn="";function Un(e,t){Qo[$o++]=Yr,Qo[$o++]=Zl,Zl=e,Yr=t}function ET(e,t,n){Ze[je++]=yn,Ze[je++]=vn,Ze[je++]=Mi,Mi=e;var i=yn;e=vn;var o=32-ze(i)-1;i&=~(1<<o),n+=1;var s=32-ze(t)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,yn=1<<32-ze(t)+o|n<<o|i,vn=s+e}else yn=1<<s|n<<o|i,vn=e}function Yh(e){e.return!==null&&(Un(e,1),ET(e,1,0))}function Kh(e){for(;e===Zl;)Zl=Qo[--$o],Qo[$o]=null,Yr=Qo[--$o],Qo[$o]=null;for(;e===Mi;)Mi=Ze[--je],Ze[je]=null,vn=Ze[--je],Ze[je]=null,yn=Ze[--je],Ze[je]=null}function ST(e,t){Ze[je++]=yn,Ze[je++]=vn,Ze[je++]=Mi,yn=t.id,vn=t.overflow,Mi=e}var re=null,xt=null,lt=!1,Ti=null,nn=!1,ud=Error(O(519));function Di(e){var t=Error(O(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kr(en(t,e)),ud}function Hg(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[se]=e,t[Ve]=i,n){case"dialog":it("cancel",t),it("close",t);break;case"iframe":case"object":case"embed":it("load",t);break;case"video":case"audio":for(n=0;n<Xr.length;n++)it(Xr[n],t);break;case"source":it("error",t);break;case"img":case"image":case"link":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"input":it("invalid",t),Z_(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":it("invalid",t);break;case"textarea":it("invalid",t),tT(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||oS(t.textContent,n)?(i.popover!=null&&(it("beforetoggle",t),it("toggle",t)),i.onScroll!=null&&it("scroll",t),i.onScrollEnd!=null&&it("scrollend",t),i.onClick!=null&&(t.onclick=Bn),t=!0):t=!1,t||Di(e,!0)}function zg(e){for(re=e.return;re;)switch(re.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:re=re.return}}function No(e){if(e!==re)return!1;if(!lt)return zg(e),lt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Pd(e.type,e.memoizedProps)),n=!n),n&&xt&&Di(e),zg(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));xt=Ny(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));xt=Ny(e)}else t===27?(t=xt,Gi(e.type)?(e=Od,Od=null,xt=e):xt=t):xt=re?sn(e.stateNode.nextSibling):null;return!0}function lo(){xt=re=null,lt=!1}function cf(){var e=Ti;return e!==null&&(Ne===null?Ne=e:Ne.push.apply(Ne,e),Ti=null),e}function Kr(e){Ti===null?Ti=[e]:Ti.push(e)}var cd=Rn(null),Eo=null,Gn=null;function li(e,t,n){Ct(cd,t._currentValue),t._currentValue=n}function Fn(e){e._currentValue=cd.current,te(cd)}function fd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function dd(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var r=o.child;s=s.firstContext;t:for(;s!==null;){var a=s;s=o;for(var u=0;u<t.length;u++)if(a.context===t[u]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),fd(s.return,n,e),i||(r=null);break t}s=a.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(O(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),fd(r,n,e),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Ms(e,t,n,i){e=null;for(var o=t,s=!1;o!==null;){if(!s){if(o.flags&524288)s=!0;else if(o.flags&262144)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(O(387));if(r=r.memoizedProps,r!==null){var a=o.type;Je(o.pendingProps.value,r.value)||(e!==null?e.push(a):e=[a])}}else if(o===Yl.current){if(r=o.alternate,r===null)throw Error(O(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Zr):e=[Zr])}o=o.return}e!==null&&dd(t,e,n,i),t.flags|=262144}function jl(e){for(e=e.firstContext;e!==null;){if(!Je(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function uo(e){Eo=e,Gn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function le(e){return AT(Eo,e)}function el(e,t){return Eo===null&&uo(e),AT(e,t)}function AT(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Gn===null){if(e===null)throw Error(O(308));Gn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Gn=Gn.next=t;return n}var nI=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},iI=Xt.unstable_scheduleCallback,oI=Xt.unstable_NormalPriority,Yt={$$typeof:On,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new nI,data:new Map,refCount:0}}function ya(e){e.refCount--,e.refCount===0&&iI(oI,function(){e.controller.abort()})}var Ir=null,hd=0,hs=0,ns=null;function sI(e,t){if(Ir===null){var n=Ir=[];hd=0,hs=vp(),ns={status:"pending",value:void 0,then:function(i){n.push(i)}}}return hd++,t.then(Yg,Yg),t}function Yg(){if(--hd===0&&Ir!==null){ns!==null&&(ns.status="fulfilled");var e=Ir;Ir=null,hs=0,ns=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function rI(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var Kg=Q.S;Q.S=function(e,t){LE=Fe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&sI(e,t),Kg!==null&&Kg(e,t)};var io=Rn(null);function Qh(){var e=io.current;return e!==null?e:At.pooledCache}function xl(e,t){t===null?Ct(io,io.current):Ct(io,t.pool)}function CT(){var e=Qh();return e===null?null:{parent:Yt._currentValue,pool:e}}var Ds=Error(O(460)),$h=Error(O(474)),Qu=Error(O(542)),tu={then:function(){}};function Jg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wT(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Bn,Bn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$g(e),e;default:if(typeof t.status=="string")t.then(Bn,Bn);else{if(e=At,e!==null&&100<e.shellSuspendCounter)throw Error(O(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$g(e),e}throw oo=t,Ds}}function Xi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(oo=n,Ds):n}}var oo=null;function Qg(){if(oo===null)throw Error(O(459));var e=oo;return oo=null,e}function $g(e){if(e===Ds||e===Qu)throw Error(O(483))}var is=null,Jr=0;function nl(e){var t=Jr;return Jr+=1,is===null&&(is=[]),wT(is,e,t)}function sr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function il(e,t){throw t.$$typeof===Kw?Error(O(525)):(e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function RT(e){function t(E,_){if(e){var C=E.deletions;C===null?(E.deletions=[_],E.flags|=16):C.push(_)}}function n(E,_){if(!e)return null;for(;_!==null;)t(E,_),_=_.sibling;return null}function i(E){for(var _=new Map;E!==null;)E.key!==null?_.set(E.key,E):_.set(E.index,E),E=E.sibling;return _}function o(E,_){return E=qn(E,_),E.index=0,E.sibling=null,E}function s(E,_,C){return E.index=C,e?(C=E.alternate,C!==null?(C=C.index,C<_?(E.flags|=67108866,_):C):(E.flags|=67108866,_)):(E.flags|=1048576,_)}function r(E){return e&&E.alternate===null&&(E.flags|=67108866),E}function a(E,_,C,V){return _===null||_.tag!==6?(_=lf(C,E.mode,V),_.return=E,_):(_=o(_,C),_.return=E,_)}function u(E,_,C,V){var L=C.type;return L===Bo?h(E,_,C.props.children,V,C.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ri&&Xi(L)===_.type)?(_=o(_,C.props),sr(_,C),_.return=E,_):(_=Il(C.type,C.key,C.props,null,E.mode,V),sr(_,C),_.return=E,_)}function c(E,_,C,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=uf(C,E.mode,V),_.return=E,_):(_=o(_,C.children||[]),_.return=E,_)}function h(E,_,C,V,L){return _===null||_.tag!==7?(_=no(C,E.mode,V,L),_.return=E,_):(_=o(_,C),_.return=E,_)}function m(E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=lf(""+_,E.mode,C),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $a:return C=Il(_.type,_.key,_.props,null,E.mode,C),sr(C,_),C.return=E,C;case hr:return _=uf(_,E.mode,C),_.return=E,_;case ri:return _=Xi(_),m(E,_,C)}if(pr(_)||nr(_))return _=no(_,E.mode,C,null),_.return=E,_;if(typeof _.then=="function")return m(E,nl(_),C);if(_.$$typeof===On)return m(E,el(E,_),C);il(E,_)}return null}function p(E,_,C,V){var L=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return L!==null?null:a(E,_,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case $a:return C.key===L?u(E,_,C,V):null;case hr:return C.key===L?c(E,_,C,V):null;case ri:return C=Xi(C),p(E,_,C,V)}if(pr(C)||nr(C))return L!==null?null:h(E,_,C,V,null);if(typeof C.then=="function")return p(E,_,nl(C),V);if(C.$$typeof===On)return p(E,_,el(E,C),V);il(E,C)}return null}function v(E,_,C,V,L){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return E=E.get(C)||null,a(_,E,""+V,L);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case $a:return E=E.get(V.key===null?C:V.key)||null,u(_,E,V,L);case hr:return E=E.get(V.key===null?C:V.key)||null,c(_,E,V,L);case ri:return V=Xi(V),v(E,_,C,V,L)}if(pr(V)||nr(V))return E=E.get(C)||null,h(_,E,V,L,null);if(typeof V.then=="function")return v(E,_,C,nl(V),L);if(V.$$typeof===On)return v(E,_,C,el(_,V),L);il(_,V)}return null}function x(E,_,C,V){for(var L=null,B=null,I=_,w=_=0,A=null;I!==null&&w<C.length;w++){I.index>w?(A=I,I=null):A=I.sibling;var M=p(E,I,C[w],V);if(M===null){I===null&&(I=A);break}e&&I&&M.alternate===null&&t(E,I),_=s(M,_,w),B===null?L=M:B.sibling=M,B=M,I=A}if(w===C.length)return n(E,I),lt&&Un(E,w),L;if(I===null){for(;w<C.length;w++)I=m(E,C[w],V),I!==null&&(_=s(I,_,w),B===null?L=I:B.sibling=I,B=I);return lt&&Un(E,w),L}for(I=i(I);w<C.length;w++)A=v(I,E,w,C[w],V),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?w:A.key),_=s(A,_,w),B===null?L=A:B.sibling=A,B=A);return e&&I.forEach(function(R){return t(E,R)}),lt&&Un(E,w),L}function b(E,_,C,V){if(C==null)throw Error(O(151));for(var L=null,B=null,I=_,w=_=0,A=null,M=C.next();I!==null&&!M.done;w++,M=C.next()){I.index>w?(A=I,I=null):A=I.sibling;var R=p(E,I,M.value,V);if(R===null){I===null&&(I=A);break}e&&I&&R.alternate===null&&t(E,I),_=s(R,_,w),B===null?L=R:B.sibling=R,B=R,I=A}if(M.done)return n(E,I),lt&&Un(E,w),L;if(I===null){for(;!M.done;w++,M=C.next())M=m(E,M.value,V),M!==null&&(_=s(M,_,w),B===null?L=M:B.sibling=M,B=M);return lt&&Un(E,w),L}for(I=i(I);!M.done;w++,M=C.next())M=v(I,E,w,M.value,V),M!==null&&(e&&M.alternate!==null&&I.delete(M.key===null?w:M.key),_=s(M,_,w),B===null?L=M:B.sibling=M,B=M);return e&&I.forEach(function(P){return t(E,P)}),lt&&Un(E,w),L}function D(E,_,C,V){if(typeof C=="object"&&C!==null&&C.type===Bo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case $a:t:{for(var L=C.key;_!==null;){if(_.key===L){if(L=C.type,L===Bo){if(_.tag===7){n(E,_.sibling),V=o(_,C.props.children),V.return=E,E=V;break t}}else if(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ri&&Xi(L)===_.type){n(E,_.sibling),V=o(_,C.props),sr(V,C),V.return=E,E=V;break t}n(E,_);break}else t(E,_);_=_.sibling}C.type===Bo?(V=no(C.props.children,E.mode,V,C.key),V.return=E,E=V):(V=Il(C.type,C.key,C.props,null,E.mode,V),sr(V,C),V.return=E,E=V)}return r(E);case hr:t:{for(L=C.key;_!==null;){if(_.key===L)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){n(E,_.sibling),V=o(_,C.children||[]),V.return=E,E=V;break t}else{n(E,_);break}else t(E,_);_=_.sibling}V=uf(C,E.mode,V),V.return=E,E=V}return r(E);case ri:return C=Xi(C),D(E,_,C,V)}if(pr(C))return x(E,_,C,V);if(nr(C)){if(L=nr(C),typeof L!="function")throw Error(O(150));return C=L.call(C),b(E,_,C,V)}if(typeof C.then=="function")return D(E,_,nl(C),V);if(C.$$typeof===On)return D(E,_,el(E,C),V);il(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,_!==null&&_.tag===6?(n(E,_.sibling),V=o(_,C),V.return=E,E=V):(n(E,_),V=lf(C,E.mode,V),V.return=E,E=V),r(E)):n(E,_)}return function(E,_,C,V){try{Jr=0;var L=D(E,_,C,V);return is=null,L}catch(I){if(I===Ds||I===Qu)throw I;var B=Be(29,I,null,E.mode);return B.lanes=V,B.return=E,B}finally{}}}var co=RT(!0),IT=RT(!1),ai=!1;function Xh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Si(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,pt&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=Wl(e),vT(e,null,n),t}return Ju(e,i,t,n),Wl(e)}function xr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Y_(e,n)}}function ff(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var md=!1;function br(){if(md){var e=ns;if(e!==null)throw e}}function Nr(e,t,n,i){md=!1;var o=e.updateQueue;ai=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var u=a,c=u.next;u.next=null,r===null?s=c:r.next=c,r=u;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==r&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var m=o.baseState;r=0,h=c=u=null,a=s;do{var p=a.lane&-536870913,v=p!==a.lane;if(v?(at&p)===p:(i&p)===p){p!==0&&p===hs&&(md=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});t:{var x=e,b=a;p=t;var D=n;switch(b.tag){case 1:if(x=b.payload,typeof x=="function"){m=x.call(D,m,p);break t}m=x;break t;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,p=typeof x=="function"?x.call(D,m,p):x,p==null)break t;m=Nt({},m,p);break t;case 2:ai=!0}}p=a.callback,p!==null&&(e.flags|=64,v&&(e.flags|=8192),v=o.callbacks,v===null?o.callbacks=[p]:v.push(p))}else v={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=v,u=m):h=h.next=v,r|=p;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;v=a,a=v.next,v.next=null,o.lastBaseUpdate=v,o.shared.pending=null}}while(!0);h===null&&(u=m),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,s===null&&(o.shared.lanes=0),Pi|=r,e.lanes=r,e.memoizedState=m}}function xT(e,t){if(typeof e!="function")throw Error(O(191,e));e.call(t)}function bT(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xT(n[e],t)}var ps=Rn(null),eu=Rn(0);function Xg(e,t){e=Qn,Ct(eu,e),Ct(ps,t),Qn=e|t.baseLanes}function gd(){Ct(eu,Qn),Ct(ps,ps.current)}function Wh(){Qn=eu.current,te(ps),te(eu)}var Qe=Rn(null),on=null;function ui(e){var t=e.alternate;Ct(Bt,Bt.current&1),Ct(Qe,e),on===null&&(t===null||ps.current!==null||t.memoizedState!==null)&&(on=e)}function yd(e){Ct(Bt,Bt.current),Ct(Qe,e),on===null&&(on=e)}function NT(e){e.tag===22?(Ct(Bt,Bt.current),Ct(Qe,e),on===null&&(on=e)):ci()}function ci(){Ct(Bt,Bt.current),Ct(Qe,Qe.current)}function Oe(e){te(Qe),on===e&&(on=null),te(Bt)}var Bt=Rn(0);function nu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ud(n)||Ld(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yn=0,nt=null,Et=null,Ht=null,iu=!1,os=!1,fo=!1,ou=0,Qr=0,ss=null,aI=0;function Pt(){throw Error(O(321))}function Zh(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Je(e[n],t[n]))return!1;return!0}function jh(e,t,n,i,o,s){return Yn=s,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Q.H=e===null||e.memoizedState===null?aE:cp,fo=!1,s=n(i,o),fo=!1,os&&(s=DT(t,n,i,o)),MT(e),s}function MT(e){Q.H=$r;var t=Et!==null&&Et.next!==null;if(Yn=0,Ht=Et=nt=null,iu=!1,Qr=0,ss=null,t)throw Error(O(300));e===null||Kt||(e=e.dependencies,e!==null&&jl(e)&&(Kt=!0))}function DT(e,t,n,i){nt=e;var o=0;do{if(os&&(ss=null),Qr=0,os=!1,25<=o)throw Error(O(301));if(o+=1,Ht=Et=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Q.H=lE,s=t(n,i)}while(os);return s}function lI(){var e=Q.H,t=e.useState()[0];return t=typeof t.then=="function"?va(t):t,e=e.useState()[0],(Et!==null?Et.memoizedState:null)!==e&&(nt.flags|=1024),t}function tp(){var e=ou!==0;return ou=0,e}function ep(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function np(e){if(iu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}iu=!1}Yn=0,Ht=Et=nt=null,os=!1,Qr=ou=0,ss=null}function Ee(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?nt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function Gt(){if(Et===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=Et.next;var t=Ht===null?nt.memoizedState:Ht.next;if(t!==null)Ht=t,Et=e;else{if(e===null)throw nt.alternate===null?Error(O(467)):Error(O(310));Et=e,e={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ht===null?nt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function va(e){var t=Qr;return Qr+=1,ss===null&&(ss=[]),e=wT(ss,e,t),t=nt,(Ht===null?t.memoizedState:Ht.next)===null&&(t=t.alternate,Q.H=t===null||t.memoizedState===null?aE:cp),e}function Xu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return va(e);if(e.$$typeof===On)return le(e)}throw Error(O(438,String(e)))}function ip(e){var t=null,n=nt.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=nt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=$u(),nt.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=Jw;return t.index++,n}function Kn(e,t){return typeof t=="function"?t(e):t}function bl(e){var t=Gt();return op(t,Et,e)}function op(e,t,n){var i=e.queue;if(i===null)throw Error(O(311));i.lastRenderedReducer=n;var o=e.baseQueue,s=i.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}t.baseQueue=o=s,i.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var a=r=null,u=null,c=t,h=!1;do{var m=c.lane&-536870913;if(m!==c.lane?(at&m)===m:(Yn&m)===m){var p=c.revertLane;if(p===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),m===hs&&(h=!0);else if((Yn&p)===p){c=c.next,p===hs&&(h=!0);continue}else m={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(a=u=m,r=s):u=u.next=m,nt.lanes|=p,Pi|=p;m=c.action,fo&&n(s,m),s=c.hasEagerState?c.eagerState:n(s,m)}else p={lane:m,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(a=u=p,r=s):u=u.next=p,nt.lanes|=m,Pi|=m;c=c.next}while(c!==null&&c!==t);if(u===null?r=s:u.next=a,!Je(s,e.memoizedState)&&(Kt=!0,h&&(n=ns,n!==null)))throw n;e.memoizedState=s,e.baseState=r,e.baseQueue=u,i.lastRenderedState=s}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function df(e){var t=Gt(),n=t.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=e(s,r.action),r=r.next;while(r!==o);Je(s,t.memoizedState)||(Kt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function VT(e,t,n){var i=nt,o=Gt(),s=lt;if(s){if(n===void 0)throw Error(O(407));n=n()}else n=t();var r=!Je((Et||o).memoizedState,n);if(r&&(o.memoizedState=n,Kt=!0),o=o.queue,sp(UT.bind(null,i,o,e),[e]),o.getSnapshot!==t||r||Ht!==null&&Ht.memoizedState.tag&1){if(i.flags|=2048,ms(9,{destroy:void 0},kT.bind(null,i,o,n,t),null),At===null)throw Error(O(349));s||Yn&127||PT(i,t,n)}return n}function PT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=nt.updateQueue,t===null?(t=$u(),nt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kT(e,t,n,i){t.value=n,t.getSnapshot=i,LT(t)&&OT(e)}function UT(e,t,n){return n(function(){LT(t)&&OT(e)})}function LT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Je(e,n)}catch{return!0}}function OT(e){var t=To(e,2);t!==null&&De(t,e,2)}function vd(e){var t=Ee();if(typeof e=="function"){var n=e;if(e=n(),fo){di(!0);try{n()}finally{di(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:e},t}function BT(e,t,n,i){return e.baseState=n,op(e,Et,typeof i=="function"?i:Kn)}function uI(e,t,n,i,o){if(Zu(e))throw Error(O(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};Q.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,GT(t,s)):(s.next=n.next,t.pending=n.next=s)}}function GT(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var s=Q.T,r={};Q.T=r;try{var a=n(o,i),u=Q.S;u!==null&&u(r,a),Wg(e,t,a)}catch(c){_d(e,t,c)}finally{s!==null&&r.types!==null&&(s.types=r.types),Q.T=s}}else try{s=n(o,i),Wg(e,t,s)}catch(c){_d(e,t,c)}}function Wg(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Zg(e,t,i)},function(i){return _d(e,t,i)}):Zg(e,t,n)}function Zg(e,t,n){t.status="fulfilled",t.value=n,qT(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,GT(e,n)))}function _d(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,qT(t),t=t.next;while(t!==i)}e.action=null}function qT(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function FT(e,t){return t}function jg(e,t){if(lt){var n=At.formState;if(n!==null){t:{var i=nt;if(lt){if(xt){e:{for(var o=xt,s=nn;o.nodeType!==8;){if(!s){o=null;break e}if(o=sn(o.nextSibling),o===null){o=null;break e}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){xt=sn(o.nextSibling),i=o.data==="F!";break t}}Di(i)}i=!1}i&&(t=n[0])}}return n=Ee(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:FT,lastRenderedState:t},n.queue=i,n=oE.bind(null,nt,i),i.dispatch=n,i=vd(!1),s=up.bind(null,nt,!1,i.queue),i=Ee(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=uI.bind(null,nt,o,s,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function ty(e){var t=Gt();return HT(t,Et,e)}function HT(e,t,n){if(t=op(e,t,FT)[0],e=bl(Kn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=va(t)}catch(r){throw r===Ds?Qu:r}else i=t;t=Gt();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(nt.flags|=2048,ms(9,{destroy:void 0},cI.bind(null,o,n),null)),[i,s,e]}function cI(e,t){e.action=t}function ey(e){var t=Gt(),n=Et;if(n!==null)return HT(t,n,e);Gt(),t=t.memoizedState,n=Gt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function ms(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=nt.updateQueue,t===null&&(t=$u(),nt.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zT(){return Gt().memoizedState}function Nl(e,t,n,i){var o=Ee();nt.flags|=e,o.memoizedState=ms(1|t,{destroy:void 0},n,i===void 0?null:i)}function Wu(e,t,n,i){var o=Gt();i=i===void 0?null:i;var s=o.memoizedState.inst;Et!==null&&i!==null&&Zh(i,Et.memoizedState.deps)?o.memoizedState=ms(t,s,n,i):(nt.flags|=e,o.memoizedState=ms(1|t,s,n,i))}function ny(e,t){Nl(8390656,8,e,t)}function sp(e,t){Wu(2048,8,e,t)}function fI(e){nt.flags|=4;var t=nt.updateQueue;if(t===null)t=$u(),nt.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function YT(e){var t=Gt().memoizedState;return fI({ref:t,nextImpl:e}),function(){if(pt&2)throw Error(O(440));return t.impl.apply(void 0,arguments)}}function KT(e,t){return Wu(4,2,e,t)}function JT(e,t){return Wu(4,4,e,t)}function QT(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $T(e,t,n){n=n!=null?n.concat([e]):null,Wu(4,4,QT.bind(null,t,e),n)}function rp(){}function XT(e,t){var n=Gt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Zh(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function WT(e,t){var n=Gt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Zh(t,i[1]))return i[0];if(i=e(),fo){di(!0);try{e()}finally{di(!1)}}return n.memoizedState=[i,t],i}function ap(e,t,n){return n===void 0||Yn&1073741824&&!(at&261930)?e.memoizedState=t:(e.memoizedState=n,e=BE(),nt.lanes|=e,Pi|=e,n)}function ZT(e,t,n,i){return Je(n,t)?n:ps.current!==null?(e=ap(e,n,i),Je(e,t)||(Kt=!0),e):!(Yn&42)||Yn&1073741824&&!(at&261930)?(Kt=!0,e.memoizedState=n):(e=BE(),nt.lanes|=e,Pi|=e,t)}function jT(e,t,n,i,o){var s=mt.p;mt.p=s!==0&&8>s?s:8;var r=Q.T,a={};Q.T=a,up(e,!1,t,n);try{var u=o(),c=Q.S;if(c!==null&&c(a,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=rI(u,i);Mr(e,t,h,Ye(e))}else Mr(e,t,i,Ye(e))}catch(m){Mr(e,t,{then:function(){},status:"rejected",reason:m},Ye())}finally{mt.p=s,r!==null&&a.types!==null&&(r.types=a.types),Q.T=r}}function dI(){}function Td(e,t,n,i){if(e.tag!==5)throw Error(O(476));var o=tE(e).queue;jT(e,o,t,eo,n===null?dI:function(){return eE(e),n(i)})}function tE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:eo,baseState:eo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:eo},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function eE(e){var t=tE(e);t.next===null&&(t=e.alternate.memoizedState),Mr(e,t.next.queue,{},Ye())}function lp(){return le(Zr)}function nE(){return Gt().memoizedState}function iE(){return Gt().memoizedState}function hI(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Ye();e=Ei(n);var i=Si(t,e,n);i!==null&&(De(i,t,n),xr(i,t,n)),t={cache:Jh()},e.payload=t;return}t=t.return}}function pI(e,t,n){var i=Ye();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Zu(e)?sE(t,n):(n=Hh(e,t,n,i),n!==null&&(De(n,e,i),rE(n,t,i)))}function oE(e,t,n){var i=Ye();Mr(e,t,n,i)}function Mr(e,t,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zu(e))sE(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,a=s(r,n);if(o.hasEagerState=!0,o.eagerState=a,Je(a,r))return Ju(e,t,o,0),At===null&&Ku(),!1}catch{}finally{}if(n=Hh(e,t,o,i),n!==null)return De(n,e,i),rE(n,t,i),!0}return!1}function up(e,t,n,i){if(i={lane:2,revertLane:vp(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Zu(e)){if(t)throw Error(O(479))}else t=Hh(e,n,i,2),t!==null&&De(t,e,2)}function Zu(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function sE(e,t){os=iu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rE(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Y_(e,n)}}var $r={readContext:le,use:Xu,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt};$r.useEffectEvent=Pt;var aE={readContext:le,use:Xu,useCallback:function(e,t){return Ee().memoizedState=[e,t===void 0?null:t],e},useContext:le,useEffect:ny,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Nl(4194308,4,QT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){Nl(4,2,e,t)},useMemo:function(e,t){var n=Ee();t=t===void 0?null:t;var i=e();if(fo){di(!0);try{e()}finally{di(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Ee();if(n!==void 0){var o=n(t);if(fo){di(!0);try{n(t)}finally{di(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=pI.bind(null,nt,e),[i.memoizedState,e]},useRef:function(e){var t=Ee();return e={current:e},t.memoizedState=e},useState:function(e){e=vd(e);var t=e.queue,n=oE.bind(null,nt,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:rp,useDeferredValue:function(e,t){var n=Ee();return ap(n,e,t)},useTransition:function(){var e=vd(!1);return e=jT.bind(null,nt,e.queue,!0,!1),Ee().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=nt,o=Ee();if(lt){if(n===void 0)throw Error(O(407));n=n()}else{if(n=t(),At===null)throw Error(O(349));at&127||PT(i,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,ny(UT.bind(null,i,s,e),[e]),i.flags|=2048,ms(9,{destroy:void 0},kT.bind(null,i,s,n,t),null),n},useId:function(){var e=Ee(),t=At.identifierPrefix;if(lt){var n=vn,i=yn;n=(i&~(1<<32-ze(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ou++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=aI++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:lp,useFormState:jg,useActionState:jg,useOptimistic:function(e){var t=Ee();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=up.bind(null,nt,!0,n),n.dispatch=t,[e,t]},useMemoCache:ip,useCacheRefresh:function(){return Ee().memoizedState=hI.bind(null,nt)},useEffectEvent:function(e){var t=Ee(),n={impl:e};return t.memoizedState=n,function(){if(pt&2)throw Error(O(440));return n.impl.apply(void 0,arguments)}}},cp={readContext:le,use:Xu,useCallback:XT,useContext:le,useEffect:sp,useImperativeHandle:$T,useInsertionEffect:KT,useLayoutEffect:JT,useMemo:WT,useReducer:bl,useRef:zT,useState:function(){return bl(Kn)},useDebugValue:rp,useDeferredValue:function(e,t){var n=Gt();return ZT(n,Et.memoizedState,e,t)},useTransition:function(){var e=bl(Kn)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:va(e),t]},useSyncExternalStore:VT,useId:nE,useHostTransitionStatus:lp,useFormState:ty,useActionState:ty,useOptimistic:function(e,t){var n=Gt();return BT(n,Et,e,t)},useMemoCache:ip,useCacheRefresh:iE};cp.useEffectEvent=YT;var lE={readContext:le,use:Xu,useCallback:XT,useContext:le,useEffect:sp,useImperativeHandle:$T,useInsertionEffect:KT,useLayoutEffect:JT,useMemo:WT,useReducer:df,useRef:zT,useState:function(){return df(Kn)},useDebugValue:rp,useDeferredValue:function(e,t){var n=Gt();return Et===null?ap(n,e,t):ZT(n,Et.memoizedState,e,t)},useTransition:function(){var e=df(Kn)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:va(e),t]},useSyncExternalStore:VT,useId:nE,useHostTransitionStatus:lp,useFormState:ey,useActionState:ey,useOptimistic:function(e,t){var n=Gt();return Et!==null?BT(n,Et,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ip,useCacheRefresh:iE};lE.useEffectEvent=YT;function hf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ed={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ye(),o=Ei(i);o.payload=t,n!=null&&(o.callback=n),t=Si(e,o,i),t!==null&&(De(t,e,i),xr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ye(),o=Ei(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Si(e,o,i),t!==null&&(De(t,e,i),xr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ye(),i=Ei(n);i.tag=2,t!=null&&(i.callback=t),t=Si(e,i,n),t!==null&&(De(t,e,n),xr(t,e,n))}};function iy(e,t,n,i,o,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,r):t.prototype&&t.prototype.isPureReactComponent?!zr(n,i)||!zr(o,s):!0}function oy(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ed.enqueueReplaceState(t,t.state,null)}function ho(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Nt({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function uE(e){Xl(e)}function cE(e){console.error(e)}function fE(e){Xl(e)}function su(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function sy(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Sd(e,t,n){return n=Ei(n),n.tag=3,n.payload={element:null},n.callback=function(){su(e,t)},n}function dE(e){return e=Ei(e),e.tag=3,e}function hE(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=i.value;e.payload=function(){return o(s)},e.callback=function(){sy(t,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){sy(t,n,i),typeof o!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function mI(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ms(t,n,o,!0),n=Qe.current,n!==null){switch(n.tag){case 31:case 13:return on===null?cu():n.alternate===null&&kt===0&&(kt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===tu?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Cf(e,i,o)),!1;case 22:return n.flags|=65536,i===tu?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Cf(e,i,o)),!1}throw Error(O(435,n.tag))}return Cf(e,i,o),cu(),!1}if(lt)return t=Qe.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==ud&&(e=Error(O(422),{cause:i}),Kr(en(e,n)))):(i!==ud&&(t=Error(O(423),{cause:i}),Kr(en(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=en(i,n),o=Sd(e.stateNode,i,o),ff(e,o),kt!==4&&(kt=2)),!1;var s=Error(O(520),{cause:i});if(s=en(s,n),Pr===null?Pr=[s]:Pr.push(s),kt!==4&&(kt=2),t===null)return!0;i=en(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Sd(n.stateNode,i,e),ff(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ai===null||!Ai.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=dE(o),hE(o,e,n,i),ff(n,o),!1}n=n.return}while(n!==null);return!1}var fp=Error(O(461)),Kt=!1;function ie(e,t,n,i){t.child=e===null?IT(t,null,n,i):co(t,e.child,n,i)}function ry(e,t,n,i,o){n=n.render;var s=t.ref;if("ref"in i){var r={};for(var a in i)a!=="ref"&&(r[a]=i[a])}else r=i;return uo(t),i=jh(e,t,n,r,s,o),a=tp(),e!==null&&!Kt?(ep(e,t,o),Jn(e,t,o)):(lt&&a&&Yh(t),t.flags|=1,ie(e,t,i,o),t.child)}function ay(e,t,n,i,o){if(e===null){var s=n.type;return typeof s=="function"&&!zh(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,pE(e,t,s,i,o)):(e=Il(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!dp(e,o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:zr,n(r,i)&&e.ref===t.ref)return Jn(e,t,o)}return t.flags|=1,e=qn(s,i),e.ref=t.ref,e.return=t,t.child=e}function pE(e,t,n,i,o){if(e!==null){var s=e.memoizedProps;if(zr(s,i)&&e.ref===t.ref)if(Kt=!1,t.pendingProps=i=s,dp(e,o))e.flags&131072&&(Kt=!0);else return t.lanes=e.lanes,Jn(e,t,o)}return Ad(e,t,n,i,o)}function mE(e,t,n,i){var o=i.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~s}else i=0,t.child=null;return ly(e,t,s,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&xl(t,s!==null?s.cachePool:null),s!==null?Xg(t,s):gd(),NT(t);else return i=t.lanes=536870912,ly(e,t,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(xl(t,s.cachePool),Xg(t,s),ci(),t.memoizedState=null):(e!==null&&xl(t,null),gd(),ci());return ie(e,t,o,n),t.child}function gr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ly(e,t,n,i,o){var s=Qh();return s=s===null?null:{parent:Yt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&xl(t,null),gd(),NT(t),e!==null&&Ms(e,t,i,!0),t.childLanes=o,null}function Ml(e,t){return t=ru({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uy(e,t,n){return co(t,e.child,null,n),e=Ml(t,t.pendingProps),e.flags|=2,Oe(t),t.memoizedState=null,e}function gI(e,t,n){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(lt){if(i.mode==="hidden")return e=Ml(t,i),t.lanes=536870912,gr(null,e);if(yd(t),(e=xt)?(e=aS(e,nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Mi!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},n=TT(e),n.return=t,t.child=n,re=t,xt=null)):e=null,e===null)throw Di(t);return t.lanes=536870912,null}return Ml(t,i)}var s=e.memoizedState;if(s!==null){var r=s.dehydrated;if(yd(t),o)if(t.flags&256)t.flags&=-257,t=uy(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(O(558));else if(Kt||Ms(e,t,n,!1),o=(n&e.childLanes)!==0,Kt||o){if(i=At,i!==null&&(r=K_(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,To(e,r),De(i,e,r),fp;cu(),t=uy(e,t,n)}else e=s.treeContext,xt=sn(r.nextSibling),re=t,lt=!0,Ti=null,nn=!1,e!==null&&ST(t,e),t=Ml(t,i),t.flags|=4096;return t}return e=qn(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Dl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(O(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ad(e,t,n,i,o){return uo(t),n=jh(e,t,n,i,void 0,o),i=tp(),e!==null&&!Kt?(ep(e,t,o),Jn(e,t,o)):(lt&&i&&Yh(t),t.flags|=1,ie(e,t,n,o),t.child)}function cy(e,t,n,i,o,s){return uo(t),t.updateQueue=null,n=DT(t,i,n,o),MT(e),i=tp(),e!==null&&!Kt?(ep(e,t,s),Jn(e,t,s)):(lt&&i&&Yh(t),t.flags|=1,ie(e,t,n,s),t.child)}function fy(e,t,n,i,o){if(uo(t),t.stateNode===null){var s=Jo,r=n.contextType;typeof r=="object"&&r!==null&&(s=le(r)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ed,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},Xh(t),r=n.contextType,s.context=typeof r=="object"&&r!==null?le(r):Jo,s.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(hf(t,n,r,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&Ed.enqueueReplaceState(s,s.state,null),Nr(t,i,s,o),br(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,u=ho(n,a);s.props=u;var c=s.context,h=n.contextType;r=Jo,typeof h=="object"&&h!==null&&(r=le(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==r)&&oy(t,s,i,r),ai=!1;var p=t.memoizedState;s.state=p,Nr(t,i,s,o),br(),c=t.memoizedState,a||p!==c||ai?(typeof m=="function"&&(hf(t,n,m,i),c=t.memoizedState),(u=ai||iy(t,n,u,i,p,c,r))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=r,i=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,pd(e,t),r=t.memoizedProps,h=ho(n,r),s.props=h,m=t.pendingProps,p=s.context,c=n.contextType,u=Jo,typeof c=="object"&&c!==null&&(u=le(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==m||p!==u)&&oy(t,s,i,u),ai=!1,p=t.memoizedState,s.state=p,Nr(t,i,s,o),br();var v=t.memoizedState;r!==m||p!==v||ai||e!==null&&e.dependencies!==null&&jl(e.dependencies)?(typeof a=="function"&&(hf(t,n,a,i),v=t.memoizedState),(h=ai||iy(t,n,h,i,p,v,u)||e!==null&&e.dependencies!==null&&jl(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,v,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),s.props=i,s.state=v,s.context=u,i=h):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,Dl(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=co(t,e.child,null,o),t.child=co(t,null,n,o)):ie(e,t,n,o),t.memoizedState=s.state,e=t.child):e=Jn(e,t,o),e}function dy(e,t,n,i){return lo(),t.flags|=256,ie(e,t,n,i),t.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(e){return{baseLanes:e,cachePool:CT()}}function gf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ge),e}function gE(e,t,n){var i=t.pendingProps,o=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(Bt.current&2)!==0),r&&(o=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(lt){if(o?ui(t):ci(),(e=xt)?(e=aS(e,nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Mi!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},n=TT(e),n.return=t,t.child=n,re=t,xt=null)):e=null,e===null)throw Di(t);return Ld(e)?t.lanes=32:t.lanes=536870912,null}var a=i.children;return i=i.fallback,o?(ci(),o=t.mode,a=ru({mode:"hidden",children:a},o),i=no(i,o,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,i=t.child,i.memoizedState=mf(n),i.childLanes=gf(e,r,n),t.memoizedState=pf,gr(null,i)):(ui(t),Cd(t,a))}var u=e.memoizedState;if(u!==null&&(a=u.dehydrated,a!==null)){if(s)t.flags&256?(ui(t),t.flags&=-257,t=yf(e,t,n)):t.memoizedState!==null?(ci(),t.child=e.child,t.flags|=128,t=null):(ci(),a=i.fallback,o=t.mode,i=ru({mode:"visible",children:i.children},o),a=no(a,o,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,co(t,e.child,null,n),i=t.child,i.memoizedState=mf(n),i.childLanes=gf(e,r,n),t.memoizedState=pf,t=gr(null,i));else if(ui(t),Ld(a)){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;r=c,i=Error(O(419)),i.stack="",i.digest=r,Kr({value:i,source:null,stack:null}),t=yf(e,t,n)}else if(Kt||Ms(e,t,n,!1),r=(n&e.childLanes)!==0,Kt||r){if(r=At,r!==null&&(i=K_(r,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,To(e,i),De(r,e,i),fp;Ud(a)||cu(),t=yf(e,t,n)}else Ud(a)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,xt=sn(a.nextSibling),re=t,lt=!0,Ti=null,nn=!1,e!==null&&ST(t,e),t=Cd(t,i.children),t.flags|=4096);return t}return o?(ci(),a=i.fallback,o=t.mode,u=e.child,c=u.sibling,i=qn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?a=qn(c,a):(a=no(a,o,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,gr(null,i),i=t.child,a=e.child.memoizedState,a===null?a=mf(n):(o=a.cachePool,o!==null?(u=Yt._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=CT(),a={baseLanes:a.baseLanes|n,cachePool:o}),i.memoizedState=a,i.childLanes=gf(e,r,n),t.memoizedState=pf,gr(e.child,i)):(ui(t),n=e.child,e=n.sibling,n=qn(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Cd(e,t){return t=ru({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ru(e,t){return e=Be(22,e,null,t),e.lanes=0,e}function yf(e,t,n){return co(t,e.child,null,n),e=Cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hy(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fd(e.return,t,n)}function vf(e,t,n,i,o,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o,r.treeForkCount=s)}function yE(e,t,n){var i=t.pendingProps,o=i.revealOrder,s=i.tail;i=i.children;var r=Bt.current,a=(r&2)!==0;if(a?(r=r&1|2,t.flags|=128):r&=1,Ct(Bt,r),ie(e,t,i,n),i=lt?Yr:0,!a&&e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hy(e,n,t);else if(e.tag===19)hy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&nu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),vf(t,!1,o,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&nu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}vf(t,!0,n,null,s,i);break;case"together":vf(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Jn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ms(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,n=qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dp(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&jl(e)))}function yI(e,t,n){switch(t.tag){case 3:Kl(t,t.stateNode.containerInfo),li(t,Yt,e.memoizedState.cache),lo();break;case 27:case 5:Zf(t);break;case 4:Kl(t,t.stateNode.containerInfo);break;case 10:li(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yd(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ui(t),t.flags|=128,null):n&t.child.childLanes?gE(e,t,n):(ui(t),e=Jn(e,t,n),e!==null?e.sibling:null);ui(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ms(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return yE(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ct(Bt,Bt.current),i)break;return null;case 22:return t.lanes=0,mE(e,t,n,t.pendingProps);case 24:li(t,Yt,e.memoizedState.cache)}return Jn(e,t,n)}function vE(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Kt=!0;else{if(!dp(e,n)&&!(t.flags&128))return Kt=!1,yI(e,t,n);Kt=!!(e.flags&131072)}else Kt=!1,lt&&t.flags&1048576&&ET(t,Yr,t.index);switch(t.lanes=0,t.tag){case 16:t:{var i=t.pendingProps;if(e=Xi(t.elementType),t.type=e,typeof e=="function")zh(e)?(i=ho(e,i),t.tag=1,t=fy(null,t,e,i,n)):(t.tag=0,t=Ad(null,t,e,i,n));else{if(e!=null){var o=e.$$typeof;if(o===Nh){t.tag=11,t=ry(null,t,e,i,n);break t}else if(o===Mh){t.tag=14,t=ay(null,t,e,i,n);break t}}throw t=Xf(e)||e,Error(O(306,t,""))}}return t;case 0:return Ad(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=ho(i,t.pendingProps),fy(e,t,i,o,n);case 3:t:{if(Kl(t,t.stateNode.containerInfo),e===null)throw Error(O(387));i=t.pendingProps;var s=t.memoizedState;o=s.element,pd(e,t),Nr(t,i,null,n);var r=t.memoizedState;if(i=r.cache,li(t,Yt,i),i!==s.cache&&dd(t,[Yt],n,!0),br(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=dy(e,t,i,n);break t}else if(i!==o){o=en(Error(O(424)),t),Kr(o),t=dy(e,t,i,n);break t}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(xt=sn(e.firstChild),re=t,lt=!0,Ti=null,nn=!0,n=IT(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(lo(),i===o){t=Jn(e,t,n);break t}ie(e,t,i,n)}t=t.child}return t;case 26:return Dl(e,t),e===null?(n=Vy(t.type,null,t.pendingProps,null))?t.memoizedState=n:lt||(n=t.type,e=t.pendingProps,i=pu(_i.current).createElement(n),i[se]=t,i[Ve]=e,ue(i,n,e),jt(i),t.stateNode=i):t.memoizedState=Vy(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Zf(t),e===null&&lt&&(i=t.stateNode=lS(t.type,t.pendingProps,_i.current),re=t,nn=!0,o=xt,Gi(t.type)?(Od=o,xt=sn(i.firstChild)):xt=o),ie(e,t,t.pendingProps.children,n),Dl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&lt&&((o=i=xt)&&(i=JI(i,t.type,t.pendingProps,nn),i!==null?(t.stateNode=i,re=t,xt=sn(i.firstChild),nn=!1,o=!0):o=!1),o||Di(t)),Zf(t),o=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,i=s.children,Pd(o,s)?i=null:r!==null&&Pd(o,r)&&(t.flags|=32),t.memoizedState!==null&&(o=jh(e,t,lI,null,null,n),Zr._currentValue=o),Dl(e,t),ie(e,t,i,n),t.child;case 6:return e===null&&lt&&((e=n=xt)&&(n=QI(n,t.pendingProps,nn),n!==null?(t.stateNode=n,re=t,xt=null,e=!0):e=!1),e||Di(t)),null;case 13:return gE(e,t,n);case 4:return Kl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=co(t,null,i,n):ie(e,t,i,n),t.child;case 11:return ry(e,t,t.type,t.pendingProps,n);case 7:return ie(e,t,t.pendingProps,n),t.child;case 8:return ie(e,t,t.pendingProps.children,n),t.child;case 12:return ie(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,li(t,t.type,i.value),ie(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,uo(t),o=le(o),i=i(o),t.flags|=1,ie(e,t,i,n),t.child;case 14:return ay(e,t,t.type,t.pendingProps,n);case 15:return pE(e,t,t.type,t.pendingProps,n);case 19:return yE(e,t,n);case 31:return gI(e,t,n);case 22:return mE(e,t,n,t.pendingProps);case 24:return uo(t),i=le(Yt),e===null?(o=Qh(),o===null&&(o=At,s=Jh(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:i,cache:o},Xh(t),li(t,Yt,o)):(e.lanes&n&&(pd(e,t),Nr(t,null,null,n),br()),o=e.memoizedState,s=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),li(t,Yt,i)):(i=s.cache,li(t,Yt,i),i!==o.cache&&dd(t,[Yt],n,!0))),ie(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(O(156,t.tag))}function Dn(e){e.flags|=4}function _f(e,t,n,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(FE())e.flags|=8192;else throw oo=tu,$h}else e.flags&=-16777217}function py(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!fS(t))if(FE())e.flags|=8192;else throw oo=tu,$h}function ol(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?H_():536870912,e.lanes|=t,gs|=t)}function rr(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function It(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function vI(e,t,n){var i=t.pendingProps;switch(Kh(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(t),null;case 1:return It(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Fn(Yt),cs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(No(t)?Dn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cf())),It(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(Dn(t),s!==null?(It(t),py(t,s)):(It(t),_f(t,o,null,i,n))):s?s!==e.memoizedState?(Dn(t),It(t),py(t,s)):(It(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&Dn(t),It(t),_f(t,o,e,i,n)),null;case 27:if(Jl(t),n=_i.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Dn(t);else{if(!i){if(t.stateNode===null)throw Error(O(166));return It(t),null}e=Tn.current,No(t)?Hg(t):(e=lS(o,i,n),t.stateNode=e,Dn(t))}return It(t),null;case 5:if(Jl(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Dn(t);else{if(!i){if(t.stateNode===null)throw Error(O(166));return It(t),null}if(s=Tn.current,No(t))Hg(t);else{var r=pu(_i.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(o,{is:i.is}):r.createElement(o)}}s[se]=t,s[Ve]=i;t:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;t:switch(ue(s,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Dn(t)}}return It(t),_f(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Dn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(O(166));if(e=_i.current,No(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=re,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[se]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||oS(e.nodeValue,n)),e||Di(t,!0)}else e=pu(e).createTextNode(i),e[se]=t,t.stateNode=e}return It(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=No(t),n!==null){if(e===null){if(!i)throw Error(O(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(557));e[se]=t}else lo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;It(t),e=!1}else n=cf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Oe(t),t):(Oe(t),null);if(t.flags&128)throw Error(O(558))}return It(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=No(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(O(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[se]=t}else lo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;It(t),o=!1}else o=cf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Oe(t),t):(Oe(t),null)}return Oe(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ol(t,t.updateQueue),It(t),null);case 4:return cs(),e===null&&_p(t.stateNode.containerInfo),It(t),null;case 10:return Fn(t.type),It(t),null;case 19:if(te(Bt),i=t.memoizedState,i===null)return It(t),null;if(o=(t.flags&128)!==0,s=i.rendering,s===null)if(o)rr(i,!1);else{if(kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=nu(e),s!==null){for(t.flags|=128,rr(i,!1),e=s.updateQueue,t.updateQueue=e,ol(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)_T(n,e),n=n.sibling;return Ct(Bt,Bt.current&1|2),lt&&Un(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Fe()>lu&&(t.flags|=128,o=!0,rr(i,!1),t.lanes=4194304)}else{if(!o)if(e=nu(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,ol(t,e),rr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!lt)return It(t),null}else 2*Fe()-i.renderingStartTime>lu&&n!==536870912&&(t.flags|=128,o=!0,rr(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(e=i.last,e!==null?e.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Bt.current,Ct(Bt,o?n&1|2:n&1),lt&&Un(t,i.treeForkCount),e):(It(t),null);case 22:case 23:return Oe(t),Wh(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(It(t),t.subtreeFlags&6&&(t.flags|=8192)):It(t),n=t.updateQueue,n!==null&&ol(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&te(io),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Fn(Yt),It(t),null;case 25:return null;case 30:return null}throw Error(O(156,t.tag))}function _I(e,t){switch(Kh(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fn(Yt),cs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Jl(t),null;case 31:if(t.memoizedState!==null){if(Oe(t),t.alternate===null)throw Error(O(340));lo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Oe(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));lo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return te(Bt),null;case 4:return cs(),null;case 10:return Fn(t.type),null;case 22:case 23:return Oe(t),Wh(),e!==null&&te(io),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Fn(Yt),null;case 25:return null;default:return null}}function _E(e,t){switch(Kh(t),t.tag){case 3:Fn(Yt),cs();break;case 26:case 27:case 5:Jl(t);break;case 4:cs();break;case 31:t.memoizedState!==null&&Oe(t);break;case 13:Oe(t);break;case 19:te(Bt);break;case 10:Fn(t.type);break;case 22:case 23:Oe(t),Wh(),e!==null&&te(io);break;case 24:Fn(Yt)}}function _a(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==o)}}catch(a){vt(t,t.return,a)}}function Vi(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&e)===e){var r=i.inst,a=r.destroy;if(a!==void 0){r.destroy=void 0,o=t;var u=n,c=a;try{c()}catch(h){vt(o,u,h)}}}i=i.next}while(i!==s)}}catch(h){vt(t,t.return,h)}}function TE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{bT(t,n)}catch(i){vt(e,e.return,i)}}}function EE(e,t,n){n.props=ho(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){vt(e,t,i)}}function Dr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){vt(e,t,o)}}function _n(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){vt(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){vt(e,t,o)}else n.current=null}function SE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break t;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){vt(e,e.return,o)}}function Tf(e,t,n){try{var i=e.stateNode;qI(i,e.type,n,t),i[Ve]=t}catch(o){vt(e,e.return,o)}}function AE(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Gi(e.type)||e.tag===4}function Ef(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||AE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Gi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bn));else if(i!==4&&(i===27&&Gi(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(wd(e,t,n),e=e.sibling;e!==null;)wd(e,t,n),e=e.sibling}function au(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&Gi(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(au(e,t,n),e=e.sibling;e!==null;)au(e,t,n),e=e.sibling}function CE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ue(t,i,n),t[se]=e,t[Ve]=n}catch(s){vt(e,e.return,s)}}var Ln=!1,zt=!1,Sf=!1,my=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function TI(e,t){if(e=e.containerInfo,Dd=vu,e=fT(e),qh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break t}var r=0,a=-1,u=-1,c=0,h=0,m=e,p=null;e:for(;;){for(var v;m!==n||o!==0&&m.nodeType!==3||(a=r+o),m!==s||i!==0&&m.nodeType!==3||(u=r+i),m.nodeType===3&&(r+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===e)break e;if(p===n&&++c===o&&(a=r),p===s&&++h===i&&(u=r),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:e,selectionRange:n},vu=!1,Zt=t;Zt!==null;)if(t=Zt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Zt=e;else for(;Zt!==null;){switch(t=Zt,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=ho(n.type,o);e=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(b){vt(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)kd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(O(163))}if(e=t.sibling,e!==null){e.return=t.return,Zt=e;break}Zt=t.return}}function wE(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Pn(e,n),i&4&&_a(5,n);break;case 1:if(Pn(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){vt(n,n.return,r)}else{var o=ho(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){vt(n,n.return,r)}}i&64&&TE(n),i&512&&Dr(n,n.return);break;case 3:if(Pn(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{bT(e,t)}catch(r){vt(n,n.return,r)}}break;case 27:t===null&&i&4&&CE(n);case 26:case 5:Pn(e,n),t===null&&i&4&&SE(n),i&512&&Dr(n,n.return);break;case 12:Pn(e,n);break;case 31:Pn(e,n),i&4&&xE(e,n);break;case 13:Pn(e,n),i&4&&bE(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=bI.bind(null,n),$I(e,n))));break;case 22:if(i=n.memoizedState!==null||Ln,!i){t=t!==null&&t.memoizedState!==null||zt,o=Ln;var s=zt;Ln=i,(zt=t)&&!s?kn(e,n,(n.subtreeFlags&8772)!==0):Pn(e,n),Ln=o,zt=s}break;case 30:break;default:Pn(e,n)}}function RE(e){var t=e.alternate;t!==null&&(e.alternate=null,RE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&kh(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Mt=null,be=!1;function Vn(e,t,n){for(n=n.child;n!==null;)IE(e,t,n),n=n.sibling}function IE(e,t,n){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(da,n)}catch{}switch(n.tag){case 26:zt||_n(n,t),Vn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:zt||_n(n,t);var i=Mt,o=be;Gi(n.type)&&(Mt=n.stateNode,be=!1),Vn(e,t,n),Ur(n.stateNode),Mt=i,be=o;break;case 5:zt||_n(n,t);case 6:if(i=Mt,o=be,Mt=null,Vn(e,t,n),Mt=i,be=o,Mt!==null)if(be)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(n.stateNode)}catch(s){vt(n,t,s)}else try{Mt.removeChild(n.stateNode)}catch(s){vt(n,t,s)}break;case 18:Mt!==null&&(be?(e=Mt,xy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ts(e)):xy(Mt,n.stateNode));break;case 4:i=Mt,o=be,Mt=n.stateNode.containerInfo,be=!0,Vn(e,t,n),Mt=i,be=o;break;case 0:case 11:case 14:case 15:Vi(2,n,t),zt||Vi(4,n,t),Vn(e,t,n);break;case 1:zt||(_n(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&EE(n,t,i)),Vn(e,t,n);break;case 21:Vn(e,t,n);break;case 22:zt=(i=zt)||n.memoizedState!==null,Vn(e,t,n),zt=i;break;default:Vn(e,t,n)}}function xE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ts(e)}catch(n){vt(t,t.return,n)}}}function bE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ts(e)}catch(n){vt(t,t.return,n)}}function EI(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new my),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new my),t;default:throw Error(O(435,e.tag))}}function sl(e,t){var n=EI(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var o=NI.bind(null,e,i);i.then(o,o)}})}function Re(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],s=e,r=t,a=r;t:for(;a!==null;){switch(a.tag){case 27:if(Gi(a.type)){Mt=a.stateNode,be=!1;break t}break;case 5:Mt=a.stateNode,be=!1;break t;case 3:case 4:Mt=a.stateNode.containerInfo,be=!0;break t}a=a.return}if(Mt===null)throw Error(O(160));IE(s,r,o),Mt=null,be=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)NE(t,e),t=t.sibling}var fn=null;function NE(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Re(t,e),Ie(e),i&4&&(Vi(3,e,e.return),_a(3,e),Vi(5,e,e.return));break;case 1:Re(t,e),Ie(e),i&512&&(zt||n===null||_n(n,n.return)),i&64&&Ln&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=fn;if(Re(t,e),Ie(e),i&512&&(zt||n===null||_n(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){t:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;e:switch(i){case"title":s=o.getElementsByTagName("title")[0],(!s||s[ma]||s[se]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),ue(s,i,n),s[se]=e,jt(s),i=s;break t;case"link":var r=ky("link","href",o).get(i+(n.href||""));if(r){for(var a=0;a<r.length;a++)if(s=r[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(a,1);break e}}s=o.createElement(i),ue(s,i,n),o.head.appendChild(s);break;case"meta":if(r=ky("meta","content",o).get(i+(n.content||""))){for(a=0;a<r.length;a++)if(s=r[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(a,1);break e}}s=o.createElement(i),ue(s,i,n),o.head.appendChild(s);break;default:throw Error(O(468,i))}s[se]=e,jt(s),i=s}e.stateNode=i}else Uy(o,e.type,e.stateNode);else e.stateNode=Py(o,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Uy(o,e.type,e.stateNode):Py(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&Tf(e,e.memoizedProps,n.memoizedProps)}break;case 27:Re(t,e),Ie(e),i&512&&(zt||n===null||_n(n,n.return)),n!==null&&i&4&&Tf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Re(t,e),Ie(e),i&512&&(zt||n===null||_n(n,n.return)),e.flags&32){o=e.stateNode;try{ds(o,"")}catch(x){vt(e,e.return,x)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,Tf(e,o,n!==null?n.memoizedProps:o)),i&1024&&(Sf=!0);break;case 6:if(Re(t,e),Ie(e),i&4){if(e.stateNode===null)throw Error(O(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(x){vt(e,e.return,x)}}break;case 3:if(kl=null,o=fn,fn=mu(t.containerInfo),Re(t,e),fn=o,Ie(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(t.containerInfo)}catch(x){vt(e,e.return,x)}Sf&&(Sf=!1,ME(e));break;case 4:i=fn,fn=mu(e.stateNode.containerInfo),Re(t,e),Ie(e),fn=i;break;case 12:Re(t,e),Ie(e);break;case 31:Re(t,e),Ie(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sl(e,i)));break;case 13:Re(t,e),Ie(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ju=Fe()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sl(e,i)));break;case 22:o=e.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Ln,h=zt;if(Ln=c||o,zt=h||u,Re(t,e),zt=h,Ln=c,Ie(e),i&8192)t:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||u||Ln||zt||Wi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){u=n=t;try{if(s=u.stateNode,o)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{a=u.stateNode;var m=u.memoizedProps.style,p=m!=null&&m.hasOwnProperty("display")?m.display:null;a.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(x){vt(u,u.return,x)}}}else if(t.tag===6){if(n===null){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(x){vt(u,u.return,x)}}}else if(t.tag===18){if(n===null){u=t;try{var v=u.stateNode;o?by(v,!0):by(u.stateNode,!1)}catch(x){vt(u,u.return,x)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,sl(e,n))));break;case 19:Re(t,e),Ie(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sl(e,i)));break;case 30:break;case 21:break;default:Re(t,e),Ie(e)}}function Ie(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(AE(i)){n=i;break}i=i.return}if(n==null)throw Error(O(160));switch(n.tag){case 27:var o=n.stateNode,s=Ef(e);au(e,s,o);break;case 5:var r=n.stateNode;n.flags&32&&(ds(r,""),n.flags&=-33);var a=Ef(e);au(e,a,r);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Ef(e);wd(e,c,u);break;default:throw Error(O(161))}}catch(h){vt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ME(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ME(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wE(e,t.alternate,t),t=t.sibling}function Wi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Vi(4,t,t.return),Wi(t);break;case 1:_n(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&EE(t,t.return,n),Wi(t);break;case 27:Ur(t.stateNode);case 26:case 5:_n(t,t.return),Wi(t);break;case 22:t.memoizedState===null&&Wi(t);break;case 30:Wi(t);break;default:Wi(t)}e=e.sibling}}function kn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:kn(o,s,n),_a(4,s);break;case 1:if(kn(o,s,n),i=s,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){vt(i,i.return,c)}if(i=s,o=i.updateQueue,o!==null){var a=i.stateNode;try{var u=o.shared.hiddenCallbacks;if(u!==null)for(o.shared.hiddenCallbacks=null,o=0;o<u.length;o++)xT(u[o],a)}catch(c){vt(i,i.return,c)}}n&&r&64&&TE(s),Dr(s,s.return);break;case 27:CE(s);case 26:case 5:kn(o,s,n),n&&i===null&&r&4&&SE(s),Dr(s,s.return);break;case 12:kn(o,s,n);break;case 31:kn(o,s,n),n&&r&4&&xE(o,s);break;case 13:kn(o,s,n),n&&r&4&&bE(o,s);break;case 22:s.memoizedState===null&&kn(o,s,n),Dr(s,s.return);break;case 30:break;default:kn(o,s,n)}t=t.sibling}}function hp(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ya(n))}function pp(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ya(e))}function cn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)DE(e,t,n,i),t=t.sibling}function DE(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:cn(e,t,n,i),o&2048&&_a(9,t);break;case 1:cn(e,t,n,i);break;case 3:cn(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ya(e)));break;case 12:if(o&2048){cn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,a=s.onPostCommit;typeof a=="function"&&a(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(u){vt(t,t.return,u)}}else cn(e,t,n,i);break;case 31:cn(e,t,n,i);break;case 13:cn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?cn(e,t,n,i):Vr(e,t):s._visibility&2?cn(e,t,n,i):(s._visibility|=2,Vo(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&hp(r,t);break;case 24:cn(e,t,n,i),o&2048&&pp(t.alternate,t);break;default:cn(e,t,n,i)}}function Vo(e,t,n,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,r=t,a=n,u=i,c=r.flags;switch(r.tag){case 0:case 11:case 15:Vo(s,r,a,u,o),_a(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?Vo(s,r,a,u,o):Vr(s,r):(h._visibility|=2,Vo(s,r,a,u,o)),o&&c&2048&&hp(r.alternate,r);break;case 24:Vo(s,r,a,u,o),o&&c&2048&&pp(r.alternate,r);break;default:Vo(s,r,a,u,o)}t=t.sibling}}function Vr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:Vr(n,i),o&2048&&hp(i.alternate,i);break;case 24:Vr(n,i),o&2048&&pp(i.alternate,i);break;default:Vr(n,i)}t=t.sibling}}var yr=8192;function Mo(e,t,n){if(e.subtreeFlags&yr)for(e=e.child;e!==null;)VE(e,t,n),e=e.sibling}function VE(e,t,n){switch(e.tag){case 26:Mo(e,t,n),e.flags&yr&&e.memoizedState!==null&&ax(n,fn,e.memoizedState,e.memoizedProps);break;case 5:Mo(e,t,n);break;case 3:case 4:var i=fn;fn=mu(e.stateNode.containerInfo),Mo(e,t,n),fn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=yr,yr=16777216,Mo(e,t,n),yr=i):Mo(e,t,n));break;default:Mo(e,t,n)}}function PE(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ar(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Zt=i,UE(i,e)}PE(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kE(e),e=e.sibling}function kE(e){switch(e.tag){case 0:case 11:case 15:ar(e),e.flags&2048&&Vi(9,e,e.return);break;case 3:ar(e);break;case 12:ar(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vl(e)):ar(e);break;default:ar(e)}}function Vl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Zt=i,UE(i,e)}PE(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Vi(8,t,t.return),Vl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Vl(t));break;default:Vl(t)}e=e.sibling}}function UE(e,t){for(;Zt!==null;){var n=Zt;switch(n.tag){case 0:case 11:case 15:Vi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:ya(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Zt=i;else t:for(n=e;Zt!==null;){i=Zt;var o=i.sibling,s=i.return;if(RE(i),i===n){Zt=null;break t}if(o!==null){o.return=s,Zt=o;break t}Zt=s}}}var SI={getCacheForType:function(e){var t=le(Yt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return le(Yt).controller.signal}},AI=typeof WeakMap=="function"?WeakMap:Map,pt=0,At=null,ot=null,at=0,yt=0,Le=null,pi=!1,Vs=!1,mp=!1,Qn=0,kt=0,Pi=0,so=0,gp=0,Ge=0,gs=0,Pr=null,Ne=null,Rd=!1,ju=0,LE=0,lu=1/0,uu=null,Ai=null,Jt=0,Ci=null,ys=null,Hn=0,Id=0,xd=null,OE=null,kr=0,bd=null;function Ye(){return pt&2&&at!==0?at&-at:Q.T!==null?vp():J_()}function BE(){if(Ge===0)if(!(at&536870912)||lt){var e=Wa;Wa<<=1,!(Wa&3932160)&&(Wa=262144),Ge=e}else Ge=536870912;return e=Qe.current,e!==null&&(e.flags|=32),Ge}function De(e,t,n){(e===At&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(vs(e,0),mi(e,at,Ge,!1)),pa(e,n),(!(pt&2)||e!==At)&&(e===At&&(!(pt&2)&&(so|=n),kt===4&&mi(e,at,Ge,!1)),In(e))}function GE(e,t,n){if(pt&6)throw Error(O(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ha(e,t),o=i?RI(e,t):Af(e,t,!0),s=i;do{if(o===0){Vs&&!i&&mi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!CI(n)){o=Af(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var a=e;o=Pr;var u=a.current.memoizedState.isDehydrated;if(u&&(vs(a,r).flags|=256),r=Af(a,r,!1),r!==2){if(mp&&!u){a.errorRecoveryDisabledLanes|=s,so|=s,o=4;break t}s=Ne,Ne=o,s!==null&&(Ne===null?Ne=s:Ne.push.apply(Ne,s))}o=r}if(s=!1,o!==2)continue}}if(o===1){vs(e,0),mi(e,t,0,!0);break}t:{switch(i=e,s=o,s){case 0:case 1:throw Error(O(345));case 4:if((t&4194048)!==t)break;case 6:mi(i,t,Ge,!pi);break t;case 2:Ne=null;break;case 3:case 5:break;default:throw Error(O(329))}if((t&62914560)===t&&(o=ju+300-Fe(),10<o)){if(mi(i,t,Ge,!pi),Fu(i,0,!0)!==0)break t;Hn=t,i.timeoutHandle=rS(gy.bind(null,i,n,Ne,uu,Rd,t,Ge,so,gs,pi,s,"Throttled",-0,0),o);break t}gy(i,n,Ne,uu,Rd,t,Ge,so,gs,pi,s,null,-0,0)}}break}while(!0);In(e)}function gy(e,t,n,i,o,s,r,a,u,c,h,m,p,v){if(e.timeoutHandle=-1,m=t.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bn},VE(t,s,m);var x=(s&62914560)===s?ju-Fe():(s&4194048)===s?LE-Fe():0;if(x=lx(m,x),x!==null){Hn=s,e.cancelPendingCommit=x(vy.bind(null,e,t,s,n,i,o,r,a,u,h,m,null,p,v)),mi(e,s,r,!c);return}}vy(e,t,s,n,i,o,r,a,u)}function CI(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!Je(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mi(e,t,n,i){t&=~gp,t&=~so,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var s=31-ze(o),r=1<<s;i[s]=-1,o&=~r}n!==0&&z_(e,n,t)}function tc(){return pt&6?!0:(Ta(0),!1)}function yp(){if(ot!==null){if(yt===0)var e=ot.return;else e=ot,Gn=Eo=null,np(e),is=null,Jr=0,e=ot;for(;e!==null;)_E(e.alternate,e),e=e.return;ot=null}}function vs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,zI(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Hn=0,yp(),At=e,ot=n=qn(e.current,null),at=t,yt=0,Le=null,pi=!1,Vs=ha(e,t),mp=!1,gs=Ge=gp=so=Pi=kt=0,Ne=Pr=null,Rd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-ze(i),s=1<<o;t|=e[o],i&=~s}return Qn=t,Ku(),n}function qE(e,t){nt=null,Q.H=$r,t===Ds||t===Qu?(t=Qg(),yt=3):t===$h?(t=Qg(),yt=4):yt=t===fp?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Le=t,ot===null&&(kt=1,su(e,en(t,e.current)))}function FE(){var e=Qe.current;return e===null?!0:(at&4194048)===at?on===null:(at&62914560)===at||at&536870912?e===on:!1}function HE(){var e=Q.H;return Q.H=$r,e===null?$r:e}function zE(){var e=Q.A;return Q.A=SI,e}function cu(){kt=4,pi||(at&4194048)!==at&&Qe.current!==null||(Vs=!0),!(Pi&134217727)&&!(so&134217727)||At===null||mi(At,at,Ge,!1)}function Af(e,t,n){var i=pt;pt|=2;var o=HE(),s=zE();(At!==e||at!==t)&&(uu=null,vs(e,t)),t=!1;var r=kt;t:do try{if(yt!==0&&ot!==null){var a=ot,u=Le;switch(yt){case 8:yp(),r=6;break t;case 3:case 2:case 9:case 6:Qe.current===null&&(t=!0);var c=yt;if(yt=0,Le=null,Xo(e,a,u,c),n&&Vs){r=0;break t}break;default:c=yt,yt=0,Le=null,Xo(e,a,u,c)}}wI(),r=kt;break}catch(h){qE(e,h)}while(!0);return t&&e.shellSuspendCounter++,Gn=Eo=null,pt=i,Q.H=o,Q.A=s,ot===null&&(At=null,at=0,Ku()),r}function wI(){for(;ot!==null;)YE(ot)}function RI(e,t){var n=pt;pt|=2;var i=HE(),o=zE();At!==e||at!==t?(uu=null,lu=Fe()+500,vs(e,t)):Vs=ha(e,t);t:do try{if(yt!==0&&ot!==null){t=ot;var s=Le;e:switch(yt){case 1:yt=0,Le=null,Xo(e,t,s,1);break;case 2:case 9:if(Jg(s)){yt=0,Le=null,yy(t);break}t=function(){yt!==2&&yt!==9||At!==e||(yt=7),In(e)},s.then(t,t);break t;case 3:yt=7;break t;case 4:yt=5;break t;case 7:Jg(s)?(yt=0,Le=null,yy(t)):(yt=0,Le=null,Xo(e,t,s,7));break;case 5:var r=null;switch(ot.tag){case 26:r=ot.memoizedState;case 5:case 27:var a=ot;if(r?fS(r):a.stateNode.complete){yt=0,Le=null;var u=a.sibling;if(u!==null)ot=u;else{var c=a.return;c!==null?(ot=c,ec(c)):ot=null}break e}}yt=0,Le=null,Xo(e,t,s,5);break;case 6:yt=0,Le=null,Xo(e,t,s,6);break;case 8:yp(),kt=6;break t;default:throw Error(O(462))}}II();break}catch(h){qE(e,h)}while(!0);return Gn=Eo=null,Q.H=i,Q.A=o,pt=n,ot!==null?0:(At=null,at=0,Ku(),kt)}function II(){for(;ot!==null&&!Xw();)YE(ot)}function YE(e){var t=vE(e.alternate,e,Qn);e.memoizedProps=e.pendingProps,t===null?ec(e):ot=t}function yy(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=cy(n,t,t.pendingProps,t.type,void 0,at);break;case 11:t=cy(n,t,t.pendingProps,t.type.render,t.ref,at);break;case 5:np(t);default:_E(n,t),t=ot=_T(t,Qn),t=vE(n,t,Qn)}e.memoizedProps=e.pendingProps,t===null?ec(e):ot=t}function Xo(e,t,n,i){Gn=Eo=null,np(t),is=null,Jr=0;var o=t.return;try{if(mI(e,o,t,n,at)){kt=1,su(e,en(n,e.current)),ot=null;return}}catch(s){if(o!==null)throw ot=o,s;kt=1,su(e,en(n,e.current)),ot=null;return}t.flags&32768?(lt||i===1?e=!0:Vs||at&536870912?e=!1:(pi=e=!0,(i===2||i===9||i===3||i===6)&&(i=Qe.current,i!==null&&i.tag===13&&(i.flags|=16384))),KE(t,e)):ec(t)}function ec(e){var t=e;do{if(t.flags&32768){KE(t,pi);return}e=t.return;var n=vI(t.alternate,t,Qn);if(n!==null){ot=n;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);kt===0&&(kt=5)}function KE(e,t){do{var n=_I(e.alternate,e);if(n!==null){n.flags&=32767,ot=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ot=e;return}ot=e=n}while(e!==null);kt=6,ot=null}function vy(e,t,n,i,o,s,r,a,u){e.cancelPendingCommit=null;do nc();while(Jt!==0);if(pt&6)throw Error(O(327));if(t!==null){if(t===e.current)throw Error(O(177));if(s=t.lanes|t.childLanes,s|=Fh,rR(e,n,s,r,a,u),e===At&&(ot=At=null,at=0),ys=t,Ci=e,Hn=n,Id=s,xd=o,OE=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,MI(Ql,function(){return WE(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Q.T,Q.T=null,o=mt.p,mt.p=2,r=pt,pt|=4;try{TI(e,t,n)}finally{pt=r,mt.p=o,Q.T=i}}Jt=1,JE(),QE(),$E()}}function JE(){if(Jt===1){Jt=0;var e=Ci,t=ys,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Q.T,Q.T=null;var i=mt.p;mt.p=2;var o=pt;pt|=4;try{NE(t,e);var s=Vd,r=fT(e.containerInfo),a=s.focusedElem,u=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&cT(a.ownerDocument.documentElement,a)){if(u!==null&&qh(a)){var c=u.start,h=u.end;if(h===void 0&&(h=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(h,a.value.length);else{var m=a.ownerDocument||document,p=m&&m.defaultView||window;if(p.getSelection){var v=p.getSelection(),x=a.textContent.length,b=Math.min(u.start,x),D=u.end===void 0?b:Math.min(u.end,x);!v.extend&&b>D&&(r=D,D=b,b=r);var E=Gg(a,b),_=Gg(a,D);if(E&&_&&(v.rangeCount!==1||v.anchorNode!==E.node||v.anchorOffset!==E.offset||v.focusNode!==_.node||v.focusOffset!==_.offset)){var C=m.createRange();C.setStart(E.node,E.offset),v.removeAllRanges(),b>D?(v.addRange(C),v.extend(_.node,_.offset)):(C.setEnd(_.node,_.offset),v.addRange(C))}}}}for(m=[],v=a;v=v.parentNode;)v.nodeType===1&&m.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<m.length;a++){var V=m[a];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}vu=!!Dd,Vd=Dd=null}finally{pt=o,mt.p=i,Q.T=n}}e.current=t,Jt=2}}function QE(){if(Jt===2){Jt=0;var e=Ci,t=ys,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Q.T,Q.T=null;var i=mt.p;mt.p=2;var o=pt;pt|=4;try{wE(e,t.alternate,t)}finally{pt=o,mt.p=i,Q.T=n}}Jt=3}}function $E(){if(Jt===4||Jt===3){Jt=0,Ww();var e=Ci,t=ys,n=Hn,i=OE;t.subtreeFlags&10256||t.flags&10256?Jt=5:(Jt=0,ys=Ci=null,XE(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Ai=null),Ph(n),t=t.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(da,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Q.T,o=mt.p,mt.p=2,Q.T=null;try{for(var s=e.onRecoverableError,r=0;r<i.length;r++){var a=i[r];s(a.value,{componentStack:a.stack})}}finally{Q.T=t,mt.p=o}}Hn&3&&nc(),In(e),o=e.pendingLanes,n&261930&&o&42?e===bd?kr++:(kr=0,bd=e):kr=0,Ta(0)}}function XE(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ya(t)))}function nc(){return JE(),QE(),$E(),WE()}function WE(){if(Jt!==5)return!1;var e=Ci,t=Id;Id=0;var n=Ph(Hn),i=Q.T,o=mt.p;try{mt.p=32>n?32:n,Q.T=null,n=xd,xd=null;var s=Ci,r=Hn;if(Jt=0,ys=Ci=null,Hn=0,pt&6)throw Error(O(331));var a=pt;if(pt|=4,kE(s.current),DE(s,s.current,r,n),pt=a,Ta(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(da,s)}catch{}return!0}finally{mt.p=o,Q.T=i,XE(e,t)}}function _y(e,t,n){t=en(n,t),t=Sd(e.stateNode,t,2),e=Si(e,t,2),e!==null&&(pa(e,2),In(e))}function vt(e,t,n){if(e.tag===3)_y(e,e,n);else for(;t!==null;){if(t.tag===3){_y(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ai===null||!Ai.has(i))){e=en(n,e),n=dE(2),i=Si(t,n,2),i!==null&&(hE(n,i,t,e),pa(i,2),In(i));break}}t=t.return}}function Cf(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new AI;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(mp=!0,o.add(n),e=xI.bind(null,e,t,n),t.then(e,e))}function xI(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,At===e&&(at&n)===n&&(kt===4||kt===3&&(at&62914560)===at&&300>Fe()-ju?!(pt&2)&&vs(e,0):gp|=n,gs===at&&(gs=0)),In(e)}function ZE(e,t){t===0&&(t=H_()),e=To(e,t),e!==null&&(pa(e,t),In(e))}function bI(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ZE(e,n)}function NI(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(O(314))}i!==null&&i.delete(t),ZE(e,n)}function MI(e,t){return Dh(e,t)}var fu=null,Po=null,Nd=!1,du=!1,wf=!1,gi=0;function In(e){e!==Po&&e.next===null&&(Po===null?fu=Po=e:Po=Po.next=e),du=!0,Nd||(Nd=!0,VI())}function Ta(e,t){if(!wf&&du){wf=!0;do for(var n=!1,i=fu;i!==null;){if(e!==0){var o=i.pendingLanes;if(o===0)var s=0;else{var r=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-ze(42|e)+1)-1,s&=o&~(r&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Ty(i,s))}else s=at,s=Fu(i,i===At?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||ha(i,s)||(n=!0,Ty(i,s));i=i.next}while(n);wf=!1}}function DI(){jE()}function jE(){du=Nd=!1;var e=0;gi!==0&&HI()&&(e=gi);for(var t=Fe(),n=null,i=fu;i!==null;){var o=i.next,s=tS(i,t);s===0?(i.next=null,n===null?fu=o:n.next=o,o===null&&(Po=n)):(n=i,(e!==0||s&3)&&(du=!0)),i=o}Jt!==0&&Jt!==5||Ta(e),gi!==0&&(gi=0)}function tS(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-ze(s),a=1<<r,u=o[r];u===-1?(!(a&n)||a&i)&&(o[r]=sR(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}if(t=At,n=at,n=Fu(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Zc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ha(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Zc(i),Ph(n)){case 2:case 8:n=q_;break;case 32:n=Ql;break;case 268435456:n=F_;break;default:n=Ql}return i=eS.bind(null,e),n=Dh(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Zc(i),e.callbackPriority=2,e.callbackNode=null,2}function eS(e,t){if(Jt!==0&&Jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(nc()&&e.callbackNode!==n)return null;var i=at;return i=Fu(e,e===At?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(GE(e,i,t),tS(e,Fe()),e.callbackNode!=null&&e.callbackNode===n?eS.bind(null,e):null)}function Ty(e,t){if(nc())return null;GE(e,t,!0)}function VI(){YI(function(){pt&6?Dh(G_,DI):jE()})}function vp(){if(gi===0){var e=hs;e===0&&(e=Xa,Xa<<=1,!(Xa&261888)&&(Xa=256)),gi=e}return gi}function Ey(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Cl(""+e)}function Sy(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function PI(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var s=Ey((o[Ve]||null).action),r=i.submitter;r&&(t=(t=r[Ve]||null)?Ey(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var a=new Hu("action","action",null,i,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(gi!==0){var u=r?Sy(o,r):new FormData(o);Td(n,{pending:!0,data:u,method:o.method,action:s},null,u)}}else typeof s=="function"&&(a.preventDefault(),u=r?Sy(o,r):new FormData(o),Td(n,{pending:!0,data:u,method:o.method,action:s},s,u))},currentTarget:o}]})}}for(var Rf=0;Rf<ld.length;Rf++){var If=ld[Rf],kI=If.toLowerCase(),UI=If[0].toUpperCase()+If.slice(1);pn(kI,"on"+UI)}pn(hT,"onAnimationEnd");pn(pT,"onAnimationIteration");pn(mT,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(ZR,"onTransitionRun");pn(jR,"onTransitionStart");pn(tI,"onTransitionCancel");pn(gT,"onTransitionEnd");fs("onMouseEnter",["mouseout","mouseover"]);fs("onMouseLeave",["mouseout","mouseover"]);fs("onPointerEnter",["pointerout","pointerover"]);fs("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xr));function nS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var r=i.length-1;0<=r;r--){var a=i[r],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&o.isPropagationStopped())break t;s=a,o.currentTarget=c;try{s(o)}catch(h){Xl(h)}o.currentTarget=null,s=u}else for(r=0;r<i.length;r++){if(a=i[r],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&o.isPropagationStopped())break t;s=a,o.currentTarget=c;try{s(o)}catch(h){Xl(h)}o.currentTarget=null,s=u}}}}function it(e,t){var n=t[td];n===void 0&&(n=t[td]=new Set);var i=e+"__bubble";n.has(i)||(iS(t,e,2,!1),n.add(i))}function xf(e,t,n){var i=0;t&&(i|=4),iS(n,e,i,t)}var rl="_reactListening"+Math.random().toString(36).slice(2);function _p(e){if(!e[rl]){e[rl]=!0,Q_.forEach(function(n){n!=="selectionchange"&&(LI.has(n)||xf(n,!1,e),xf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rl]||(t[rl]=!0,xf("selectionchange",!1,t))}}function iS(e,t,n,i){switch(gS(t)){case 2:var o=fx;break;case 8:o=dx;break;default:o=Ap}n=o.bind(null,t,n,e),o=void 0,!sd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function bf(e,t,n,i,o){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===o)break;if(r===4)for(r=i.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;a!==null;){if(r=qo(a),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){i=s=r;continue t}a=a.parentNode}}i=i.return}nT(function(){var c=s,h=Lh(n),m=[];t:{var p=yT.get(e);if(p!==void 0){var v=Hu,x=e;switch(e){case"keypress":if(Rl(n)===0)break t;case"keydown":case"keyup":v=NR;break;case"focusin":x="focus",v=of;break;case"focusout":x="blur",v=of;break;case"beforeblur":case"afterblur":v=of;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Ng;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=vR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=VR;break;case hT:case pT:case mT:v=ER;break;case gT:v=kR;break;case"scroll":case"scrollend":v=gR;break;case"wheel":v=LR;break;case"copy":case"cut":case"paste":v=AR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Dg;break;case"toggle":case"beforetoggle":v=BR}var b=(t&4)!==0,D=!b&&(e==="scroll"||e==="scrollend"),E=b?p!==null?p+"Capture":null:p;b=[];for(var _=c,C;_!==null;){var V=_;if(C=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||C===null||E===null||(V=Fr(_,E),V!=null&&b.push(Wr(_,V,C))),D)break;_=_.return}0<b.length&&(p=new v(p,x,null,n,h),m.push({event:p,listeners:b}))}}if(!(t&7)){t:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&n!==od&&(x=n.relatedTarget||n.fromElement)&&(qo(x)||x[bs]))break t;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=c,x=x?qo(x):null,x!==null&&(D=fa(x),b=x.tag,x!==D||b!==5&&b!==27&&b!==6)&&(x=null)):(v=null,x=c),v!==x)){if(b=Ng,V="onMouseLeave",E="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(b=Dg,V="onPointerLeave",E="onPointerEnter",_="pointer"),D=v==null?p:mr(v),C=x==null?p:mr(x),p=new b(V,_+"leave",v,n,h),p.target=D,p.relatedTarget=C,V=null,qo(h)===c&&(b=new b(E,_+"enter",x,n,h),b.target=C,b.relatedTarget=D,V=b),D=V,v&&x)e:{for(b=OI,E=v,_=x,C=0,V=E;V;V=b(V))C++;V=0;for(var L=_;L;L=b(L))V++;for(;0<C-V;)E=b(E),C--;for(;0<V-C;)_=b(_),V--;for(;C--;){if(E===_||_!==null&&E===_.alternate){b=E;break e}E=b(E),_=b(_)}b=null}else b=null;v!==null&&Ay(m,p,v,b,!1),x!==null&&D!==null&&Ay(m,D,x,b,!0)}}t:{if(p=c?mr(c):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var B=Ug;else if(kg(p))if(lT)B=$R;else{B=JR;var I=KR}else v=p.nodeName,!v||v.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?c&&Uh(c.elementType)&&(B=Ug):B=QR;if(B&&(B=B(e,c))){aT(m,B,n,h);break t}I&&I(e,p,c),e==="focusout"&&c&&p.type==="number"&&c.memoizedProps.value!=null&&id(p,"number",p.value)}switch(I=c?mr(c):window,e){case"focusin":(kg(I)||I.contentEditable==="true")&&(zo=I,rd=c,Rr=null);break;case"focusout":Rr=rd=zo=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,qg(m,n,h);break;case"selectionchange":if(WR)break;case"keydown":case"keyup":qg(m,n,h)}var w;if(Gh)t:{switch(e){case"compositionstart":var A="onCompositionStart";break t;case"compositionend":A="onCompositionEnd";break t;case"compositionupdate":A="onCompositionUpdate";break t}A=void 0}else Ho?sT(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(oT&&n.locale!=="ko"&&(Ho||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ho&&(w=iT()):(hi=h,Oh="value"in hi?hi.value:hi.textContent,Ho=!0)),I=hu(c,A),0<I.length&&(A=new Mg(A,e,null,n,h),m.push({event:A,listeners:I}),w?A.data=w:(w=rT(n),w!==null&&(A.data=w)))),(w=qR?FR(e,n):HR(e,n))&&(A=hu(c,"onBeforeInput"),0<A.length&&(I=new Mg("onBeforeInput","beforeinput",null,n,h),m.push({event:I,listeners:A}),I.data=w)),PI(m,e,c,n,h)}nS(m,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hu(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=Fr(e,n),o!=null&&i.unshift(Wr(e,o,s)),o=Fr(e,t),o!=null&&i.push(Wr(e,o,s))),e.tag===3)return i;e=e.return}return[]}function OI(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ay(e,t,n,i,o){for(var s=t._reactName,r=[];n!==null&&n!==i;){var a=n,u=a.alternate,c=a.stateNode;if(a=a.tag,u!==null&&u===i)break;a!==5&&a!==26&&a!==27||c===null||(u=c,o?(c=Fr(n,s),c!=null&&r.unshift(Wr(n,c,u))):o||(c=Fr(n,s),c!=null&&r.push(Wr(n,c,u)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var BI=/\r\n?/g,GI=/\u0000|\uFFFD/g;function Cy(e){return(typeof e=="string"?e:""+e).replace(BI,`
`).replace(GI,"")}function oS(e,t){return t=Cy(t),Cy(e)===t}function Tt(e,t,n,i,o,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ds(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ds(e,""+i);break;case"className":ja(e,"class",i);break;case"tabIndex":ja(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ja(e,n,i);break;case"style":eT(e,i,s);break;case"data":if(t!=="object"){ja(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Tt(e,t,"name",o.name,o,null),Tt(e,t,"formEncType",o.formEncType,o,null),Tt(e,t,"formMethod",o.formMethod,o,null),Tt(e,t,"formTarget",o.formTarget,o,null)):(Tt(e,t,"encType",o.encType,o,null),Tt(e,t,"method",o.method,o,null),Tt(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Bn);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(O(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(O(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Cl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":it("beforetoggle",e),it("toggle",e),Al(e,"popover",i);break;case"xlinkActuate":Mn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Mn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Mn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Mn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Mn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Mn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Mn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Mn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Mn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Al(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=pR.get(n)||n,Al(e,n,i))}}function Md(e,t,n,i,o,s){switch(n){case"style":eT(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(O(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(O(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ds(e,i):(typeof i=="number"||typeof i=="bigint")&&ds(e,""+i);break;case"onScroll":i!=null&&it("scroll",e);break;case"onScrollEnd":i!=null&&it("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Bn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$_.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[Ve]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break t}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Al(e,n,i)}}}function ue(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",e),it("load",e);var i=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,t));default:Tt(e,t,s,r,n,null)}}o&&Tt(e,t,"srcSet",n.srcSet,n,null),i&&Tt(e,t,"src",n.src,n,null);return;case"input":it("invalid",e);var a=s=r=o=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":o=h;break;case"type":r=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(O(137,t));break;default:Tt(e,t,i,h,n,null)}}Z_(e,s,a,u,c,r,o,!1);return;case"select":it("invalid",e),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":s=a;break;case"defaultValue":r=a;break;case"multiple":i=a;default:Tt(e,t,o,a,n,null)}t=s,n=r,e.multiple=!!i,t!=null?ts(e,!!i,t,!1):n!=null&&ts(e,!!i,n,!0);return;case"textarea":it("invalid",e),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":i=a;break;case"defaultValue":o=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(O(91));break;default:Tt(e,t,r,a,n,null)}tT(e,i,o,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Tt(e,t,u,i,n,null)}return;case"dialog":it("beforetoggle",e),it("toggle",e),it("cancel",e),it("close",e);break;case"iframe":case"object":it("load",e);break;case"video":case"audio":for(i=0;i<Xr.length;i++)it(Xr[i],e);break;case"image":it("error",e),it("load",e);break;case"details":it("toggle",e);break;case"embed":case"source":case"link":it("error",e),it("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,t));default:Tt(e,t,c,i,n,null)}return;default:if(Uh(t)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Md(e,t,h,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Tt(e,t,a,i,n,null))}function qI(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,r=null,a=null,u=null,c=null,h=null;for(v in n){var m=n[v];if(n.hasOwnProperty(v)&&m!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":u=m;default:i.hasOwnProperty(v)||Tt(e,t,v,null,i,m)}}for(var p in i){var v=i[p];if(m=n[p],i.hasOwnProperty(p)&&(v!=null||m!=null))switch(p){case"type":s=v;break;case"name":o=v;break;case"checked":c=v;break;case"defaultChecked":h=v;break;case"value":r=v;break;case"defaultValue":a=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(O(137,t));break;default:v!==m&&Tt(e,t,p,v,i,m)}}nd(e,r,a,u,c,h,s,o);return;case"select":v=r=a=p=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":v=u;default:i.hasOwnProperty(s)||Tt(e,t,s,null,i,u)}for(o in i)if(s=i[o],u=n[o],i.hasOwnProperty(o)&&(s!=null||u!=null))switch(o){case"value":p=s;break;case"defaultValue":a=s;break;case"multiple":r=s;default:s!==u&&Tt(e,t,o,s,i,u)}t=a,n=r,i=v,p!=null?ts(e,!!n,p,!1):!!i!=!!n&&(t!=null?ts(e,!!n,t,!0):ts(e,!!n,n?[]:"",!1));return;case"textarea":v=p=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Tt(e,t,a,null,i,o)}for(r in i)if(o=i[r],s=n[r],i.hasOwnProperty(r)&&(o!=null||s!=null))switch(r){case"value":p=o;break;case"defaultValue":v=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(O(91));break;default:o!==s&&Tt(e,t,r,o,i,s)}j_(e,p,v);return;case"option":for(var x in n)if(p=n[x],n.hasOwnProperty(x)&&p!=null&&!i.hasOwnProperty(x))switch(x){case"selected":e.selected=!1;break;default:Tt(e,t,x,null,i,p)}for(u in i)if(p=i[u],v=n[u],i.hasOwnProperty(u)&&p!==v&&(p!=null||v!=null))switch(u){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Tt(e,t,u,p,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)p=n[b],n.hasOwnProperty(b)&&p!=null&&!i.hasOwnProperty(b)&&Tt(e,t,b,null,i,p);for(c in i)if(p=i[c],v=n[c],i.hasOwnProperty(c)&&p!==v&&(p!=null||v!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(O(137,t));break;default:Tt(e,t,c,p,i,v)}return;default:if(Uh(t)){for(var D in n)p=n[D],n.hasOwnProperty(D)&&p!==void 0&&!i.hasOwnProperty(D)&&Md(e,t,D,void 0,i,p);for(h in i)p=i[h],v=n[h],!i.hasOwnProperty(h)||p===v||p===void 0&&v===void 0||Md(e,t,h,p,i,v);return}}for(var E in n)p=n[E],n.hasOwnProperty(E)&&p!=null&&!i.hasOwnProperty(E)&&Tt(e,t,E,null,i,p);for(m in i)p=i[m],v=n[m],!i.hasOwnProperty(m)||p===v||p==null&&v==null||Tt(e,t,m,p,i,v)}function wy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FI(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],s=o.transferSize,r=o.initiatorType,a=o.duration;if(s&&a&&wy(r)){for(r=0,a=o.responseEnd,i+=1;i<n.length;i++){var u=n[i],c=u.startTime;if(c>a)break;var h=u.transferSize,m=u.initiatorType;h&&wy(m)&&(u=u.responseEnd,r+=h*(u<a?1:(a-c)/(u-c)))}if(--i,t+=8*(s+r)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Dd=null,Vd=null;function pu(e){return e.nodeType===9?e:e.ownerDocument}function Ry(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sS(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nf=null;function HI(){var e=window.event;return e&&e.type==="popstate"?e===Nf?!1:(Nf=e,!0):(Nf=null,!1)}var rS=typeof setTimeout=="function"?setTimeout:void 0,zI=typeof clearTimeout=="function"?clearTimeout:void 0,Iy=typeof Promise=="function"?Promise:void 0,YI=typeof queueMicrotask=="function"?queueMicrotask:typeof Iy<"u"?function(e){return Iy.resolve(null).then(e).catch(KI)}:rS;function KI(e){setTimeout(function(){throw e})}function Gi(e){return e==="head"}function xy(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(o),Ts(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ur(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ur(n);for(var s=n.firstChild;s;){var r=s.nextSibling,a=s.nodeName;s[ma]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Ur(e.ownerDocument.body);n=o}while(n);Ts(t)}function by(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function kd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":kd(n),kh(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function JI(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[ma])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function QI(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=sn(e.nextSibling),e===null))return null;return e}function aS(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=sn(e.nextSibling),e===null))return null;return e}function Ud(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $I(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Od=null;function Ny(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return sn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function My(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function lS(e,t,n){switch(t=pu(n),e){case"html":if(e=t.documentElement,!e)throw Error(O(452));return e;case"head":if(e=t.head,!e)throw Error(O(453));return e;case"body":if(e=t.body,!e)throw Error(O(454));return e;default:throw Error(O(451))}}function Ur(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);kh(e)}var an=new Map,Dy=new Set;function mu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var jn=mt.d;mt.d={f:XI,r:WI,D:ZI,C:jI,L:tx,m:ex,X:ix,S:nx,M:ox};function XI(){var e=jn.f(),t=tc();return e||t}function WI(e){var t=Ns(e);t!==null&&t.tag===5&&t.type==="form"?eE(t):jn.r(e)}var Ps=typeof document>"u"?null:document;function uS(e,t,n){var i=Ps;if(i&&typeof t=="string"&&t){var o=tn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Dy.has(o)||(Dy.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),ue(t,"link",e),jt(t),i.head.appendChild(t)))}}function ZI(e){jn.D(e),uS("dns-prefetch",e,null)}function jI(e,t){jn.C(e,t),uS("preconnect",e,t)}function tx(e,t,n){jn.L(e,t,n);var i=Ps;if(i&&e&&t){var o='link[rel="preload"][as="'+tn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+tn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+tn(n.imageSizes)+'"]')):o+='[href="'+tn(e)+'"]';var s=o;switch(t){case"style":s=_s(e);break;case"script":s=ks(e)}an.has(s)||(e=Nt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),an.set(s,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Ea(s))||t==="script"&&i.querySelector(Sa(s))||(t=i.createElement("link"),ue(t,"link",e),jt(t),i.head.appendChild(t)))}}function ex(e,t){jn.m(e,t);var n=Ps;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+tn(i)+'"][href="'+tn(e)+'"]',s=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=ks(e)}if(!an.has(s)&&(e=Nt({rel:"modulepreload",href:e},t),an.set(s,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sa(s)))return}i=n.createElement("link"),ue(i,"link",e),jt(i),n.head.appendChild(i)}}}function nx(e,t,n){jn.S(e,t,n);var i=Ps;if(i&&e){var o=jo(i).hoistableStyles,s=_s(e);t=t||"default";var r=o.get(s);if(!r){var a={loading:0,preload:null};if(r=i.querySelector(Ea(s)))a.loading=5;else{e=Nt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=an.get(s))&&Tp(e,n);var u=r=i.createElement("link");jt(u),ue(u,"link",e),u._p=new Promise(function(c,h){u.onload=c,u.onerror=h}),u.addEventListener("load",function(){a.loading|=1}),u.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Pl(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:a},o.set(s,r)}}}function ix(e,t){jn.X(e,t);var n=Ps;if(n&&e){var i=jo(n).hoistableScripts,o=ks(e),s=i.get(o);s||(s=n.querySelector(Sa(o)),s||(e=Nt({src:e,async:!0},t),(t=an.get(o))&&Ep(e,t),s=n.createElement("script"),jt(s),ue(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function ox(e,t){jn.M(e,t);var n=Ps;if(n&&e){var i=jo(n).hoistableScripts,o=ks(e),s=i.get(o);s||(s=n.querySelector(Sa(o)),s||(e=Nt({src:e,async:!0,type:"module"},t),(t=an.get(o))&&Ep(e,t),s=n.createElement("script"),jt(s),ue(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function Vy(e,t,n,i){var o=(o=_i.current)?mu(o):null;if(!o)throw Error(O(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=_s(n.href),n=jo(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=_s(n.href);var s=jo(o).hoistableStyles,r=s.get(e);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=o.querySelector(Ea(e)))&&!s._p&&(r.instance=s,r.state.loading=5),an.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},an.set(e,n),s||sx(o,e,n,r.state))),t&&i===null)throw Error(O(528,""));return r}if(t&&i!==null)throw Error(O(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ks(n),n=jo(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,e))}}function _s(e){return'href="'+tn(e)+'"'}function Ea(e){return'link[rel="stylesheet"]['+e+"]"}function cS(e){return Nt({},e,{"data-precedence":e.precedence,precedence:null})}function sx(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),ue(t,"link",n),jt(t),e.head.appendChild(t))}function ks(e){return'[src="'+tn(e)+'"]'}function Sa(e){return"script[async]"+e}function Py(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+tn(n.href)+'"]');if(i)return t.instance=i,jt(i),i;var o=Nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),jt(i),ue(i,"style",o),Pl(i,n.precedence,e),t.instance=i;case"stylesheet":o=_s(n.href);var s=e.querySelector(Ea(o));if(s)return t.state.loading|=4,t.instance=s,jt(s),s;i=cS(n),(o=an.get(o))&&Tp(i,o),s=(e.ownerDocument||e).createElement("link"),jt(s);var r=s;return r._p=new Promise(function(a,u){r.onload=a,r.onerror=u}),ue(s,"link",i),t.state.loading|=4,Pl(s,n.precedence,e),t.instance=s;case"script":return s=ks(n.src),(o=e.querySelector(Sa(s)))?(t.instance=o,jt(o),o):(i=n,(o=an.get(s))&&(i=Nt({},n),Ep(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),jt(o),ue(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(O(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Pl(i,n.precedence,e));return t.instance}function Pl(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,s=o,r=0;r<i.length;r++){var a=i[r];if(a.dataset.precedence===t)s=a;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Tp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ep(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var kl=null;function ky(e,t,n){if(kl===null){var i=new Map,o=kl=new Map;o.set(n,i)}else o=kl,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[ma]||s[se]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var a=i.get(r);a?a.push(s):i.set(r,[s])}}return i}function Uy(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function rx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fS(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function ax(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var o=_s(i.href),s=t.querySelector(Ea(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=gu.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,jt(s);return}s=t.ownerDocument||t,i=cS(i),(o=an.get(o))&&Tp(i,o),s=s.createElement("link"),jt(s);var r=s;r._p=new Promise(function(a,u){r.onload=a,r.onerror=u}),ue(s,"link",i),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=gu.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Mf=0;function lx(e,t){return e.stylesheets&&e.count===0&&Ul(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Ul(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Mf===0&&(Mf=62500*FI());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ul(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Mf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ul(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yu=null;function Ul(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yu=new Map,t.forEach(ux,e),yu=null,gu.call(e))}function ux(e,t){if(!(t.state.loading&4)){var n=yu.get(e);if(n)var i=n.get(null);else{n=new Map,yu.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}o=t.instance,r=o.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,o),n.set(r,o),this.count++,i=gu.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Zr={$$typeof:On,Provider:null,Consumer:null,_currentValue:eo,_currentValue2:eo,_threadCount:0};function cx(e,t,n,i,o,s,r,a,u){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.hiddenUpdates=jc(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function dS(e,t,n,i,o,s,r,a,u,c,h,m){return e=new cx(e,t,n,r,u,c,h,m,a),t=1,s===!0&&(t|=24),s=Be(3,null,null,t),e.current=s,s.stateNode=e,t=Jh(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},Xh(s),e}function hS(e){return e?(e=Jo,e):Jo}function pS(e,t,n,i,o,s){o=hS(o),i.context===null?i.context=o:i.pendingContext=o,i=Ei(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Si(e,i,t),n!==null&&(De(n,e,t),xr(n,e,t))}function Ly(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Sp(e,t){Ly(e,t),(e=e.alternate)&&Ly(e,t)}function mS(e){if(e.tag===13||e.tag===31){var t=To(e,67108864);t!==null&&De(t,e,67108864),Sp(e,67108864)}}function Oy(e){if(e.tag===13||e.tag===31){var t=Ye();t=Vh(t);var n=To(e,t);n!==null&&De(n,e,t),Sp(e,t)}}var vu=!0;function fx(e,t,n,i){var o=Q.T;Q.T=null;var s=mt.p;try{mt.p=2,Ap(e,t,n,i)}finally{mt.p=s,Q.T=o}}function dx(e,t,n,i){var o=Q.T;Q.T=null;var s=mt.p;try{mt.p=8,Ap(e,t,n,i)}finally{mt.p=s,Q.T=o}}function Ap(e,t,n,i){if(vu){var o=Bd(i);if(o===null)bf(e,t,i,_u,n),By(e,i);else if(px(o,e,t,n,i))i.stopPropagation();else if(By(e,i),t&4&&-1<hx.indexOf(e)){for(;o!==null;){var s=Ns(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=$i(s.pendingLanes);if(r!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var u=1<<31-ze(r);a.entanglements[1]|=u,r&=~u}In(s),!(pt&6)&&(lu=Fe()+500,Ta(0))}}break;case 31:case 13:a=To(s,2),a!==null&&De(a,s,2),tc(),Sp(s,2)}if(s=Bd(i),s===null&&bf(e,t,i,_u,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else bf(e,t,i,null,n)}}function Bd(e){return e=Lh(e),Cp(e)}var _u=null;function Cp(e){if(_u=null,e=qo(e),e!==null){var t=fa(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=k_(t),e!==null)return e;e=null}else if(n===31){if(e=U_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return _u=e,null}function gS(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zw()){case G_:return 2;case q_:return 8;case Ql:case jw:return 32;case F_:return 268435456;default:return 32}default:return 32}}var Gd=!1,wi=null,Ri=null,Ii=null,jr=new Map,ta=new Map,fi=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(e,t){switch(e){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(t.pointerId)}}function lr(e,t,n,i,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Ns(t),t!==null&&mS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function px(e,t,n,i,o){switch(t){case"focusin":return wi=lr(wi,e,t,n,i,o),!0;case"dragenter":return Ri=lr(Ri,e,t,n,i,o),!0;case"mouseover":return Ii=lr(Ii,e,t,n,i,o),!0;case"pointerover":var s=o.pointerId;return jr.set(s,lr(jr.get(s)||null,e,t,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,ta.set(s,lr(ta.get(s)||null,e,t,n,i,o)),!0}return!1}function yS(e){var t=qo(e.target);if(t!==null){var n=fa(t);if(n!==null){if(t=n.tag,t===13){if(t=k_(n),t!==null){e.blockedOn=t,Ag(e.priority,function(){Oy(n)});return}}else if(t===31){if(t=U_(n),t!==null){e.blockedOn=t,Ag(e.priority,function(){Oy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ll(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);od=i,n.target.dispatchEvent(i),od=null}else return t=Ns(n),t!==null&&mS(t),e.blockedOn=n,!1;t.shift()}return!0}function Gy(e,t,n){Ll(e)&&n.delete(t)}function mx(){Gd=!1,wi!==null&&Ll(wi)&&(wi=null),Ri!==null&&Ll(Ri)&&(Ri=null),Ii!==null&&Ll(Ii)&&(Ii=null),jr.forEach(Gy),ta.forEach(Gy)}function al(e,t){e.blockedOn===t&&(e.blockedOn=null,Gd||(Gd=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,mx)))}var ll=null;function qy(e){ll!==e&&(ll=e,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,function(){ll===e&&(ll=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(Cp(i||n)===null)continue;break}var s=Ns(n);s!==null&&(e.splice(t,3),t-=3,Td(s,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Ts(e){function t(u){return al(u,e)}wi!==null&&al(wi,e),Ri!==null&&al(Ri,e),Ii!==null&&al(Ii,e),jr.forEach(t),ta.forEach(t);for(var n=0;n<fi.length;n++){var i=fi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<fi.length&&(n=fi[0],n.blockedOn===null);)yS(n),n.blockedOn===null&&fi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],s=n[i+1],r=o[Ve]||null;if(typeof s=="function")r||qy(n);else if(r){var a=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[Ve]||null)a=r.formAction;else if(Cp(o)!==null)continue}else a=r.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),qy(n)}}}function vS(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function wp(e){this._internalRoot=e}ic.prototype.render=wp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));var n=t.current,i=Ye();pS(n,i,e,t,null,null)};ic.prototype.unmount=wp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pS(e.current,2,null,e,null,null),tc(),t[bs]=null}};function ic(e){this._internalRoot=e}ic.prototype.unstable_scheduleHydration=function(e){if(e){var t=J_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fi.length&&t!==0&&t<fi[n].priority;n++);fi.splice(n,0,e),n===0&&yS(e)}};var Fy=V_.version;if(Fy!=="19.2.3")throw Error(O(527,Fy,"19.2.3"));mt.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=Yw(t),e=e!==null?L_(e):null,e=e===null?null:e.stateNode,e};var gx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{da=ul.inject(gx),He=ul}catch{}}Gu.createRoot=function(e,t){if(!P_(e))throw Error(O(299));var n=!1,i="",o=uE,s=cE,r=fE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=dS(e,1,!1,null,null,n,i,null,o,s,r,vS),e[bs]=t.current,_p(e),new wp(t)};Gu.hydrateRoot=function(e,t,n){if(!P_(e))throw Error(O(299));var i=!1,o="",s=uE,r=cE,a=fE,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),t=dS(e,1,!0,t,n??null,i,o,u,s,r,a,vS),t.context=hS(null),n=t.current,i=Ye(),i=Vh(i),o=Ei(i),o.callback=null,Si(n,o,i),n=i,t.current.lanes=n,pa(t,n),In(t),e[bs]=t.current,_p(e),new ic(t)};Gu.version="19.2.3";function _S(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_S)}catch(e){console.error(e)}}_S(),I_.exports=Gu;var yx=I_.exports;const vx=y_(yx),_x=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),T.jsx("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),T.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),T.jsx("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),Tx=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),T.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Rp=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),T.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),qd=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"}),T.jsx("line",{x1:"9",x2:"9",y1:"3",y2:"18"}),T.jsx("line",{x1:"15",x2:"15",y1:"6",y2:"21"})]}),TS=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M5 12h14"}),T.jsx("path",{d:"M12 5v14"})]}),Tu=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M3 6h18"}),T.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),T.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),Ex=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"orange",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("circle",{cx:"12",cy:"12",r:"4"}),T.jsx("path",{d:"M12 2v2"}),T.jsx("path",{d:"M12 20v2"}),T.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),T.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),T.jsx("path",{d:"M2 12h2"}),T.jsx("path",{d:"M20 12h2"}),T.jsx("path",{d:"m6.34 17.66-1.41 1.41"}),T.jsx("path",{d:"m19.07 4.93-1.41 1.41"})]}),Fd=({className:e})=>T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:T.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Sx=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),T.jsx("path",{d:"M16 14v6"}),T.jsx("path",{d:"M8 14v6"}),T.jsx("path",{d:"M12 16v6"})]}),Ax=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),T.jsx("path",{d:"M7 2v20"}),T.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),Cx=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"}),T.jsx("circle",{cx:"7",cy:"17",r:"2"}),T.jsx("path",{d:"M9 17h6"}),T.jsx("circle",{cx:"17",cy:"17",r:"2"})]}),wx=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M2 4v16"}),T.jsx("path",{d:"M2 8h18a2 2 0 0 1 2 2v10"}),T.jsx("path",{d:"M2 17h20"}),T.jsx("path",{d:"M6 8v9"})]}),Rx=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"}),T.jsx("path",{d:"M13 5v2"}),T.jsx("path",{d:"M13 17v2"}),T.jsx("path",{d:"M13 11v2"})]}),Df=({className:e})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[T.jsx("path",{d:"M2 12h20"}),T.jsx("path",{d:"M13 2 9 12h9l4 10"})]});var Ix={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let xx,bx;function Nx(){return{geminiUrl:xx,vertexUrl:bx}}function Mx(e,t,n,i){var o,s;if(!(e!=null&&e.baseUrl)){const r=Nx();return t?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti{}function z(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const s=t[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(e,t,n){for(let s=0;s<t.length-1;s++){const r=t[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(e[a])){const u=e[a];if(Array.isArray(n))for(let c=0;c<u.length;c++){const h=u[c];d(h,t.slice(s+1),n[c])}else for(const c of u)d(c,t.slice(s+1),n)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in e||(e[a]=[{}]);const u=e[a];d(u[0],t.slice(s+1),n);return}(!e[r]||typeof e[r]!="object")&&(e[r]={}),e=e[r]}const i=t[t.length-1],o=e[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[i]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let i=0;i<t.length;i++){if(typeof e!="object"||e===null)return n;const o=t[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in e){const r=e[s];return Array.isArray(r)?r.map(a=>l(a,t.slice(i+1),n)):n}else return n}else e=e[o]}return e}catch(i){if(i instanceof TypeError)return n;throw i}}function Dx(e,t){for(const[n,i]of Object.entries(t)){const o=n.split("."),s=i.split("."),r=new Set;let a=-1;for(let u=0;u<o.length;u++)if(o[u]==="*"){a=u;break}if(a!==-1&&s.length>a)for(let u=a;u<s.length;u++){const c=s[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&r.add(c)}Hd(e,o,s,0,r)}}function Hd(e,t,n,i,o){if(i>=t.length||typeof e!="object"||e===null)return;const s=t[i];if(s.endsWith("[]")){const r=s.slice(0,-2),a=e;if(r in a&&Array.isArray(a[r]))for(const u of a[r])Hd(u,t,n,i+1,o)}else if(s==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=e,a=Object.keys(r).filter(c=>!c.startsWith("_")&&!o.has(c)),u={};for(const c of a)u[c]=r[c];for(const[c,h]of Object.entries(u)){const m=[];for(const p of n.slice(i))p==="*"?m.push(c):m.push(p);d(r,m,h)}for(const c of a)delete r[c]}}else{const r=e;s in r&&Hd(r[s],t,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ip(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vx(e){const t={},n=l(e,["operationName"]);n!=null&&d(t,["operationName"],n);const i=l(e,["resourceName"]);return i!=null&&d(t,["_url","resourceName"],i),t}function Px(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response","generateVideoResponse"]);return r!=null&&d(t,["response"],Ux(r)),t}function kx(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response"]);return r!=null&&d(t,["response"],Lx(r)),t}function Ux(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Ox(r))),d(t,["generatedVideos"],s)}const i=l(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Lx(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Bx(r))),d(t,["generatedVideos"],s)}const i=l(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function Ox(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],Yx(n)),t}function Bx(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],Kx(n)),t}function Gx(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function qx(e){const t={},n=l(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function Fx(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response"]);return r!=null&&d(t,["response"],Hx(r)),t}function Hx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["parent"]);i!=null&&d(t,["parent"],i);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function ES(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response"]);return r!=null&&d(t,["response"],zx(r)),t}function zx(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["parent"]);i!=null&&d(t,["parent"],i);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function Yx(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const i=l(e,["encodedVideo"]);i!=null&&d(t,["videoBytes"],Ip(i));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function Kx(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const i=l(e,["bytesBase64Encoded"]);i!=null&&d(t,["videoBytes"],Ip(i));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Hy;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Hy||(Hy={}));var zy;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(zy||(zy={}));var Yy;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(Yy||(Yy={}));var yi;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(yi||(yi={}));var Ky;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Ky||(Ky={}));var Jy;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jy||(Jy={}));var Qy;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(Qy||(Qy={}));var $y;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($y||($y={}));var Xy;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Xy||(Xy={}));var Wy;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Wy||(Wy={}));var Zy;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Zy||(Zy={}));var jy;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(jy||(jy={}));var tv;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(tv||(tv={}));var ev;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(ev||(ev={}));var nv;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(nv||(nv={}));var iv;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iv||(iv={}));var ov;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ov||(ov={}));var sv;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(sv||(sv={}));var rv;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rv||(rv={}));var Eu;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Eu||(Eu={}));var av;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(av||(av={}));var lv;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lv||(lv={}));var uv;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uv||(uv={}));var zd;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zd||(zd={}));var cv;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cv||(cv={}));var fv;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(fv||(fv={}));var dv;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(dv||(dv={}));var hv;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(hv||(hv={}));var pv;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(pv||(pv={}));var mv;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mv||(mv={}));var gv;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(gv||(gv={}));var yv;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(yv||(yv={}));var vv;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(vv||(vv={}));var _v;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(_v||(_v={}));var Tv;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Tv||(Tv={}));var Ev;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ev||(Ev={}));var Sv;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Sv||(Sv={}));var Av;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Av||(Av={}));var Cv;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Cv||(Cv={}));var wv;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(wv||(wv={}));var Rv;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Rv||(Rv={}));var Iv;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Iv||(Iv={}));var xv;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(xv||(xv={}));var bv;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(bv||(bv={}));var Nv;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Nv||(Nv={}));var Mv;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(Mv||(Mv={}));var Dv;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Dv||(Dv={}));var Vv;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(Vv||(Vv={}));var Pv;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Pv||(Pv={}));var kv;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(kv||(kv={}));var Uv;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Uv||(Uv={}));var Lv;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(Lv||(Lv={}));var Ov;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ov||(Ov={}));var Bv;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Bv||(Bv={}));var Gv;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(Gv||(Gv={}));var Wo;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Wo||(Wo={}));class Yd{constructor(t){const n={};for(const i of t.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class ur{get text(){var t,n,i,o,s,r,a,u;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const m=[];for(const p of(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[v,x]of Object.entries(p))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(x!==null||x!==void 0)&&m.push(v);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;h=!0,c+=p.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var t,n,i,o,s,r,a,u;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const m of(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[p,v]of Object.entries(m))p!=="inlineData"&&(v!==null||v!==void 0)&&h.push(p);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,i,o,s,r,a,u;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,i,o,s,r,a,u,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,i,o,s,r,a,u,c;if(((o=(i=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class qv{}class Fv{}class Jx{}class Qx{}class $x{}class Xx{}class Hv{}class zv{}class Yv{}class Wx{}class Su{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new Su;let o;const s=t;return n?o=kx(s):o=Px(s),Object.assign(i,o),i}}class Kv{}class Jv{}class Qv{}class $v{}class Zx{}class jx{}class tb{}class xp{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new xp,s=Fx(t);return Object.assign(i,s),i}}class eb{}class nb{}class ib{}class Xv{}class ob{get text(){var t,n,i;let o="",s=!1;const r=[];for(const a of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&r.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var t,n,i;let o="";const s=[];for(const r of(i=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,u]of Object.entries(r))a!=="inlineData"&&u!==null&&s.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class sb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bp{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const i=new bp,s=ES(t);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ht(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function SS(e,t){const n=ht(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function AS(e){return Array.isArray(e)?e.map(t=>Au(t)):[Au(e)]}function Au(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function CS(e){const t=Au(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function wS(e){const t=Au(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Wv(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function RS(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Wv(t)):[Wv(e)]}function Kd(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Zv(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function jv(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function ve(e){if(e==null)throw new Error("ContentUnion is required");return Kd(e)?e:{role:"user",parts:RS(e)}}function Np(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const i=ve(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(e.isVertexAI()){const n=ve(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>ve(n)):[ve(t)]}function rn(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Zv(e)||jv(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ve(e)]}const t=[],n=[],i=Kd(e[0]);for(const o of e){const s=Kd(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(Zv(o)||jv(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||t.push({role:"user",parts:RS(n)}),t}function rb(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(i=>i!=="null");if(n.length===1)t.type=Object.values(yi).includes(n[0].toUpperCase())?n[0].toUpperCase():yi.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of n)t.anyOf.push({type:Object.values(yi).includes(i.toUpperCase())?i.toUpperCase():yi.TYPE_UNSPECIFIED})}}function rs(e){const t={},n=["items"],i=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=e.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(t.nullable=!0,e=s[1]):s[1].type==="null"&&(t.nullable=!0,e=s[0])),e.type instanceof Array&&rb(e.type,t);for(const[r,a]of Object.entries(e))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(yi).includes(a.toUpperCase())?a.toUpperCase():yi.TYPE_UNSPECIFIED}else if(n.includes(r))t[r]=rs(a);else if(i.includes(r)){const u=[];for(const c of a){if(c.type=="null"){t.nullable=!0;continue}u.push(rs(c))}t[r]=u}else if(o.includes(r)){const u={};for(const[c,h]of Object.entries(a))u[c]=rs(h);t[r]=u}else{if(r==="additionalProperties")continue;t[r]=a}return t}function Mp(e){return rs(e)}function Dp(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Vp(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Us(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=rs(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=rs(t.response));return e}function Ls(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function ab(e,t,n,i=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===i;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function ei(e,t){if(typeof t!="string")throw new Error("name must be a string");return ab(e,t,"cachedContents")}function IS(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function qi(e){return Ip(e)}function lb(e){return e!=null&&typeof e=="object"&&"name"in e}function ub(e){return e!=null&&typeof e=="object"&&"video"in e}function cb(e){return e!=null&&typeof e=="object"&&"uri"in e}function xS(e){var t;let n;if(lb(e)&&(n=e.name),!(cb(e)&&(n=e.uri,n===void 0))&&!(ub(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function bS(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function NS(e){for(const t of["models","tunedModels","publisherModels"])if(fb(e,t))return e[t];return[]}function fb(e,t){return e!==null&&typeof e=="object"&&t in e}function db(e,t={}){const n=e,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function hb(e,t={}){const n=[],i=new Set;for(const o of e){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const r=db(o,t);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function MS(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function pb(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function DS(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let s=!1;for(const r of o){if(typeof r!="object"||r===null)continue;const u=r.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function Os(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function VS(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mb(e){const t={},n=l(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);const i=l(e,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>$b(r))),d(t,["inlinedResponses"],s)}const o=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["inlinedEmbedContentResponses"],s)}return t}function gb(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);const i=l(e,["gcsDestination","outputUriPrefix"]);i!=null&&d(t,["gcsUri"],i);const o=l(e,["bigqueryDestination","outputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function yb(e){const t={},n=l(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);const i=l(e,["gcsUri"]);i!=null&&d(t,["gcsDestination","outputUriPrefix"],i);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigqueryDestination","outputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ol(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata","displayName"]);i!=null&&d(t,["displayName"],i);const o=l(e,["metadata","state"]);o!=null&&d(t,["state"],VS(o));const s=l(e,["metadata","createTime"]);s!=null&&d(t,["createTime"],s);const r=l(e,["metadata","endTime"]);r!=null&&d(t,["endTime"],r);const a=l(e,["metadata","updateTime"]);a!=null&&d(t,["updateTime"],a);const u=l(e,["metadata","model"]);u!=null&&d(t,["model"],u);const c=l(e,["metadata","output"]);return c!=null&&d(t,["dest"],mb(DS(c))),t}function Jd(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["displayName"]);i!=null&&d(t,["displayName"],i);const o=l(e,["state"]);o!=null&&d(t,["state"],VS(o));const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["createTime"]);r!=null&&d(t,["createTime"],r);const a=l(e,["startTime"]);a!=null&&d(t,["startTime"],a);const u=l(e,["endTime"]);u!=null&&d(t,["endTime"],u);const c=l(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);const h=l(e,["model"]);h!=null&&d(t,["model"],h);const m=l(e,["inputConfig"]);m!=null&&d(t,["src"],vb(m));const p=l(e,["outputConfig"]);p!=null&&d(t,["dest"],gb(DS(p)));const v=l(e,["completionStats"]);return v!=null&&d(t,["completionStats"],v),t}function vb(e){const t={},n=l(e,["instancesFormat"]);n!=null&&d(t,["format"],n);const i=l(e,["gcsSource","uris"]);i!=null&&d(t,["gcsUri"],i);const o=l(e,["bigquerySource","inputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function _b(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=l(t,["fileName"]);i!=null&&d(n,["fileName"],i);const o=l(t,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Qb(e,r))),d(n,["requests","requests"],s)}return n}function Tb(e){const t={},n=l(e,["format"]);n!=null&&d(t,["instancesFormat"],n);const i=l(e,["gcsUri"]);i!=null&&d(t,["gcsSource","uris"],i);const o=l(e,["bigqueryUri"]);if(o!=null&&d(t,["bigquerySource","inputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function Eb(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function Sb(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],Os(e,i)),n}function Ab(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],Os(e,i)),n}function Cb(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const i=l(e,["citationMetadata"]);i!=null&&d(t,["citationMetadata"],wb(i));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const r=l(e,["avgLogprobs"]);r!=null&&d(t,["avgLogprobs"],r);const a=l(e,["groundingMetadata"]);a!=null&&d(t,["groundingMetadata"],a);const u=l(e,["index"]);u!=null&&d(t,["index"],u);const c=l(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const h=l(e,["safetyRatings"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>v)),d(t,["safetyRatings"],p)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function wb(e){const t={},n=l(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),d(t,["citations"],i)}return t}function PS(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>n1(s))),d(t,["parts"],o)}const i=l(e,["role"]);return i!=null&&d(t,["role"],i),t}function Rb(e,t){const n={},i=l(e,["displayName"]);if(t!==void 0&&i!=null&&d(t,["batch","displayName"],i),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Ib(e,t){const n={},i=l(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);const o=l(e,["dest"]);return t!==void 0&&o!=null&&d(t,["outputConfig"],yb(pb(o))),n}function t0(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],_b(e,MS(e,o)));const s=l(t,["config"]);return s!=null&&Rb(s,n),n}function xb(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["model"],ht(e,i));const o=l(t,["src"]);o!=null&&d(n,["inputConfig"],Tb(MS(e,o)));const s=l(t,["config"]);return s!=null&&Ib(s,n),n}function bb(e,t){const n={},i=l(e,["displayName"]);return t!==void 0&&i!=null&&d(t,["batch","displayName"],i),n}function Nb(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["src"]);o!=null&&d(n,["batch","inputConfig"],Lb(e,o));const s=l(t,["config"]);return s!=null&&bb(s,n),n}function Mb(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],Os(e,i)),n}function Db(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],Os(e,i)),n}function Vb(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["name"]);i!=null&&d(t,["name"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function Pb(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["name"]);i!=null&&d(t,["name"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);return s!=null&&d(t,["error"],s),t}function kb(e,t){const n={},i=l(t,["contents"]);if(i!=null){let s=Np(e,i);Array.isArray(s)&&(s=s.map(r=>r)),d(n,["requests[]","request","content"],s)}const o=l(t,["config"]);return o!=null&&(d(n,["_self"],Ub(o,n)),Dx(n,{"requests[].*":"requests[].request.*"})),n}function Ub(e,t){const n={},i=l(e,["taskType"]);t!==void 0&&i!=null&&d(t,["requests[]","taskType"],i);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Lb(e,t){const n={},i=l(t,["fileName"]);i!=null&&d(n,["file_name"],i);const o=l(t,["inlinedRequests"]);return o!=null&&d(n,["requests"],kb(e,o)),n}function Ob(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function Bb(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const i=l(e,["args"]);i!=null&&d(t,["args"],i);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Gb(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const i=l(e,["allowedFunctionNames"]);if(i!=null&&d(t,["allowedFunctionNames"],i),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function qb(e,t,n){const i={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],PS(ve(o)));const s=l(t,["temperature"]);s!=null&&d(i,["temperature"],s);const r=l(t,["topP"]);r!=null&&d(i,["topP"],r);const a=l(t,["topK"]);a!=null&&d(i,["topK"],a);const u=l(t,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=l(t,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const h=l(t,["stopSequences"]);h!=null&&d(i,["stopSequences"],h);const m=l(t,["responseLogprobs"]);m!=null&&d(i,["responseLogprobs"],m);const p=l(t,["logprobs"]);p!=null&&d(i,["logprobs"],p);const v=l(t,["presencePenalty"]);v!=null&&d(i,["presencePenalty"],v);const x=l(t,["frequencyPenalty"]);x!=null&&d(i,["frequencyPenalty"],x);const b=l(t,["seed"]);b!=null&&d(i,["seed"],b);const D=l(t,["responseMimeType"]);D!=null&&d(i,["responseMimeType"],D);const E=l(t,["responseSchema"]);E!=null&&d(i,["responseSchema"],Mp(E));const _=l(t,["responseJsonSchema"]);if(_!=null&&d(i,["responseJsonSchema"],_),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=l(t,["safetySettings"]);if(n!==void 0&&C!=null){let N=C;Array.isArray(N)&&(N=N.map(gt=>i1(gt))),d(n,["safetySettings"],N)}const V=l(t,["tools"]);if(n!==void 0&&V!=null){let N=Ls(V);Array.isArray(N)&&(N=N.map(gt=>s1(Us(gt)))),d(n,["tools"],N)}const L=l(t,["toolConfig"]);if(n!==void 0&&L!=null&&d(n,["toolConfig"],o1(L)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=l(t,["cachedContent"]);n!==void 0&&B!=null&&d(n,["cachedContent"],ei(e,B));const I=l(t,["responseModalities"]);I!=null&&d(i,["responseModalities"],I);const w=l(t,["mediaResolution"]);w!=null&&d(i,["mediaResolution"],w);const A=l(t,["speechConfig"]);if(A!=null&&d(i,["speechConfig"],Dp(A)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(t,["thinkingConfig"]);M!=null&&d(i,["thinkingConfig"],M);const R=l(t,["imageConfig"]);R!=null&&d(i,["imageConfig"],Jb(R));const P=l(t,["enableEnhancedCivicAnswers"]);return P!=null&&d(i,["enableEnhancedCivicAnswers"],P),i}function Fb(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>Cb(c))),d(t,["candidates"],u)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const r=l(e,["responseId"]);r!=null&&d(t,["responseId"],r);const a=l(e,["usageMetadata"]);return a!=null&&d(t,["usageMetadata"],a),t}function Hb(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],Os(e,i)),n}function zb(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],Os(e,i)),n}function Yb(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function Kb(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function Jb(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const i=l(e,["imageSize"]);if(i!=null&&d(t,["imageSize"],i),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Qb(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["request","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let a=rn(o);Array.isArray(a)&&(a=a.map(u=>PS(u))),d(n,["request","contents"],a)}const s=l(t,["metadata"]);s!=null&&d(n,["metadata"],s);const r=l(t,["config"]);return r!=null&&d(n,["request","generationConfig"],qb(e,r,l(n,["request"],{}))),n}function $b(e){const t={},n=l(e,["response"]);n!=null&&d(t,["response"],Fb(n));const i=l(e,["error"]);return i!=null&&d(t,["error"],i),t}function Xb(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);if(t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Wb(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);t!==void 0&&o!=null&&d(t,["_query","pageToken"],o);const s=l(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),n}function Zb(e){const t={},n=l(e,["config"]);return n!=null&&Xb(n,t),t}function jb(e){const t={},n=l(e,["config"]);return n!=null&&Wb(n,t),t}function t1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Ol(r))),d(t,["batchJobs"],s)}return t}function e1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Jd(r))),d(t,["batchJobs"],s)}return t}function n1(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=l(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],Ob(s));const r=l(e,["functionCall"]);r!=null&&d(t,["functionCall"],Bb(r));const a=l(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);const u=l(e,["inlineData"]);u!=null&&d(t,["inlineData"],Eb(u));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const h=l(e,["thought"]);h!=null&&d(t,["thought"],h);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&d(t,["videoMetadata"],p),t}function i1(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(e,["threshold"]);return i!=null&&d(t,["threshold"],i),t}function o1(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],Gb(n));const i=l(e,["retrievalConfig"]);return i!=null&&d(t,["retrievalConfig"],i),t}function s1(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["functionDeclarations"],h)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(e,["googleSearchRetrieval"]);i!=null&&d(t,["googleSearchRetrieval"],i);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const r=l(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],Yb(a));const u=l(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],Kb(u));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $n;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})($n||($n={}));class So{constructor(t,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,i,o)}init(t,n,i){var o,s;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r1 extends ti{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new So($n.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=t0(this.apiClient,t),i=n._url,o=z("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,u=a.requests,c=[];for(const h of u){const m=Object.assign({},h);if(m.systemInstruction){const p=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=p,m.request=v}c.push(m)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(t),r=this.getBigqueryUri(t);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=xb(this.apiClient,t);return a=z("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Jd(h))}else{const c=t0(this.apiClient,t);return a=z("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Ol(h))}}async createEmbeddingsInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Nb(this.apiClient,t);return s=z("{model}:asyncBatchEmbedContent",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Ol(u))}}async get(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=zb(this.apiClient,t);return a=z("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Jd(h))}else{const c=Hb(this.apiClient,t);return a=z("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Ol(h))}}async cancel(t){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const u=Ab(this.apiClient,t);r=z("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=Sb(this.apiClient,t);r=z("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=jb(t);return a=z("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=e1(h),p=new Xv;return Object.assign(p,m),p})}else{const c=Zb(t);return a=z("batches",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=t1(h),p=new Xv;return Object.assign(p,m),p})}}async delete(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=Db(this.apiClient,t);return a=z("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>Pb(h))}else{const c=Mb(this.apiClient,t);return a=z("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>Vb(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a1(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function e0(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>N1(s))),d(t,["parts"],o)}const i=l(e,["role"]);return i!=null&&d(t,["role"],i),t}function l1(e,t){const n={},i=l(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const r=l(e,["contents"]);if(t!==void 0&&r!=null){let h=rn(r);Array.isArray(h)&&(h=h.map(m=>e0(m))),d(t,["contents"],h)}const a=l(e,["systemInstruction"]);t!==void 0&&a!=null&&d(t,["systemInstruction"],e0(ve(a)));const u=l(e,["tools"]);if(t!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(m=>D1(m))),d(t,["tools"],h)}const c=l(e,["toolConfig"]);if(t!==void 0&&c!=null&&d(t,["toolConfig"],M1(c)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function u1(e,t){const n={},i=l(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);const s=l(e,["displayName"]);t!==void 0&&s!=null&&d(t,["displayName"],s);const r=l(e,["contents"]);if(t!==void 0&&r!=null){let m=rn(r);Array.isArray(m)&&(m=m.map(p=>p)),d(t,["contents"],m)}const a=l(e,["systemInstruction"]);t!==void 0&&a!=null&&d(t,["systemInstruction"],ve(a));const u=l(e,["tools"]);if(t!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(p=>V1(p))),d(t,["tools"],m)}const c=l(e,["toolConfig"]);t!==void 0&&c!=null&&d(t,["toolConfig"],c);const h=l(e,["kmsKeyName"]);return t!==void 0&&h!=null&&d(t,["encryption_spec","kmsKeyName"],h),n}function c1(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["model"],SS(e,i));const o=l(t,["config"]);return o!=null&&l1(o,n),n}function f1(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["model"],SS(e,i));const o=l(t,["config"]);return o!=null&&u1(o,n),n}function d1(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],ei(e,i)),n}function h1(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],ei(e,i)),n}function p1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function m1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function g1(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function y1(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const i=l(e,["args"]);i!=null&&d(t,["args"],i);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function v1(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const i=l(e,["allowedFunctionNames"]);if(i!=null&&d(t,["allowedFunctionNames"],i),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function _1(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const i=l(e,["name"]);i!=null&&d(t,["name"],i);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const r=l(e,["response"]);r!=null&&d(t,["response"],r);const a=l(e,["responseJsonSchema"]);return a!=null&&d(t,["responseJsonSchema"],a),t}function T1(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],ei(e,i)),n}function E1(e,t){const n={},i=l(t,["name"]);return i!=null&&d(n,["_url","name"],ei(e,i)),n}function S1(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function A1(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function C1(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function w1(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function R1(e){const t={},n=l(e,["config"]);return n!=null&&C1(n,t),t}function I1(e){const t={},n=l(e,["config"]);return n!=null&&w1(n,t),t}function x1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["cachedContents"],s)}return t}function b1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["cachedContents"],s)}return t}function N1(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=l(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],g1(s));const r=l(e,["functionCall"]);r!=null&&d(t,["functionCall"],y1(r));const a=l(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);const u=l(e,["inlineData"]);u!=null&&d(t,["inlineData"],a1(u));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const h=l(e,["thought"]);h!=null&&d(t,["thought"],h);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&d(t,["videoMetadata"],p),t}function M1(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],v1(n));const i=l(e,["retrievalConfig"]);return i!=null&&d(t,["retrievalConfig"],i),t}function D1(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["functionDeclarations"],h)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(e,["googleSearchRetrieval"]);i!=null&&d(t,["googleSearchRetrieval"],i);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const r=l(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],S1(a));const u=l(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],A1(u));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function V1(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>_1(p))),d(t,["functionDeclarations"],m)}const i=l(e,["retrieval"]);i!=null&&d(t,["retrieval"],i);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(e,["codeExecution"]);r!=null&&d(t,["codeExecution"],r);const a=l(e,["enterpriseWebSearch"]);a!=null&&d(t,["enterpriseWebSearch"],a);const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],u);const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const h=l(e,["urlContext"]);return h!=null&&d(t,["urlContext"],h),t}function P1(e,t){const n={},i=l(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function k1(e,t){const n={},i=l(e,["ttl"]);t!==void 0&&i!=null&&d(t,["ttl"],i);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function U1(e,t){const n={},i=l(t,["name"]);i!=null&&d(n,["_url","name"],ei(e,i));const o=l(t,["config"]);return o!=null&&P1(o,n),n}function L1(e,t){const n={},i=l(t,["name"]);i!=null&&d(n,["_url","name"],ei(e,i));const o=l(t,["config"]);return o!=null&&k1(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O1 extends ti{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new So($n.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=f1(this.apiClient,t);return a=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=c1(this.apiClient,t);return a=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=E1(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=T1(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=h1(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=m1(h),p=new Qv;return Object.assign(p,m),p})}else{const c=d1(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=p1(h),p=new Qv;return Object.assign(p,m),p})}}async update(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=L1(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=U1(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async listInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=I1(t);return a=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=b1(h),p=new $v;return Object.assign(p,m),p})}else{const c=R1(t);return a=z("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=x1(h),p=new $v;return Object.assign(p,m),p})}}}function Cu(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n}function n0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e){return this instanceof W?(this.v=e,this):new W(e)}function dn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(v){return function(x){return Promise.resolve(x).then(v,m)}}function a(v,x){i[v]&&(o[v]=function(b){return new Promise(function(D,E){s.push([v,b,D,E])>1||u(v,b)})},x&&(o[v]=x(o[v])))}function u(v,x){try{c(i[v](x))}catch(b){p(s[0][3],b)}}function c(v){v.value instanceof W?Promise.resolve(v.value.v).then(h,m):p(s[0][2],v)}function h(v){u("next",v)}function m(v){u("throw",v)}function p(v,x){v(x),s.shift(),s.length&&u(s[0][0],s[0][1])}}function hn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof n0=="function"?n0(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(r){return new Promise(function(a,u){r=e[s](r),o(a,u,r.done,r.value)})}}function o(s,r,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B1(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:kS(n)}function kS(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function G1(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function i0(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let i=0;for(;i<n;)if(e[i].role==="user")t.push(e[i]),i++;else{const o=[];let s=!0;for(;i<n&&e[i].role==="model";)o.push(e[i]),s&&!kS(e[i])&&(s=!1),i++;s?t.push(...o):t.pop()}return t}class q1{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new F1(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class F1{constructor(t,n,i,o={},s=[]){this.apiClient=t,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),G1(s)}async sendMessage(t){var n;await this.sendPromise;const i=ve(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,a;const u=await o,c=(r=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,h=u.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let p=[];h!=null&&(p=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=c?[c]:[];this.recordHistory(i,v,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const i=ve(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(t=!1){const n=t?i0(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return dn(this,arguments,function*(){var o,s,r,a,u,c;const h=[];try{for(var m=!0,p=hn(t),v;v=yield W(p.next()),o=v.done,!o;m=!0){a=v.value,m=!1;const x=a;if(B1(x)){const b=(c=(u=x.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;b!==void 0&&h.push(b)}yield yield W(x)}}catch(x){s={error:x}}finally{try{!m&&!o&&(r=p.return)&&(yield W(r.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,h)})}recordHistory(t,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...i0(i)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,oc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H1(e){const t={},n=l(e,["file"]);return n!=null&&d(t,["file"],n),t}function z1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function Y1(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],xS(n)),t}function K1(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function J1(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","file"],xS(n)),t}function Q1(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function $1(e){const t={},n=l(e,["config"]);return n!=null&&Q1(n,t),t}function X1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["files"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W1 extends ti{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new So($n.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$1(t);return s=z("files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=X1(u),h=new eb;return Object.assign(h,c),h})}}async createInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=H1(t);return s=z("upload/v1beta/files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=z1(u),h=new nb;return Object.assign(h,c),h})}}async get(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=J1(t);return s=z("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Y1(t);return s=z("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=K1(u),h=new ib;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bl(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function Z1(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>pN(s))),d(t,["parts"],o)}const i=l(e,["role"]);return i!=null&&d(t,["role"],i),t}function j1(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function tN(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const i=l(e,["args"]);i!=null&&d(t,["args"],i);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function eN(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const i=l(e,["name"]);i!=null&&d(t,["name"],i);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const r=l(e,["response"]);r!=null&&d(t,["response"],r);const a=l(e,["responseJsonSchema"]);return a!=null&&d(t,["responseJsonSchema"],a),t}function nN(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const i=l(e,["responseJsonSchema"]);i!=null&&d(t,["responseJsonSchema"],i);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const r=l(e,["enableAffectiveDialog"]);r!=null&&d(t,["enableAffectiveDialog"],r);const a=l(e,["frequencyPenalty"]);a!=null&&d(t,["frequencyPenalty"],a);const u=l(e,["logprobs"]);u!=null&&d(t,["logprobs"],u);const c=l(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const h=l(e,["mediaResolution"]);h!=null&&d(t,["mediaResolution"],h);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const p=l(e,["responseLogprobs"]);p!=null&&d(t,["responseLogprobs"],p);const v=l(e,["responseMimeType"]);v!=null&&d(t,["responseMimeType"],v);const x=l(e,["responseModalities"]);x!=null&&d(t,["responseModalities"],x);const b=l(e,["responseSchema"]);b!=null&&d(t,["responseSchema"],b);const D=l(e,["routingConfig"]);D!=null&&d(t,["routingConfig"],D);const E=l(e,["seed"]);E!=null&&d(t,["seed"],E);const _=l(e,["speechConfig"]);_!=null&&d(t,["speechConfig"],_);const C=l(e,["stopSequences"]);C!=null&&d(t,["stopSequences"],C);const V=l(e,["temperature"]);V!=null&&d(t,["temperature"],V);const L=l(e,["thinkingConfig"]);L!=null&&d(t,["thinkingConfig"],L);const B=l(e,["topK"]);B!=null&&d(t,["topK"],B);const I=l(e,["topP"]);if(I!=null&&d(t,["topP"],I),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function iN(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function oN(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function sN(e,t){const n={},i=l(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],i);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const r=l(e,["topP"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","topP"],r);const a=l(e,["topK"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topK"],a);const u=l(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const h=l(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],Vp(m));const p=l(e,["thinkingConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","thinkingConfig"],p);const v=l(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],v);const x=l(e,["systemInstruction"]);t!==void 0&&x!=null&&d(t,["setup","systemInstruction"],Z1(ve(x)));const b=l(e,["tools"]);if(t!==void 0&&b!=null){let B=Ls(b);Array.isArray(B)&&(B=B.map(I=>gN(Us(I)))),d(t,["setup","tools"],B)}const D=l(e,["sessionResumption"]);t!==void 0&&D!=null&&d(t,["setup","sessionResumption"],mN(D));const E=l(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&d(t,["setup","inputAudioTranscription"],E);const _=l(e,["outputAudioTranscription"]);t!==void 0&&_!=null&&d(t,["setup","outputAudioTranscription"],_);const C=l(e,["realtimeInputConfig"]);t!==void 0&&C!=null&&d(t,["setup","realtimeInputConfig"],C);const V=l(e,["contextWindowCompression"]);t!==void 0&&V!=null&&d(t,["setup","contextWindowCompression"],V);const L=l(e,["proactivity"]);if(t!==void 0&&L!=null&&d(t,["setup","proactivity"],L),l(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function rN(e,t){const n={},i=l(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],nN(i));const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const r=l(e,["topP"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","topP"],r);const a=l(e,["topK"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topK"],a);const u=l(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const h=l(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],Vp(m));const p=l(e,["thinkingConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","thinkingConfig"],p);const v=l(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],v);const x=l(e,["systemInstruction"]);t!==void 0&&x!=null&&d(t,["setup","systemInstruction"],ve(x));const b=l(e,["tools"]);if(t!==void 0&&b!=null){let I=Ls(b);Array.isArray(I)&&(I=I.map(w=>yN(Us(w)))),d(t,["setup","tools"],I)}const D=l(e,["sessionResumption"]);t!==void 0&&D!=null&&d(t,["setup","sessionResumption"],D);const E=l(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&d(t,["setup","inputAudioTranscription"],E);const _=l(e,["outputAudioTranscription"]);t!==void 0&&_!=null&&d(t,["setup","outputAudioTranscription"],_);const C=l(e,["realtimeInputConfig"]);t!==void 0&&C!=null&&d(t,["setup","realtimeInputConfig"],C);const V=l(e,["contextWindowCompression"]);t!==void 0&&V!=null&&d(t,["setup","contextWindowCompression"],V);const L=l(e,["proactivity"]);t!==void 0&&L!=null&&d(t,["setup","proactivity"],L);const B=l(e,["explicitVadSignal"]);return t!==void 0&&B!=null&&d(t,["setup","explicitVadSignal"],B),n}function aN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["setup","model"],ht(e,i));const o=l(t,["config"]);return o!=null&&d(n,["config"],sN(o,n)),n}function lN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["setup","model"],ht(e,i));const o=l(t,["config"]);return o!=null&&d(n,["config"],rN(o,n)),n}function uN(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function cN(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),d(t,["weightedPrompts"],i)}return t}function fN(e){const t={},n=l(e,["media"]);if(n!=null){let c=AS(n);Array.isArray(c)&&(c=c.map(h=>Bl(h))),d(t,["mediaChunks"],c)}const i=l(e,["audio"]);i!=null&&d(t,["audio"],Bl(wS(i)));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],Bl(CS(s)));const r=l(e,["text"]);r!=null&&d(t,["text"],r);const a=l(e,["activityStart"]);a!=null&&d(t,["activityStart"],a);const u=l(e,["activityEnd"]);return u!=null&&d(t,["activityEnd"],u),t}function dN(e){const t={},n=l(e,["media"]);if(n!=null){let c=AS(n);Array.isArray(c)&&(c=c.map(h=>h)),d(t,["mediaChunks"],c)}const i=l(e,["audio"]);i!=null&&d(t,["audio"],wS(i));const o=l(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);const s=l(e,["video"]);s!=null&&d(t,["video"],CS(s));const r=l(e,["text"]);r!=null&&d(t,["text"],r);const a=l(e,["activityStart"]);a!=null&&d(t,["activityStart"],a);const u=l(e,["activityEnd"]);return u!=null&&d(t,["activityEnd"],u),t}function hN(e){const t={},n=l(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);const i=l(e,["serverContent"]);i!=null&&d(t,["serverContent"],i);const o=l(e,["toolCall"]);o!=null&&d(t,["toolCall"],o);const s=l(e,["toolCallCancellation"]);s!=null&&d(t,["toolCallCancellation"],s);const r=l(e,["usageMetadata"]);r!=null&&d(t,["usageMetadata"],vN(r));const a=l(e,["goAway"]);a!=null&&d(t,["goAway"],a);const u=l(e,["sessionResumptionUpdate"]);u!=null&&d(t,["sessionResumptionUpdate"],u);const c=l(e,["voiceActivityDetectionSignal"]);return c!=null&&d(t,["voiceActivityDetectionSignal"],c),t}function pN(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=l(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],j1(s));const r=l(e,["functionCall"]);r!=null&&d(t,["functionCall"],tN(r));const a=l(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);const u=l(e,["inlineData"]);u!=null&&d(t,["inlineData"],Bl(u));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const h=l(e,["thought"]);h!=null&&d(t,["thought"],h);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&d(t,["videoMetadata"],p),t}function mN(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function gN(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["functionDeclarations"],h)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(e,["googleSearchRetrieval"]);i!=null&&d(t,["googleSearchRetrieval"],i);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const r=l(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],iN(a));const u=l(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],oN(u));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function yN(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>eN(p))),d(t,["functionDeclarations"],m)}const i=l(e,["retrieval"]);i!=null&&d(t,["retrieval"],i);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(e,["codeExecution"]);r!=null&&d(t,["codeExecution"],r);const a=l(e,["enterpriseWebSearch"]);a!=null&&d(t,["enterpriseWebSearch"],a);const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],u);const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const h=l(e,["urlContext"]);return h!=null&&d(t,["urlContext"],h),t}function vN(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);const i=l(e,["cachedContentTokenCount"]);i!=null&&d(t,["cachedContentTokenCount"],i);const o=l(e,["candidatesTokenCount"]);o!=null&&d(t,["responseTokenCount"],o);const s=l(e,["toolUsePromptTokenCount"]);s!=null&&d(t,["toolUsePromptTokenCount"],s);const r=l(e,["thoughtsTokenCount"]);r!=null&&d(t,["thoughtsTokenCount"],r);const a=l(e,["totalTokenCount"]);a!=null&&d(t,["totalTokenCount"],a);const u=l(e,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(x=>x)),d(t,["promptTokensDetails"],v)}const c=l(e,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(x=>x)),d(t,["cacheTokensDetails"],v)}const h=l(e,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(x=>x)),d(t,["responseTokensDetails"],v)}const m=l(e,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(x=>x)),d(t,["toolUsePromptTokensDetails"],v)}const p=l(e,["trafficType"]);return p!=null&&d(t,["trafficType"],p),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _N(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function TN(e){const t={},n=l(e,["content"]);n!=null&&d(t,["content"],n);const i=l(e,["citationMetadata"]);i!=null&&d(t,["citationMetadata"],EN(i));const o=l(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);const s=l(e,["finishReason"]);s!=null&&d(t,["finishReason"],s);const r=l(e,["avgLogprobs"]);r!=null&&d(t,["avgLogprobs"],r);const a=l(e,["groundingMetadata"]);a!=null&&d(t,["groundingMetadata"],a);const u=l(e,["index"]);u!=null&&d(t,["index"],u);const c=l(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);const h=l(e,["safetyRatings"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>v)),d(t,["safetyRatings"],p)}const m=l(e,["urlContextMetadata"]);return m!=null&&d(t,["urlContextMetadata"],m),t}function EN(e){const t={},n=l(e,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),d(t,["citations"],i)}return t}function SN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let s=rn(o);Array.isArray(s)&&(s=s.map(r=>r)),d(n,["contents"],s)}return n}function AN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["tokensInfo"],o)}return t}function CN(e){const t={},n=l(e,["values"]);n!=null&&d(t,["values"],n);const i=l(e,["statistics"]);return i!=null&&d(t,["statistics"],wN(i)),t}function wN(e){const t={},n=l(e,["truncated"]);n!=null&&d(t,["truncated"],n);const i=l(e,["token_count"]);return i!=null&&d(t,["tokenCount"],i),t}function sc(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>PM(s))),d(t,["parts"],o)}const i=l(e,["role"]);return i!=null&&d(t,["role"],i),t}function RN(e){const t={},n=l(e,["controlType"]);n!=null&&d(t,["controlType"],n);const i=l(e,["enableControlImageComputation"]);return i!=null&&d(t,["computeControl"],i),t}function IN(e){const t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function xN(e,t){const n={},i=l(e,["systemInstruction"]);t!==void 0&&i!=null&&d(t,["systemInstruction"],ve(i));const o=l(e,["tools"]);if(t!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>BS(a))),d(t,["tools"],r)}const s=l(e,["generationConfig"]);return t!==void 0&&s!=null&&d(t,["generationConfig"],_M(s)),n}function bN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let r=rn(o);Array.isArray(r)&&(r=r.map(a=>sc(a))),d(n,["contents"],r)}const s=l(t,["config"]);return s!=null&&IN(s),n}function NN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let r=rn(o);Array.isArray(r)&&(r=r.map(a=>a)),d(n,["contents"],r)}const s=l(t,["config"]);return s!=null&&xN(s,n),n}function MN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["totalTokens"]);i!=null&&d(t,["totalTokens"],i);const o=l(e,["cachedContentTokenCount"]);return o!=null&&d(t,["cachedContentTokenCount"],o),t}function DN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["totalTokens"]);return i!=null&&d(t,["totalTokens"],i),t}function VN(e,t){const n={},i=l(t,["model"]);return i!=null&&d(n,["_url","name"],ht(e,i)),n}function PN(e,t){const n={},i=l(t,["model"]);return i!=null&&d(n,["_url","name"],ht(e,i)),n}function kN(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function UN(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function LN(e,t){const n={},i=l(e,["outputGcsUri"]);t!==void 0&&i!=null&&d(t,["parameters","storageUri"],i);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const r=l(e,["aspectRatio"]);t!==void 0&&r!=null&&d(t,["parameters","aspectRatio"],r);const a=l(e,["guidanceScale"]);t!==void 0&&a!=null&&d(t,["parameters","guidanceScale"],a);const u=l(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&d(t,["parameters","safetySetting"],c);const h=l(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const p=l(e,["includeRaiReason"]);t!==void 0&&p!=null&&d(t,["parameters","includeRaiReason"],p);const v=l(e,["language"]);t!==void 0&&v!=null&&d(t,["parameters","language"],v);const x=l(e,["outputMimeType"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","mimeType"],x);const b=l(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","compressionQuality"],b);const D=l(e,["addWatermark"]);t!==void 0&&D!=null&&d(t,["parameters","addWatermark"],D);const E=l(e,["labels"]);t!==void 0&&E!=null&&d(t,["labels"],E);const _=l(e,["editMode"]);t!==void 0&&_!=null&&d(t,["parameters","editMode"],_);const C=l(e,["baseSteps"]);return t!==void 0&&C!=null&&d(t,["parameters","editConfig","baseSteps"],C),n}function ON(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>GM(u))),d(n,["instances[0]","referenceImages"],a)}const r=l(t,["config"]);return r!=null&&LN(r,n),n}function BN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>rc(s))),d(t,["generatedImages"],o)}return t}function GN(e,t){const n={},i=l(e,["taskType"]);t!==void 0&&i!=null&&d(t,["requests[]","taskType"],i);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);const s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function qN(e,t){const n={},i=l(e,["taskType"]);t!==void 0&&i!=null&&d(t,["instances[]","task_type"],i);const o=l(e,["title"]);t!==void 0&&o!=null&&d(t,["instances[]","title"],o);const s=l(e,["outputDimensionality"]);t!==void 0&&s!=null&&d(t,["parameters","outputDimensionality"],s);const r=l(e,["mimeType"]);t!==void 0&&r!=null&&d(t,["instances[]","mimeType"],r);const a=l(e,["autoTruncate"]);return t!==void 0&&a!=null&&d(t,["parameters","autoTruncate"],a),n}function FN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let a=Np(e,o);Array.isArray(a)&&(a=a.map(u=>u)),d(n,["requests[]","content"],a)}const s=l(t,["config"]);s!=null&&GN(s,n);const r=l(t,["model"]);return r!==void 0&&d(n,["requests[]","model"],ht(e,r)),n}function HN(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let r=Np(e,o);Array.isArray(r)&&(r=r.map(a=>a)),d(n,["instances[]","content"],r)}const s=l(t,["config"]);return s!=null&&qN(s,n),n}function zN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function YN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>CN(r))),d(t,["embeddings"],s)}const o=l(e,["metadata"]);return o!=null&&d(t,["metadata"],o),t}function KN(e){const t={},n=l(e,["endpoint"]);n!=null&&d(t,["name"],n);const i=l(e,["deployedModelId"]);return i!=null&&d(t,["deployedModelId"],i),t}function JN(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function QN(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const i=l(e,["args"]);i!=null&&d(t,["args"],i);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function $N(e){const t={},n=l(e,["mode"]);n!=null&&d(t,["mode"],n);const i=l(e,["allowedFunctionNames"]);if(i!=null&&d(t,["allowedFunctionNames"],i),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function XN(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&d(t,["description"],n);const i=l(e,["name"]);i!=null&&d(t,["name"],i);const o=l(e,["parameters"]);o!=null&&d(t,["parameters"],o);const s=l(e,["parametersJsonSchema"]);s!=null&&d(t,["parametersJsonSchema"],s);const r=l(e,["response"]);r!=null&&d(t,["response"],r);const a=l(e,["responseJsonSchema"]);return a!=null&&d(t,["responseJsonSchema"],a),t}function WN(e,t,n){const i={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],sc(ve(o)));const s=l(t,["temperature"]);s!=null&&d(i,["temperature"],s);const r=l(t,["topP"]);r!=null&&d(i,["topP"],r);const a=l(t,["topK"]);a!=null&&d(i,["topK"],a);const u=l(t,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=l(t,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const h=l(t,["stopSequences"]);h!=null&&d(i,["stopSequences"],h);const m=l(t,["responseLogprobs"]);m!=null&&d(i,["responseLogprobs"],m);const p=l(t,["logprobs"]);p!=null&&d(i,["logprobs"],p);const v=l(t,["presencePenalty"]);v!=null&&d(i,["presencePenalty"],v);const x=l(t,["frequencyPenalty"]);x!=null&&d(i,["frequencyPenalty"],x);const b=l(t,["seed"]);b!=null&&d(i,["seed"],b);const D=l(t,["responseMimeType"]);D!=null&&d(i,["responseMimeType"],D);const E=l(t,["responseSchema"]);E!=null&&d(i,["responseSchema"],Mp(E));const _=l(t,["responseJsonSchema"]);if(_!=null&&d(i,["responseJsonSchema"],_),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=l(t,["safetySettings"]);if(n!==void 0&&C!=null){let N=C;Array.isArray(N)&&(N=N.map(gt=>qM(gt))),d(n,["safetySettings"],N)}const V=l(t,["tools"]);if(n!==void 0&&V!=null){let N=Ls(V);Array.isArray(N)&&(N=N.map(gt=>QM(Us(gt)))),d(n,["tools"],N)}const L=l(t,["toolConfig"]);if(n!==void 0&&L!=null&&d(n,["toolConfig"],JM(L)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=l(t,["cachedContent"]);n!==void 0&&B!=null&&d(n,["cachedContent"],ei(e,B));const I=l(t,["responseModalities"]);I!=null&&d(i,["responseModalities"],I);const w=l(t,["mediaResolution"]);w!=null&&d(i,["mediaResolution"],w);const A=l(t,["speechConfig"]);if(A!=null&&d(i,["speechConfig"],Dp(A)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(t,["thinkingConfig"]);M!=null&&d(i,["thinkingConfig"],M);const R=l(t,["imageConfig"]);R!=null&&d(i,["imageConfig"],CM(R));const P=l(t,["enableEnhancedCivicAnswers"]);return P!=null&&d(i,["enableEnhancedCivicAnswers"],P),i}function ZN(e,t,n){const i={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],ve(o));const s=l(t,["temperature"]);s!=null&&d(i,["temperature"],s);const r=l(t,["topP"]);r!=null&&d(i,["topP"],r);const a=l(t,["topK"]);a!=null&&d(i,["topK"],a);const u=l(t,["candidateCount"]);u!=null&&d(i,["candidateCount"],u);const c=l(t,["maxOutputTokens"]);c!=null&&d(i,["maxOutputTokens"],c);const h=l(t,["stopSequences"]);h!=null&&d(i,["stopSequences"],h);const m=l(t,["responseLogprobs"]);m!=null&&d(i,["responseLogprobs"],m);const p=l(t,["logprobs"]);p!=null&&d(i,["logprobs"],p);const v=l(t,["presencePenalty"]);v!=null&&d(i,["presencePenalty"],v);const x=l(t,["frequencyPenalty"]);x!=null&&d(i,["frequencyPenalty"],x);const b=l(t,["seed"]);b!=null&&d(i,["seed"],b);const D=l(t,["responseMimeType"]);D!=null&&d(i,["responseMimeType"],D);const E=l(t,["responseSchema"]);E!=null&&d(i,["responseSchema"],Mp(E));const _=l(t,["responseJsonSchema"]);_!=null&&d(i,["responseJsonSchema"],_);const C=l(t,["routingConfig"]);C!=null&&d(i,["routingConfig"],C);const V=l(t,["modelSelectionConfig"]);V!=null&&d(i,["modelConfig"],V);const L=l(t,["safetySettings"]);if(n!==void 0&&L!=null){let H=L;Array.isArray(H)&&(H=H.map($=>$)),d(n,["safetySettings"],H)}const B=l(t,["tools"]);if(n!==void 0&&B!=null){let H=Ls(B);Array.isArray(H)&&(H=H.map($=>BS(Us($)))),d(n,["tools"],H)}const I=l(t,["toolConfig"]);n!==void 0&&I!=null&&d(n,["toolConfig"],I);const w=l(t,["labels"]);n!==void 0&&w!=null&&d(n,["labels"],w);const A=l(t,["cachedContent"]);n!==void 0&&A!=null&&d(n,["cachedContent"],ei(e,A));const M=l(t,["responseModalities"]);M!=null&&d(i,["responseModalities"],M);const R=l(t,["mediaResolution"]);R!=null&&d(i,["mediaResolution"],R);const P=l(t,["speechConfig"]);P!=null&&d(i,["speechConfig"],Dp(P));const N=l(t,["audioTimestamp"]);N!=null&&d(i,["audioTimestamp"],N);const gt=l(t,["thinkingConfig"]);gt!=null&&d(i,["thinkingConfig"],gt);const $e=l(t,["imageConfig"]);if($e!=null&&d(i,["imageConfig"],wM($e)),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function o0(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let r=rn(o);Array.isArray(r)&&(r=r.map(a=>sc(a))),d(n,["contents"],r)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],WN(e,s,n)),n}function s0(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["contents"]);if(o!=null){let r=rn(o);Array.isArray(r)&&(r=r.map(a=>a)),d(n,["contents"],r)}const s=l(t,["config"]);return s!=null&&d(n,["generationConfig"],ZN(e,s,n)),n}function r0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>TN(c))),d(t,["candidates"],u)}const o=l(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);const s=l(e,["promptFeedback"]);s!=null&&d(t,["promptFeedback"],s);const r=l(e,["responseId"]);r!=null&&d(t,["responseId"],r);const a=l(e,["usageMetadata"]);return a!=null&&d(t,["usageMetadata"],a),t}function a0(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>h)),d(t,["candidates"],c)}const o=l(e,["createTime"]);o!=null&&d(t,["createTime"],o);const s=l(e,["modelVersion"]);s!=null&&d(t,["modelVersion"],s);const r=l(e,["promptFeedback"]);r!=null&&d(t,["promptFeedback"],r);const a=l(e,["responseId"]);a!=null&&d(t,["responseId"],a);const u=l(e,["usageMetadata"]);return u!=null&&d(t,["usageMetadata"],u),t}function jN(e,t){const n={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=l(e,["numberOfImages"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const o=l(e,["aspectRatio"]);t!==void 0&&o!=null&&d(t,["parameters","aspectRatio"],o);const s=l(e,["guidanceScale"]);if(t!==void 0&&s!=null&&d(t,["parameters","guidanceScale"],s),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=l(e,["safetyFilterLevel"]);t!==void 0&&r!=null&&d(t,["parameters","safetySetting"],r);const a=l(e,["personGeneration"]);t!==void 0&&a!=null&&d(t,["parameters","personGeneration"],a);const u=l(e,["includeSafetyAttributes"]);t!==void 0&&u!=null&&d(t,["parameters","includeSafetyAttributes"],u);const c=l(e,["includeRaiReason"]);t!==void 0&&c!=null&&d(t,["parameters","includeRaiReason"],c);const h=l(e,["language"]);t!==void 0&&h!=null&&d(t,["parameters","language"],h);const m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","mimeType"],m);const p=l(e,["outputCompressionQuality"]);if(t!==void 0&&p!=null&&d(t,["parameters","outputOptions","compressionQuality"],p),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=l(e,["imageSize"]);if(t!==void 0&&v!=null&&d(t,["parameters","sampleImageSize"],v),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function tM(e,t){const n={},i=l(e,["outputGcsUri"]);t!==void 0&&i!=null&&d(t,["parameters","storageUri"],i);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&d(t,["parameters","negativePrompt"],o);const s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);const r=l(e,["aspectRatio"]);t!==void 0&&r!=null&&d(t,["parameters","aspectRatio"],r);const a=l(e,["guidanceScale"]);t!==void 0&&a!=null&&d(t,["parameters","guidanceScale"],a);const u=l(e,["seed"]);t!==void 0&&u!=null&&d(t,["parameters","seed"],u);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&d(t,["parameters","safetySetting"],c);const h=l(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&d(t,["parameters","includeSafetyAttributes"],m);const p=l(e,["includeRaiReason"]);t!==void 0&&p!=null&&d(t,["parameters","includeRaiReason"],p);const v=l(e,["language"]);t!==void 0&&v!=null&&d(t,["parameters","language"],v);const x=l(e,["outputMimeType"]);t!==void 0&&x!=null&&d(t,["parameters","outputOptions","mimeType"],x);const b=l(e,["outputCompressionQuality"]);t!==void 0&&b!=null&&d(t,["parameters","outputOptions","compressionQuality"],b);const D=l(e,["addWatermark"]);t!==void 0&&D!=null&&d(t,["parameters","addWatermark"],D);const E=l(e,["labels"]);t!==void 0&&E!=null&&d(t,["labels"],E);const _=l(e,["imageSize"]);t!==void 0&&_!=null&&d(t,["parameters","sampleImageSize"],_);const C=l(e,["enhancePrompt"]);return t!==void 0&&C!=null&&d(t,["parameters","enhancePrompt"],C),n}function eM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&jN(s,n),n}function nM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["config"]);return s!=null&&tM(s,n),n}function iM(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>mM(r))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],LS(o)),t}function oM(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>rc(r))),d(t,["generatedImages"],s)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&d(t,["positivePromptSafetyAttributes"],OS(o)),t}function sM(e,t){const n={},i=l(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(e,["durationSeconds"]);if(t!==void 0&&o!=null&&d(t,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);const r=l(e,["resolution"]);t!==void 0&&r!=null&&d(t,["parameters","resolution"],r);const a=l(e,["personGeneration"]);if(t!==void 0&&a!=null&&d(t,["parameters","personGeneration"],a),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=l(e,["negativePrompt"]);t!==void 0&&u!=null&&d(t,["parameters","negativePrompt"],u);const c=l(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&d(t,["parameters","enhancePrompt"],c),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=l(e,["lastFrame"]);t!==void 0&&h!=null&&d(t,["instances[0]","lastFrame"],ac(h));const m=l(e,["referenceImages"]);if(t!==void 0&&m!=null){let p=m;Array.isArray(p)&&(p=p.map(v=>aD(v))),d(t,["instances[0]","referenceImages"],p)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function rM(e,t){const n={},i=l(e,["numberOfVideos"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);const s=l(e,["fps"]);t!==void 0&&s!=null&&d(t,["parameters","fps"],s);const r=l(e,["durationSeconds"]);t!==void 0&&r!=null&&d(t,["parameters","durationSeconds"],r);const a=l(e,["seed"]);t!==void 0&&a!=null&&d(t,["parameters","seed"],a);const u=l(e,["aspectRatio"]);t!==void 0&&u!=null&&d(t,["parameters","aspectRatio"],u);const c=l(e,["resolution"]);t!==void 0&&c!=null&&d(t,["parameters","resolution"],c);const h=l(e,["personGeneration"]);t!==void 0&&h!=null&&d(t,["parameters","personGeneration"],h);const m=l(e,["pubsubTopic"]);t!==void 0&&m!=null&&d(t,["parameters","pubsubTopic"],m);const p=l(e,["negativePrompt"]);t!==void 0&&p!=null&&d(t,["parameters","negativePrompt"],p);const v=l(e,["enhancePrompt"]);t!==void 0&&v!=null&&d(t,["parameters","enhancePrompt"],v);const x=l(e,["generateAudio"]);t!==void 0&&x!=null&&d(t,["parameters","generateAudio"],x);const b=l(e,["lastFrame"]);t!==void 0&&b!=null&&d(t,["instances[0]","lastFrame"],mn(b));const D=l(e,["referenceImages"]);if(t!==void 0&&D!=null){let C=D;Array.isArray(C)&&(C=C.map(V=>lD(V))),d(t,["instances[0]","referenceImages"],C)}const E=l(e,["mask"]);t!==void 0&&E!=null&&d(t,["instances[0]","mask"],rD(E));const _=l(e,["compressionQuality"]);return t!==void 0&&_!=null&&d(t,["parameters","compressionQuality"],_),n}function aM(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response","generateVideoResponse"]);return r!=null&&d(t,["response"],fM(r)),t}function lM(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response"]);return r!=null&&d(t,["response"],dM(r)),t}function uM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],ac(s));const r=l(t,["video"]);r!=null&&d(n,["instances[0]","video"],GS(r));const a=l(t,["source"]);a!=null&&hM(a,n);const u=l(t,["config"]);return u!=null&&sM(u,n),n}function cM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const s=l(t,["image"]);s!=null&&d(n,["instances[0]","image"],mn(s));const r=l(t,["video"]);r!=null&&d(n,["instances[0]","video"],qS(r));const a=l(t,["source"]);a!=null&&pM(a,n);const u=l(t,["config"]);return u!=null&&rM(u,n),n}function fM(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>yM(r))),d(t,["generatedVideos"],s)}const i=l(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function dM(e){const t={},n=l(e,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>vM(r))),d(t,["generatedVideos"],s)}const i=l(e,["raiMediaFilteredCount"]);i!=null&&d(t,["raiMediaFilteredCount"],i);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function hM(e,t){const n={},i=l(e,["prompt"]);t!==void 0&&i!=null&&d(t,["instances[0]","prompt"],i);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],ac(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],GS(s)),n}function pM(e,t){const n={},i=l(e,["prompt"]);t!==void 0&&i!=null&&d(t,["instances[0]","prompt"],i);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],mn(o));const s=l(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],qS(s)),n}function mM(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],RM(n));const i=l(e,["raiFilteredReason"]);i!=null&&d(t,["raiFilteredReason"],i);const o=l(e,["_self"]);return o!=null&&d(t,["safetyAttributes"],LS(o)),t}function rc(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["image"],US(n));const i=l(e,["raiFilteredReason"]);i!=null&&d(t,["raiFilteredReason"],i);const o=l(e,["_self"]);o!=null&&d(t,["safetyAttributes"],OS(o));const s=l(e,["prompt"]);return s!=null&&d(t,["enhancedPrompt"],s),t}function gM(e){const t={},n=l(e,["_self"]);n!=null&&d(t,["mask"],US(n));const i=l(e,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(t,["labels"],o)}return t}function yM(e){const t={},n=l(e,["video"]);return n!=null&&d(t,["video"],oD(n)),t}function vM(e){const t={},n=l(e,["_self"]);return n!=null&&d(t,["video"],sD(n)),t}function _M(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);const i=l(e,["responseJsonSchema"]);i!=null&&d(t,["responseJsonSchema"],i);const o=l(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);const s=l(e,["candidateCount"]);s!=null&&d(t,["candidateCount"],s);const r=l(e,["enableAffectiveDialog"]);r!=null&&d(t,["enableAffectiveDialog"],r);const a=l(e,["frequencyPenalty"]);a!=null&&d(t,["frequencyPenalty"],a);const u=l(e,["logprobs"]);u!=null&&d(t,["logprobs"],u);const c=l(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);const h=l(e,["mediaResolution"]);h!=null&&d(t,["mediaResolution"],h);const m=l(e,["presencePenalty"]);m!=null&&d(t,["presencePenalty"],m);const p=l(e,["responseLogprobs"]);p!=null&&d(t,["responseLogprobs"],p);const v=l(e,["responseMimeType"]);v!=null&&d(t,["responseMimeType"],v);const x=l(e,["responseModalities"]);x!=null&&d(t,["responseModalities"],x);const b=l(e,["responseSchema"]);b!=null&&d(t,["responseSchema"],b);const D=l(e,["routingConfig"]);D!=null&&d(t,["routingConfig"],D);const E=l(e,["seed"]);E!=null&&d(t,["seed"],E);const _=l(e,["speechConfig"]);_!=null&&d(t,["speechConfig"],_);const C=l(e,["stopSequences"]);C!=null&&d(t,["stopSequences"],C);const V=l(e,["temperature"]);V!=null&&d(t,["temperature"],V);const L=l(e,["thinkingConfig"]);L!=null&&d(t,["thinkingConfig"],L);const B=l(e,["topK"]);B!=null&&d(t,["topK"],B);const I=l(e,["topP"]);if(I!=null&&d(t,["topP"],I),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function TM(e,t){const n={},i=l(t,["model"]);return i!=null&&d(n,["_url","name"],ht(e,i)),n}function EM(e,t){const n={},i=l(t,["model"]);return i!=null&&d(n,["_url","name"],ht(e,i)),n}function SM(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function AM(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function CM(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const i=l(e,["imageSize"]);if(i!=null&&d(t,["imageSize"],i),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function wM(e){const t={},n=l(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);const i=l(e,["imageSize"]);i!=null&&d(t,["imageSize"],i);const o=l(e,["outputMimeType"]);o!=null&&d(t,["imageOutputOptions","mimeType"],o);const s=l(e,["outputCompressionQuality"]);return s!=null&&d(t,["imageOutputOptions","compressionQuality"],s),t}function RM(e){const t={},n=l(e,["bytesBase64Encoded"]);n!=null&&d(t,["imageBytes"],qi(n));const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function US(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const i=l(e,["bytesBase64Encoded"]);i!=null&&d(t,["imageBytes"],qi(i));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function ac(e){const t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(e,["imageBytes"]);n!=null&&d(t,["bytesBase64Encoded"],qi(n));const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function mn(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["gcsUri"],n);const i=l(e,["imageBytes"]);i!=null&&d(t,["bytesBase64Encoded"],qi(i));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function IM(e,t,n){const i={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const r=l(t,["filter"]);n!==void 0&&r!=null&&d(n,["_query","filter"],r);const a=l(t,["queryBase"]);return n!==void 0&&a!=null&&d(n,["_url","models_url"],bS(e,a)),i}function xM(e,t,n){const i={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const s=l(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);const r=l(t,["filter"]);n!==void 0&&r!=null&&d(n,["_query","filter"],r);const a=l(t,["queryBase"]);return n!==void 0&&a!=null&&d(n,["_url","models_url"],bS(e,a)),i}function bM(e,t){const n={},i=l(t,["config"]);return i!=null&&IM(e,i,n),n}function NM(e,t){const n={},i=l(t,["config"]);return i!=null&&xM(e,i,n),n}function MM(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["_self"]);if(o!=null){let s=NS(o);Array.isArray(s)&&(s=s.map(r=>Qd(r))),d(t,["models"],s)}return t}function DM(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["_self"]);if(o!=null){let s=NS(o);Array.isArray(s)&&(s=s.map(r=>$d(r))),d(t,["models"],s)}return t}function VM(e){const t={},n=l(e,["maskMode"]);n!=null&&d(t,["maskMode"],n);const i=l(e,["segmentationClasses"]);i!=null&&d(t,["maskClasses"],i);const o=l(e,["maskDilation"]);return o!=null&&d(t,["dilation"],o),t}function Qd(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["displayName"]);i!=null&&d(t,["displayName"],i);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["version"]);s!=null&&d(t,["version"],s);const r=l(e,["_self"]);r!=null&&d(t,["tunedModelInfo"],$M(r));const a=l(e,["inputTokenLimit"]);a!=null&&d(t,["inputTokenLimit"],a);const u=l(e,["outputTokenLimit"]);u!=null&&d(t,["outputTokenLimit"],u);const c=l(e,["supportedGenerationMethods"]);c!=null&&d(t,["supportedActions"],c);const h=l(e,["temperature"]);h!=null&&d(t,["temperature"],h);const m=l(e,["maxTemperature"]);m!=null&&d(t,["maxTemperature"],m);const p=l(e,["topP"]);p!=null&&d(t,["topP"],p);const v=l(e,["topK"]);v!=null&&d(t,["topK"],v);const x=l(e,["thinking"]);return x!=null&&d(t,["thinking"],x),t}function $d(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["displayName"]);i!=null&&d(t,["displayName"],i);const o=l(e,["description"]);o!=null&&d(t,["description"],o);const s=l(e,["versionId"]);s!=null&&d(t,["version"],s);const r=l(e,["deployedModels"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>KN(p))),d(t,["endpoints"],m)}const a=l(e,["labels"]);a!=null&&d(t,["labels"],a);const u=l(e,["_self"]);u!=null&&d(t,["tunedModelInfo"],XM(u));const c=l(e,["defaultCheckpointId"]);c!=null&&d(t,["defaultCheckpointId"],c);const h=l(e,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(p=>p)),d(t,["checkpoints"],m)}return t}function PM(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=l(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],JN(s));const r=l(e,["functionCall"]);r!=null&&d(t,["functionCall"],QN(r));const a=l(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);const u=l(e,["inlineData"]);u!=null&&d(t,["inlineData"],_N(u));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const h=l(e,["thought"]);h!=null&&d(t,["thought"],h);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&d(t,["videoMetadata"],p),t}function kM(e){const t={},n=l(e,["productImage"]);return n!=null&&d(t,["image"],mn(n)),t}function UM(e,t){const n={},i=l(e,["numberOfImages"]);t!==void 0&&i!=null&&d(t,["parameters","sampleCount"],i);const o=l(e,["baseSteps"]);t!==void 0&&o!=null&&d(t,["parameters","baseSteps"],o);const s=l(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);const r=l(e,["seed"]);t!==void 0&&r!=null&&d(t,["parameters","seed"],r);const a=l(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&d(t,["parameters","safetySetting"],a);const u=l(e,["personGeneration"]);t!==void 0&&u!=null&&d(t,["parameters","personGeneration"],u);const c=l(e,["addWatermark"]);t!==void 0&&c!=null&&d(t,["parameters","addWatermark"],c);const h=l(e,["outputMimeType"]);t!==void 0&&h!=null&&d(t,["parameters","outputOptions","mimeType"],h);const m=l(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&d(t,["parameters","outputOptions","compressionQuality"],m);const p=l(e,["enhancePrompt"]);t!==void 0&&p!=null&&d(t,["parameters","enhancePrompt"],p);const v=l(e,["labels"]);return t!==void 0&&v!=null&&d(t,["labels"],v),n}function LM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["source"]);o!=null&&BM(o,n);const s=l(t,["config"]);return s!=null&&UM(s,n),n}function OM(e){const t={},n=l(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>rc(o))),d(t,["generatedImages"],i)}return t}function BM(e,t){const n={},i=l(e,["prompt"]);t!==void 0&&i!=null&&d(t,["instances[0]","prompt"],i);const o=l(e,["personImage"]);t!==void 0&&o!=null&&d(t,["instances[0]","personImage","image"],mn(o));const s=l(e,["productImages"]);if(t!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>kM(a))),d(t,["instances[0]","productImages"],r)}return n}function GM(e){const t={},n=l(e,["referenceImage"]);n!=null&&d(t,["referenceImage"],mn(n));const i=l(e,["referenceId"]);i!=null&&d(t,["referenceId"],i);const o=l(e,["referenceType"]);o!=null&&d(t,["referenceType"],o);const s=l(e,["maskImageConfig"]);s!=null&&d(t,["maskImageConfig"],VM(s));const r=l(e,["controlImageConfig"]);r!=null&&d(t,["controlImageConfig"],RN(r));const a=l(e,["styleImageConfig"]);a!=null&&d(t,["styleImageConfig"],a);const u=l(e,["subjectImageConfig"]);return u!=null&&d(t,["subjectImageConfig"],u),t}function LS(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const i=l(e,["safetyAttributes","scores"]);i!=null&&d(t,["scores"],i);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function OS(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&d(t,["categories"],n);const i=l(e,["safetyAttributes","scores"]);i!=null&&d(t,["scores"],i);const o=l(e,["contentType"]);return o!=null&&d(t,["contentType"],o),t}function qM(e){const t={},n=l(e,["category"]);if(n!=null&&d(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(e,["threshold"]);return i!=null&&d(t,["threshold"],i),t}function FM(e){const t={},n=l(e,["image"]);return n!=null&&d(t,["image"],mn(n)),t}function HM(e,t){const n={},i=l(e,["mode"]);t!==void 0&&i!=null&&d(t,["parameters","mode"],i);const o=l(e,["maxPredictions"]);t!==void 0&&o!=null&&d(t,["parameters","maxPredictions"],o);const s=l(e,["confidenceThreshold"]);t!==void 0&&s!=null&&d(t,["parameters","confidenceThreshold"],s);const r=l(e,["maskDilation"]);t!==void 0&&r!=null&&d(t,["parameters","maskDilation"],r);const a=l(e,["binaryColorThreshold"]);t!==void 0&&a!=null&&d(t,["parameters","binaryColorThreshold"],a);const u=l(e,["labels"]);return t!==void 0&&u!=null&&d(t,["labels"],u),n}function zM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["source"]);o!=null&&KM(o,n);const s=l(t,["config"]);return s!=null&&HM(s,n),n}function YM(e){const t={},n=l(e,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gM(o))),d(t,["generatedMasks"],i)}return t}function KM(e,t){const n={},i=l(e,["prompt"]);t!==void 0&&i!=null&&d(t,["instances[0]","prompt"],i);const o=l(e,["image"]);t!==void 0&&o!=null&&d(t,["instances[0]","image"],mn(o));const s=l(e,["scribbleImage"]);return t!==void 0&&s!=null&&d(t,["instances[0]","scribble"],FM(s)),n}function JM(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&d(t,["functionCallingConfig"],$N(n));const i=l(e,["retrievalConfig"]);return i!=null&&d(t,["retrievalConfig"],i),t}function QM(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["functionDeclarations"],h)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(e,["googleSearchRetrieval"]);i!=null&&d(t,["googleSearchRetrieval"],i);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const r=l(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],SM(a));const u=l(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],AM(u));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function BS(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>XN(p))),d(t,["functionDeclarations"],m)}const i=l(e,["retrieval"]);i!=null&&d(t,["retrieval"],i);const o=l(e,["googleSearchRetrieval"]);o!=null&&d(t,["googleSearchRetrieval"],o);const s=l(e,["computerUse"]);if(s!=null&&d(t,["computerUse"],s),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(e,["codeExecution"]);r!=null&&d(t,["codeExecution"],r);const a=l(e,["enterpriseWebSearch"]);a!=null&&d(t,["enterpriseWebSearch"],a);const u=l(e,["googleMaps"]);u!=null&&d(t,["googleMaps"],u);const c=l(e,["googleSearch"]);c!=null&&d(t,["googleSearch"],c);const h=l(e,["urlContext"]);return h!=null&&d(t,["urlContext"],h),t}function $M(e){const t={},n=l(e,["baseModel"]);n!=null&&d(t,["baseModel"],n);const i=l(e,["createTime"]);i!=null&&d(t,["createTime"],i);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function XM(e){const t={},n=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(t,["baseModel"],n);const i=l(e,["createTime"]);i!=null&&d(t,["createTime"],i);const o=l(e,["updateTime"]);return o!=null&&d(t,["updateTime"],o),t}function WM(e,t){const n={},i=l(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function ZM(e,t){const n={},i=l(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);const o=l(e,["description"]);t!==void 0&&o!=null&&d(t,["description"],o);const s=l(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),n}function jM(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","name"],ht(e,i));const o=l(t,["config"]);return o!=null&&WM(o,n),n}function tD(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["config"]);return o!=null&&ZM(o,n),n}function eD(e,t){const n={},i=l(e,["outputGcsUri"]);t!==void 0&&i!=null&&d(t,["parameters","storageUri"],i);const o=l(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&d(t,["parameters","safetySetting"],o);const s=l(e,["personGeneration"]);t!==void 0&&s!=null&&d(t,["parameters","personGeneration"],s);const r=l(e,["includeRaiReason"]);t!==void 0&&r!=null&&d(t,["parameters","includeRaiReason"],r);const a=l(e,["outputMimeType"]);t!==void 0&&a!=null&&d(t,["parameters","outputOptions","mimeType"],a);const u=l(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&d(t,["parameters","outputOptions","compressionQuality"],u);const c=l(e,["enhanceInputImage"]);t!==void 0&&c!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],c);const h=l(e,["imagePreservationFactor"]);t!==void 0&&h!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],h);const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const p=l(e,["numberOfImages"]);t!==void 0&&p!=null&&d(t,["parameters","sampleCount"],p);const v=l(e,["mode"]);return t!==void 0&&v!=null&&d(t,["parameters","mode"],v),n}function nD(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["_url","model"],ht(e,i));const o=l(t,["image"]);o!=null&&d(n,["instances[0]","image"],mn(o));const s=l(t,["upscaleFactor"]);s!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],s);const r=l(t,["config"]);return r!=null&&eD(r,n),n}function iD(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>rc(s))),d(t,["generatedImages"],o)}return t}function oD(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const i=l(e,["encodedVideo"]);i!=null&&d(t,["videoBytes"],qi(i));const o=l(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function sD(e){const t={},n=l(e,["gcsUri"]);n!=null&&d(t,["uri"],n);const i=l(e,["bytesBase64Encoded"]);i!=null&&d(t,["videoBytes"],qi(i));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}function rD(e){const t={},n=l(e,["image"]);n!=null&&d(t,["_self"],mn(n));const i=l(e,["maskMode"]);return i!=null&&d(t,["maskMode"],i),t}function aD(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],ac(n));const i=l(e,["referenceType"]);return i!=null&&d(t,["referenceType"],i),t}function lD(e){const t={},n=l(e,["image"]);n!=null&&d(t,["image"],mn(n));const i=l(e,["referenceType"]);return i!=null&&d(t,["referenceType"],i),t}function GS(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["uri"],n);const i=l(e,["videoBytes"]);i!=null&&d(t,["encodedVideo"],qi(i));const o=l(e,["mimeType"]);return o!=null&&d(t,["encoding"],o),t}function qS(e){const t={},n=l(e,["uri"]);n!=null&&d(t,["gcsUri"],n);const i=l(e,["videoBytes"]);i!=null&&d(t,["bytesBase64Encoded"],qi(i));const o=l(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uD(e,t){const n={},i=l(e,["displayName"]);return t!==void 0&&i!=null&&d(t,["displayName"],i),n}function cD(e){const t={},n=l(e,["config"]);return n!=null&&uD(n,t),t}function fD(e,t){const n={},i=l(e,["force"]);return t!==void 0&&i!=null&&d(t,["_query","force"],i),n}function dD(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const i=l(e,["config"]);return i!=null&&fD(i,t),t}function hD(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function pD(e,t){const n={},i=l(e,["customMetadata"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["customMetadata"],s)}const o=l(e,["chunkingConfig"]);return t!==void 0&&o!=null&&d(t,["chunkingConfig"],o),n}function mD(e){const t={},n=l(e,["name"]);n!=null&&d(t,["name"],n);const i=l(e,["metadata"]);i!=null&&d(t,["metadata"],i);const o=l(e,["done"]);o!=null&&d(t,["done"],o);const s=l(e,["error"]);s!=null&&d(t,["error"],s);const r=l(e,["response"]);return r!=null&&d(t,["response"],yD(r)),t}function gD(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const i=l(e,["fileName"]);i!=null&&d(t,["fileName"],i);const o=l(e,["config"]);return o!=null&&pD(o,t),t}function yD(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["parent"]);i!=null&&d(t,["parent"],i);const o=l(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function vD(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function _D(e){const t={},n=l(e,["config"]);return n!=null&&vD(n,t),t}function TD(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["fileSearchStores"],s)}return t}function FS(e,t){const n={},i=l(e,["mimeType"]);t!==void 0&&i!=null&&d(t,["mimeType"],i);const o=l(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);const s=l(e,["customMetadata"]);if(t!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),d(t,["customMetadata"],a)}const r=l(e,["chunkingConfig"]);return t!==void 0&&r!=null&&d(t,["chunkingConfig"],r),n}function ED(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);const i=l(e,["config"]);return i!=null&&FS(i,t),t}function SD(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AD="Content-Type",CD="X-Server-Timeout",wD="User-Agent",Xd="x-goog-api-client",RD="1.34.0",ID=`google-genai-sdk/${RD}`,xD="v1beta1",bD="v1beta";class ND{constructor(t){var n,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xD,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:bD,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);if(t.queryParams)for(const[r,a]of Object.entries(t.queryParams))o.searchParams.append(r,String(a));let s={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=t.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.unaryApiCall(o,s,t.httpMethod)}patchHttpOptions(t,n){const i=JSON.parse(JSON.stringify(t));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=t.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),t.abortSignal),this.streamApiCall(o,s,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,i,o){if(n&&n.timeout||o){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),t.signal=r}return n&&n.extraBody!==null&&MD(t,n.extraBody),t.headers=await this.getHeadersInternal(n,i),t}async unaryApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await l0(o),new Yd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await l0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return dn(this,arguments,function*(){var i;const o=(i=t==null?void 0:t.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="";const a="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:h}=yield W(o.read());if(c){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=s.decode(h,{stream:!0});try{const x=JSON.parse(m);if("error"in x){const b=JSON.parse(JSON.stringify(x.error)),D=b.status,E=b.code,_=`got status: ${D}. ${JSON.stringify(x)}`;if(E>=400&&E<600)throw new oc({message:_,status:E})}}catch(x){if(x.name==="ApiError")throw x}r+=m;let p=-1,v=0;for(;;){p=-1,v=0;for(const D of u){const E=r.indexOf(D);E!==-1&&(p===-1||E<p)&&(p=E,v=D.length)}if(p===-1)break;const x=r.substring(0,p);r=r.substring(p+v);const b=x.trim();if(b.startsWith(a)){const D=b.substring(a.length).trim();try{const E=new Response(D,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield W(new Yd(E))}catch(E){throw new Error(`exception parsing stream chunk ${D}. ${E}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},n=ID+" "+this.clientOptions.userAgentExtra;return t[wD]=n,t[Xd]=n,t[AD]="application/json",t}async getHeadersInternal(t,n){const i=new Headers;if(t&&t.headers){for(const[o,s]of Object.entries(t.headers))i.append(o,s);t.timeout&&t.timeout>0&&i.append(CD,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(t){var n;let i="";return typeof t=="string"&&(i=t.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(t,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,r=await s.stat(t);o.sizeBytes=String(r.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const u={file:o},c=this.getFileName(t),h=z("upload/v1beta/files",u._url),m=await this.fetchUploadUrl(h,o.sizeBytes,o.mimeType,c,u,n==null?void 0:n.httpOptions);return s.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,i){var o;const s=this.clientOptions.uploader,r=await s.stat(n),a=String(r.size),u=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:r.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,h=this.getFileName(n),m={};i!=null&&FS(i,m);const p=await this.fetchUploadUrl(c,a,u,h,m,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,p,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,i,o,s,r){var a;let u={};r?u=r:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:t,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function l0(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let i;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await e.json():i={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new oc({message:o,status:n}):new Error(o)}}function MD(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const s=JSON.parse(e.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){const a=Object.assign({},s);for(const u in r)if(Object.prototype.hasOwnProperty.call(r,u)){const c=r[u],h=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[u]=i(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}const o=i(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DD="mcp_used/unknown";let VD=!1;function HS(e){for(const t of e)if(PD(t)||typeof t=="object"&&"inputSchema"in t)return!0;return VD}function zS(e){var t;const n=(t=e[Xd])!==null&&t!==void 0?t:"";e[Xd]=(n+` ${DD}`).trimStart()}function PD(e){return e!==null&&typeof e=="object"&&e instanceof Pp}function kD(e){return dn(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){const r=yield W(n.listTools({cursor:o}));for(const a of r.tools)yield yield W(a),s++;if(!r.nextCursor)break;o=r.nextCursor}})}class Pp{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Pp(t,n)}async initialize(){var t,n,i,o;if(this.mcpTools.length>0)return;const s={},r=[];for(const h of this.mcpClients)try{for(var a=!0,u=(n=void 0,hn(kD(h))),c;c=await u.next(),t=c.done,!t;a=!0){o=c.value,a=!1;const m=o;r.push(m);const p=m.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=h}}catch(m){n={error:m}}finally{try{!a&&!t&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),hb(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UD(e,t,n){const i=new sb;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),t(i)}class LD{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i}async connect(t){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=GD(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(C=>{c=C}),m=t.callbacks,p=function(){c({})},v=this.apiClient,x={onopen:p,onmessage:C=>{UD(v,m.onmessage,C)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(C){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(C){}},b=this.webSocketFactory.create(u,BD(r),x);b.connect(),await h;const _={setup:{model:ht(this.apiClient,t.model)}};return b.send(JSON.stringify(_)),new OD(b,this.apiClient)}}class OD{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=cN(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=uN(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Wo.PLAY)}pause(){this.sendPlaybackControl(Wo.PAUSE)}stop(){this.sendPlaybackControl(Wo.STOP)}resetContext(){this.sendPlaybackControl(Wo.RESET_CONTEXT)}close(){this.conn.close()}}function BD(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function GD(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FD(e,t,n){const i=new ob;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(e.isVertexAI()){const r=hN(s);Object.assign(i,r)}else Object.assign(i,s);t(i)}class HD{constructor(t,n,i){this.apiClient=t,this.auth=n,this.webSocketFactory=i,this.music=new LD(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,i,o,s,r,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&HS(t.config.tools)&&zS(m);const p=JD(m);if(this.apiClient.isVertexAI())h=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,h);else{const A=this.apiClient.getApiKey();let M="BidiGenerateContent",R="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",R="access_token"),h=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${M}?${R}=${A}`}let v=()=>{};const x=new Promise(A=>{v=A}),b=t.callbacks,D=function(){var A;(A=b==null?void 0:b.onopen)===null||A===void 0||A.call(b),v({})},E=this.apiClient,_={onopen:D,onmessage:A=>{FD(E,b.onmessage,A)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(A){}},C=this.webSocketFactory.create(h,KD(p),_);C.connect(),await x;let V=ht(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const A=this.apiClient.getProject(),M=this.apiClient.getLocation();V=`projects/${A}/locations/${M}/`+V}let L={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Eu.AUDIO]}:t.config.responseModalities=[Eu.AUDIO]),!((s=t.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(a=(r=t.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],I=[];for(const A of B)if(this.isCallableTool(A)){const M=A;I.push(await M.tool())}else I.push(A);I.length>0&&(t.config.tools=I);const w={model:V,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?L=lN(this.apiClient,w):L=aN(this.apiClient,w),delete L.config,C.send(JSON.stringify(L)),new YD(C,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const zD={turnComplete:!0};class YD{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=rn(n.turns),t.isVertexAI()||(i=i.map(o=>sc(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!t.isVertexAI()&&!("id"in s))throw new Error(qD)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},zD),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:dN(t)}:n={realtimeInput:fN(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function KD(e){const t={};return e.forEach((n,i)=>{t[i]=n}),t}function JD(e){const t=new Headers;for(const[n,i]of Object.entries(e))t.append(n,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u0=10;function c0(e){var t,n,i;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const r of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(as(r)){o=!0;break}if(!o)return!0;const s=(i=e==null?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function as(e){return"callTool"in e&&typeof e.callTool=="function"}function QD(e){var t,n,i;return(i=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>as(o)))!==null&&i!==void 0?i:!1}function f0(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((i,o)=>{if(as(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function d0(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $D extends ti{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var i,o,s,r,a;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!QD(n)||c0(n.config))return await this.generateContentInternal(u);const c=f0(n);if(c.length>0){const b=c.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let h,m;const p=rn(u.contents),v=(s=(o=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:u0;let x=0;for(;x<v&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const b=h.candidates[0].content,D=[];for(const E of(a=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(as(E)){const C=await E.callTool(h.functionCalls);D.push(...C)}x++,m={role:"user",parts:D},u.contents=rn(u.contents),u.contents.push(b),u.contents.push(m),d0(u.config)&&(p.push(b),p.push(m))}return d0(u.config)&&(h.automaticFunctionCallingHistory=p),h},this.generateContentStream=async n=>{var i,o,s,r,a;if(this.maybeMoveToResponseJsonSchem(n),c0(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const u=f0(n);if(u.length>0){const m=u.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,h=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const r=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((o=u==null?void 0:u.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=u==null?void 0:u.safetyAttributes:r.push(u);let a;return s?a={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new So($n.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,a,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0)&&r.uri&&(!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,i,o;const s=(n=t.config)===null||n===void 0?void 0:n.tools;if(!s)return t;const r=await Promise.all(s.map(async u=>as(u)?await u.tool():u)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:r})};if(a.config.tools=r,t.config&&t.config.tools&&HS(t.config.tools)){const u=(o=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),zS(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,i,o;const s=new Map;for(const r of(i=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(as(r)){const a=r,u=await a.tool();for(const c of(o=u.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(t){var n,i,o;const s=(o=(i=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:u0;let r=!1,a=0;const u=await this.initAfcToolsMap(t);return function(c,h,m){return dn(this,arguments,function*(){for(var p,v,x,b,D,E;a<s;){r&&(a++,r=!1);const L=yield W(c.processParamsMaybeAddMcpUsage(m)),B=yield W(c.generateContentStreamInternal(L)),I=[],w=[];try{for(var _=!0,C=(v=void 0,hn(B)),V;V=yield W(C.next()),p=V.done,!p;_=!0){b=V.value,_=!1;const A=b;if(yield yield W(A),A.candidates&&(!((D=A.candidates[0])===null||D===void 0)&&D.content)){w.push(A.candidates[0].content);for(const M of(E=A.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(a<s&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(M.functionCall.name)){const R=yield W(h.get(M.functionCall.name).callTool([M.functionCall]));I.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(A){v={error:A}}finally{try{!_&&!p&&(x=C.return)&&(yield W(x.call(C)))}finally{if(v)throw v.error}}if(I.length>0){r=!0;const A=new ur;A.candidates=[{content:{role:"user",parts:I}}],yield yield W(A);const M=[];M.push(...w),M.push({role:"user",parts:I});const R=rn(m.contents).concat(M);m.contents=R}else break}})}(this,u,t)}async generateContentInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=s0(this.apiClient,t);return a=z("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=a0(h),p=new ur;return Object.assign(p,m),p})}else{const c=o0(this.apiClient,t);return a=z("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=r0(h),p=new ur;return Object.assign(p,m),p})}}async generateContentStreamInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=s0(this.apiClient,t);return a=z("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(m){return dn(this,arguments,function*(){var p,v,x,b;try{for(var D=!0,E=hn(m),_;_=yield W(E.next()),p=_.done,!p;D=!0){b=_.value,D=!1;const C=b,V=a0(yield W(C.json()));V.sdkHttpResponse={headers:C.headers};const L=new ur;Object.assign(L,V),yield yield W(L)}}catch(C){v={error:C}}finally{try{!D&&!p&&(x=E.return)&&(yield W(x.call(E)))}finally{if(v)throw v.error}}})})}else{const c=o0(this.apiClient,t);return a=z("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(m){return dn(this,arguments,function*(){var p,v,x,b;try{for(var D=!0,E=hn(m),_;_=yield W(E.next()),p=_.done,!p;D=!0){b=_.value,D=!1;const C=b,V=r0(yield W(C.json()));V.sdkHttpResponse={headers:C.headers};const L=new ur;Object.assign(L,V),yield yield W(L)}}catch(C){v={error:C}}finally{try{!D&&!p&&(x=E.return)&&(yield W(x.call(E)))}finally{if(v)throw v.error}}})})}}async embedContent(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=HN(this.apiClient,t);return a=z("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=YN(h),p=new qv;return Object.assign(p,m),p})}else{const c=FN(this.apiClient,t);return a=z("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=zN(h),p=new qv;return Object.assign(p,m),p})}}async generateImagesInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=nM(this.apiClient,t);return a=z("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=oM(h),p=new Fv;return Object.assign(p,m),p})}else{const c=eM(this.apiClient,t);return a=z("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=iM(h),p=new Fv;return Object.assign(p,m),p})}}async editImageInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=ON(this.apiClient,t);return s=z("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=BN(u),h=new Jx;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=nD(this.apiClient,t);return s=z("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=iD(u),h=new Qx;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=LM(this.apiClient,t);return s=z("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=OM(u),h=new $x;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=zM(this.apiClient,t);return s=z("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=YM(u),h=new Xx;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=EM(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>$d(h))}else{const c=TM(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Qd(h))}}async listInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=NM(this.apiClient,t);return a=z("{models_url}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=DM(h),p=new Hv;return Object.assign(p,m),p})}else{const c=bM(this.apiClient,t);return a=z("{models_url}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=MM(h),p=new Hv;return Object.assign(p,m),p})}}async update(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=tD(this.apiClient,t);return a=z("{model}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>$d(h))}else{const c=jM(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Qd(h))}}async delete(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=PN(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=UN(h),p=new zv;return Object.assign(p,m),p})}else{const c=VN(this.apiClient,t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=kN(h),p=new zv;return Object.assign(p,m),p})}}async countTokens(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=NN(this.apiClient,t);return a=z("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=DN(h),p=new Yv;return Object.assign(p,m),p})}else{const c=bN(this.apiClient,t);return a=z("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=MN(h),p=new Yv;return Object.assign(p,m),p})}}async computeTokens(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=SN(this.apiClient,t);return s=z("{model}:computeTokens",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=AN(u),h=new Wx;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=cM(this.apiClient,t);return a=z("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const m=lM(h),p=new Su;return Object.assign(p,m),p})}else{const c=uM(this.apiClient,t);return a=z("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const m=aM(h),p=new Su;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XD extends ti{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,i=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=qx(t);return a=z("{operationName}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else{const c=Gx(t);return a=z("{operationName}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r}}async fetchPredictVideosOperationInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=Vx(t);return s=z("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WD(e){const t={},n=l(e,["data"]);if(n!=null&&d(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function ZD(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>a2(s))),d(t,["parts"],o)}const i=l(e,["role"]);return i!=null&&d(t,["role"],i),t}function jD(e,t,n){const i={},o=l(t,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const s=l(t,["newSessionExpireTime"]);n!==void 0&&s!=null&&d(n,["newSessionExpireTime"],s);const r=l(t,["uses"]);n!==void 0&&r!=null&&d(n,["uses"],r);const a=l(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],r2(e,a));const u=l(t,["lockAdditionalFields"]);return n!==void 0&&u!=null&&d(n,["fieldMask"],u),i}function t2(e,t){const n={},i=l(t,["config"]);return i!=null&&d(n,["config"],jD(e,i,n)),n}function e2(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);const i=l(e,["mimeType"]);return i!=null&&d(t,["mimeType"],i),t}function n2(e){const t={},n=l(e,["id"]);n!=null&&d(t,["id"],n);const i=l(e,["args"]);i!=null&&d(t,["args"],i);const o=l(e,["name"]);if(o!=null&&d(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function i2(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function o2(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function s2(e,t){const n={},i=l(e,["generationConfig"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig"],i);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);const s=l(e,["temperature"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","temperature"],s);const r=l(e,["topP"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig","topP"],r);const a=l(e,["topK"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topK"],a);const u=l(e,["maxOutputTokens"]);t!==void 0&&u!=null&&d(t,["setup","generationConfig","maxOutputTokens"],u);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);const h=l(e,["seed"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","seed"],h);const m=l(e,["speechConfig"]);t!==void 0&&m!=null&&d(t,["setup","generationConfig","speechConfig"],Vp(m));const p=l(e,["thinkingConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","thinkingConfig"],p);const v=l(e,["enableAffectiveDialog"]);t!==void 0&&v!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],v);const x=l(e,["systemInstruction"]);t!==void 0&&x!=null&&d(t,["setup","systemInstruction"],ZD(ve(x)));const b=l(e,["tools"]);if(t!==void 0&&b!=null){let B=Ls(b);Array.isArray(B)&&(B=B.map(I=>u2(Us(I)))),d(t,["setup","tools"],B)}const D=l(e,["sessionResumption"]);t!==void 0&&D!=null&&d(t,["setup","sessionResumption"],l2(D));const E=l(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&d(t,["setup","inputAudioTranscription"],E);const _=l(e,["outputAudioTranscription"]);t!==void 0&&_!=null&&d(t,["setup","outputAudioTranscription"],_);const C=l(e,["realtimeInputConfig"]);t!==void 0&&C!=null&&d(t,["setup","realtimeInputConfig"],C);const V=l(e,["contextWindowCompression"]);t!==void 0&&V!=null&&d(t,["setup","contextWindowCompression"],V);const L=l(e,["proactivity"]);if(t!==void 0&&L!=null&&d(t,["setup","proactivity"],L),l(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function r2(e,t){const n={},i=l(t,["model"]);i!=null&&d(n,["setup","model"],ht(e,i));const o=l(t,["config"]);return o!=null&&d(n,["config"],s2(o,n)),n}function a2(e){const t={},n=l(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);const i=l(e,["codeExecutionResult"]);i!=null&&d(t,["codeExecutionResult"],i);const o=l(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);const s=l(e,["fileData"]);s!=null&&d(t,["fileData"],e2(s));const r=l(e,["functionCall"]);r!=null&&d(t,["functionCall"],n2(r));const a=l(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);const u=l(e,["inlineData"]);u!=null&&d(t,["inlineData"],WD(u));const c=l(e,["text"]);c!=null&&d(t,["text"],c);const h=l(e,["thought"]);h!=null&&d(t,["thought"],h);const m=l(e,["thoughtSignature"]);m!=null&&d(t,["thoughtSignature"],m);const p=l(e,["videoMetadata"]);return p!=null&&d(t,["videoMetadata"],p),t}function l2(e){const t={},n=l(e,["handle"]);if(n!=null&&d(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function u2(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>m)),d(t,["functionDeclarations"],h)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(e,["googleSearchRetrieval"]);i!=null&&d(t,["googleSearchRetrieval"],i);const o=l(e,["computerUse"]);o!=null&&d(t,["computerUse"],o);const s=l(e,["fileSearch"]);s!=null&&d(t,["fileSearch"],s);const r=l(e,["codeExecution"]);if(r!=null&&d(t,["codeExecution"],r),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],i2(a));const u=l(e,["googleSearch"]);u!=null&&d(t,["googleSearch"],o2(u));const c=l(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);t.push(...o)}else t.push(n)}return t.join(",")}function f2(e,t){let n=null;const i=e.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(e.bidiGenerateContentSetup=s,n=s):delete e.bidiGenerateContentSetup}else i!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const s=c2(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)s?e.fieldMask=s:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(c=>r.includes(c)?`generationConfig.${c}`:c));const u=[];s&&u.push(s),a.length>0&&u.push(...a),u.length>0?e.fieldMask=u.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class d2 extends ti{constructor(t){super(),this.apiClient=t}async create(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=t2(this.apiClient,t);s=z("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const u=f2(a,t.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h2(e,t){const n={},i=l(e,["force"]);return t!==void 0&&i!=null&&d(t,["_query","force"],i),n}function p2(e){const t={},n=l(e,["name"]);n!=null&&d(t,["_url","name"],n);const i=l(e,["config"]);return i!=null&&h2(i,t),t}function m2(e){const t={},n=l(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function g2(e,t){const n={},i=l(e,["pageSize"]);t!==void 0&&i!=null&&d(t,["_query","pageSize"],i);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function y2(e){const t={},n=l(e,["parent"]);n!=null&&d(t,["_url","parent"],n);const i=l(e,["config"]);return i!=null&&g2(i,t),t}function v2(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);const i=l(e,["nextPageToken"]);i!=null&&d(t,["nextPageToken"],i);const o=l(e,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),d(t,["documents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _2 extends ti{constructor(t){super(),this.apiClient=t,this.list=async n=>new So($n.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=m2(t);return s=z("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(t){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=p2(t);o=z("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=y2(t);return s=z("{parent}/documents",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=v2(u),h=new Zx;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends ti{constructor(t,n=new _2(t)){super(),this.apiClient=t,this.documents=n,this.list=async(i={})=>new So($n.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cD(t);return s=z("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hD(t);return s=z("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(t){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=dD(t);o=z("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_D(t);return s=z("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=TD(u),h=new jx;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ED(t);return s=z("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=SD(u),h=new tb;return Object.assign(h,c),h})}}async importFile(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gD(t);return s=z("{file_search_store_name}:importFile",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=mD(u),h=new xp;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let YS=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return YS=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const E2=()=>YS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wd(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Zd=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ln extends Error{}class Ce extends ln{constructor(t,n,i,o){super(`${Ce.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new lc({message:i,cause:Zd(n)});const s=n;return t===400?new JS(t,s,i,o):t===401?new QS(t,s,i,o):t===403?new $S(t,s,i,o):t===404?new XS(t,s,i,o):t===409?new WS(t,s,i,o):t===422?new ZS(t,s,i,o):t===429?new jS(t,s,i,o):t>=500?new tA(t,s,i,o):new Ce(t,s,i,o)}}class jd extends Ce{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class lc extends Ce{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class KS extends lc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class JS extends Ce{}class QS extends Ce{}class $S extends Ce{}class XS extends Ce{}class WS extends Ce{}class ZS extends Ce{}class jS extends Ce{}class tA extends Ce{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S2=/^[a-z][a-z0-9+.-]*:/i,A2=e=>S2.test(e);let th=e=>(th=Array.isArray,th(e));const C2=th;let w2=C2;const h0=w2;function R2(e){if(!e)return!0;for(const t in e)return!1;return!0}function I2(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const x2=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ln(`${e} must be an integer`);if(t<0)throw new ln(`${e} must be a positive integer`);return t},b2=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N2=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ko="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const D2=()=>{var e,t,n,i,o;const s=M2();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":m0(Deno.build.os),"X-Stainless-Arch":p0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":m0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":p0((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const r=V2();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function V2(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,s=i[2]||0,r=i[3]||0;return{browser:t,version:`${o}.${s}.${r}`}}}return null}const p0=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",m0=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let cl;const P2=()=>cl??(cl=D2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function eA(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function U2(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return eA({start(){},async pull(n){const{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function nA(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function L2(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const i=e.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O2=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iA=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Vf(e,t,n){return iA(),new File(e,t??"unknown_file",n)}function B2(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const G2=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oA=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",q2=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&oA(e),F2=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function H2(e,t,n){if(iA(),e=await e,q2(e))return e instanceof File?e:Vf([await e.arrayBuffer()],e.name);if(F2(e)){const o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Vf(await eh(o),t,n)}const i=await eh(e);if(t||(t=B2(e)),!(n!=null&&n.type)){const o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Vf(i,t,n)}async function eh(e){var t,n,i,o,s;let r=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)r.push(e);else if(oA(e))r.push(e instanceof Blob?e:await e.arrayBuffer());else if(G2(e))try{for(var a=!0,u=hn(e),c;c=await u.next(),t=c.done,!t;a=!0){o=c.value,a=!1;const h=o;r.push(...await eh(h))}}catch(h){n={error:h}}finally{try{!a&&!t&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}else{const h=(s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof e}${h?`; constructor: ${h}`:""}${z2(e)}`)}return r}function z2(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sA{constructor(t){this._client=t}}sA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rA(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const g0=Object.freeze(Object.create(null)),Y2=(e=rA)=>function(n,...i){if(n.length===1)return n[0];let o=!1;const s=[],r=n.reduce((h,m,p)=>{var v,x,b;/[?#]/.test(m)&&(o=!0);const D=i[p];let E=(o?encodeURIComponent:e)(""+D);return p!==i.length&&(D==null||typeof D=="object"&&D.toString===((b=Object.getPrototypeOf((x=Object.getPrototypeOf((v=D.hasOwnProperty)!==null&&v!==void 0?v:g0))!==null&&x!==void 0?x:g0))===null||b===void 0?void 0:b.toString))&&(E=D+"",s.push({start:h.length+m.length,length:E.length,error:`Value of type ${Object.prototype.toString.call(D).slice(8,-1)} is not a valid path parameter`})),h+m+(p===i.length?"":E)},""),a=r.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(a))!==null;)s.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(s.sort((h,m)=>h.start-m.start),s.length>0){let h=0;const m=s.reduce((p,v)=>{const x=" ".repeat(v.start-h),b="^".repeat(v.length);return h=v.start+v.length,p+x+b},"");throw new ln(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${r}
${m}`)}return r},fl=Y2(rA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aA extends sA{create(t,n){var i;const{api_version:o=this._client.apiVersion}=t,s=Cu(t,["api_version"]);if("model"in s&&"agent_config"in s)throw new ln("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new ln("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(fl`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=t.stream)!==null&&i!==void 0?i:!1}))}delete(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(fl`/${o}/interactions/${t}`,i)}cancel(t,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(fl`/${o}/interactions/${t}/cancel`,i)}get(t,n={},i){var o;const s=n??{},{api_version:r=this._client.apiVersion}=s,a=Cu(s,["api_version"]);return this._client.get(fl`/${r}/interactions/${t}`,Object.assign(Object.assign({query:a},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}aA._key=Object.freeze(["interactions"]);class lA extends aA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K2(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let i=0;for(const o of e)n.set(o,i),i+=o.length;return n}let dl;function kp(e){let t;return(dl??(t=new globalThis.TextEncoder,dl=t.encode.bind(t)))(e)}let hl;function y0(e){let t;return(hl??(t=new globalThis.TextDecoder,hl=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?kp(t):t;this.buffer=K2([this.buffer,n]);const i=[];let o;for(;(o=J2(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(y0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,r=y0(this.buffer.subarray(0,s));i.push(r),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}uc.NEWLINE_CHARS=new Set([`
`,"\r"]);uc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function J2(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Q2(e){for(let i=0;i<e.length-1;i++){if(e[i]===10&&e[i+1]===10||e[i]===13&&e[i+1]===13)return i+2;if(e[i]===13&&e[i+1]===10&&i+3<e.length&&e[i+2]===13&&e[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wu={off:0,error:200,warn:300,info:400,debug:500},v0=(e,t,n)=>{if(e){if(I2(wu,e))return e;Se(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(wu))}`)}};function vr(){}function pl(e,t,n){return!t||wu[e]>wu[n]?vr:t[e].bind(t)}const $2={error:vr,warn:vr,info:vr,debug:vr};let _0=new WeakMap;function Se(e){var t;const n=e.logger,i=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return $2;const o=_0.get(n);if(o&&o[0]===i)return o[1];const s={error:pl("error",n,i),warn:pl("warn",n,i),info:pl("info",n,i),debug:pl("debug",n,i)};return _0.set(n,[i,s]),s}const Zi=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zo{constructor(t,n,i){this.iterator=t,this.controller=n,this.client=i}static fromSSEResponse(t,n,i){let o=!1;const s=i?Se(i):console;function r(){return dn(this,arguments,function*(){var u,c,h,m;if(o)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var v=!0,x=hn(X2(t,n)),b;b=yield W(x.next()),u=b.done,!u;v=!0){m=b.value,v=!1;const D=m;if(!p)if(D.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield W(JSON.parse(D.data))}catch(E){throw s.error("Could not parse message into JSON:",D.data),s.error("From chunk:",D.raw),E}}}catch(D){c={error:D}}finally{try{!v&&!u&&(h=x.return)&&(yield W(h.call(x)))}finally{if(c)throw c.error}}p=!0}catch(D){if(Wd(D))return yield W(void 0);throw D}finally{p||n.abort()}})}return new Zo(r,n,i)}static fromReadableStream(t,n,i){let o=!1;function s(){return dn(this,arguments,function*(){var u,c,h,m;const p=new uc,v=nA(t);try{for(var x=!0,b=hn(v),D;D=yield W(b.next()),u=D.done,!u;x=!0){m=D.value,x=!1;const E=m;for(const _ of p.decode(E))yield yield W(_)}}catch(E){c={error:E}}finally{try{!x&&!u&&(h=b.return)&&(yield W(h.call(b)))}finally{if(c)throw c.error}}for(const E of p.flush())yield yield W(E)})}function r(){return dn(this,arguments,function*(){var u,c,h,m;if(o)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var v=!0,x=hn(s()),b;b=yield W(x.next()),u=b.done,!u;v=!0){m=b.value,v=!1;const D=m;p||D&&(yield yield W(JSON.parse(D)))}}catch(D){c={error:D}}finally{try{!v&&!u&&(h=x.return)&&(yield W(h.call(x)))}finally{if(c)throw c.error}}p=!0}catch(D){if(Wd(D))return yield W(void 0);throw D}finally{p||n.abort()}})}return new Zo(r,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){const r=i.next();t.push(r),n.push(r)}return s.shift()}});return[new Zo(()=>o(t),this.controller,this.client),new Zo(()=>o(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return eA({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const r=kp(JSON.stringify(o)+`
`);i.enqueue(r)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function X2(e,t){return dn(this,arguments,function*(){var i,o,s,r;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ln("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ln("Attempted to iterate over a response with no body");const a=new Z2,u=new uc,c=nA(e.body);try{for(var h=!0,m=hn(W2(c)),p;p=yield W(m.next()),i=p.done,!i;h=!0){r=p.value,h=!1;const v=r;for(const x of u.decode(v)){const b=a.decode(x);b&&(yield yield W(b))}}}catch(v){o={error:v}}finally{try{!h&&!i&&(s=m.return)&&(yield W(s.call(m)))}finally{if(o)throw o.error}}for(const v of u.flush()){const x=a.decode(v);x&&(yield yield W(x))}})}function W2(e){return dn(this,arguments,function*(){var n,i,o,s;let r=new Uint8Array;try{for(var a=!0,u=hn(e),c;c=yield W(u.next()),n=c.done,!n;a=!0){s=c.value,a=!1;const h=s;if(h==null)continue;const m=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?kp(h):h;let p=new Uint8Array(r.length+m.length);p.set(r),p.set(m,r.length),r=p;let v;for(;(v=Q2(r))!==-1;)yield yield W(r.slice(0,v)),r=r.slice(v)}}catch(h){i={error:h}}finally{try{!a&&!n&&(o=u.return)&&(yield W(o.call(u)))}finally{if(i)throw i.error}}r.length>0&&(yield yield W(r))})}class Z2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=j2(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function j2(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function tV(e,t){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=t,r=await(async()=>{var a;if(t.options.stream)return Se(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Zo.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const u=n.headers.get("content-type"),c=(a=u==null?void 0:u.split(";")[0])===null||a===void 0?void 0:a.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await n.json():await n.text()})();return Se(e).debug(`[${i}] response parsed`,Zi({retryOfRequestLogID:o,url:n.url,status:n.status,body:r,durationMs:Date.now()-s})),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Up extends Promise{constructor(t,n,i=tV){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=t}_thenUnwrap(t){return new Up(this.client,this.responsePromise,async(n,i)=>t(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uA=Symbol("brand.privateNullableHeaders");function*eV(e){if(!e)return;if(uA in e){const{values:i,nulls:o}=e;yield*i.entries();for(const s of o)yield[s,null];return}let t=!1,n;e instanceof Headers?n=e.entries():h0(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const s=h0(i[1])?i[1]:[i[1]];let r=!1;for(const a of s)a!==void 0&&(t&&!r&&(r=!0,yield[o,null]),yield[o,a])}}const cr=e=>{const t=new Headers,n=new Set;for(const i of e){const o=new Set;for(const[s,r]of eV(i)){const a=s.toLowerCase();o.has(a)||(t.delete(s),o.add(a)),r===null?(t.delete(s),n.add(a)):(t.append(s,r),n.delete(a))}}return{[uA]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pf=e=>{var t,n,i,o,s,r;if(typeof globalThis.process<"u")return(i=(n=(t=Ix)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(r=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,e))===null||r===void 0?void 0:r.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cA;class cc{constructor(t){var n,i,o,s,r,a,u,{baseURL:c=Pf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=Pf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=t,p=Cu(t,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:h,apiVersion:m},p),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(i=v.timeout)!==null&&i!==void 0?i:cc.DEFAULT_TIMEOUT,this.logger=(o=v.logger)!==null&&o!==void 0?o:console;const x="warn";this.logLevel=x,this.logLevel=(r=(s=v0(v.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:v0(Pf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&r!==void 0?r:x,this.fetchOptions=v.fetchOptions,this.maxRetries=(a=v.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(u=v.fetch)!==null&&u!==void 0?u:k2(),this.encoder=O2,this._options=v,this.apiKey=h,this.apiVersion=m,this.clientAdapter=v.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=cr([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return cr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return cr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new ln(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ko}`}defaultIdempotencyKey(){return`stainless-node-retry-${E2()}`}makeStatusError(t,n,i,o){return Ce.generate(t,n,i,o)}buildURL(t,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,s=A2(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),r=this.defaultQuery();return R2(r)||(n=Object.assign(Object.assign({},r),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:t,path:n},o)))}request(t,n=null){return new Up(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){var o,s,r;const a=await t,u=(o=a.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=u),await this.prepareOptions(a);const{req:c,url:h,timeout:m}=await this.buildRequest(a,{retryCount:u-n});await this.prepareRequest(c,{url:h,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=i===void 0?"":`, retryOf: ${i}`,x=Date.now();if(Se(this).debug(`[${p}] sending request`,Zi({retryOfRequestLogID:i,method:a.method,url:h,options:a,headers:c.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new jd;const b=new AbortController,D=await this.fetchWithTimeout(h,c,m,b).catch(Zd),E=Date.now();if(D instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((r=a.signal)===null||r===void 0)&&r.aborted)throw new jd;const V=Wd(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(n)return Se(this).info(`[${p}] connection ${V?"timed out":"failed"} - ${C}`),Se(this).debug(`[${p}] connection ${V?"timed out":"failed"} (${C})`,Zi({retryOfRequestLogID:i,url:h,durationMs:E-x,message:D.message})),this.retryRequest(a,n,i??p);throw Se(this).info(`[${p}] connection ${V?"timed out":"failed"} - error; no more retries left`),Se(this).debug(`[${p}] connection ${V?"timed out":"failed"} (error; no more retries left)`,Zi({retryOfRequestLogID:i,url:h,durationMs:E-x,message:D.message})),V?new KS:new lc({cause:D})}const _=`[${p}${v}] ${c.method} ${h} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${E-x}ms`;if(!D.ok){const C=await this.shouldRetry(D);if(n&&C){const A=`retrying, ${n} attempts remaining`;return await L2(D.body),Se(this).info(`${_} - ${A}`),Se(this).debug(`[${p}] response error (${A})`,Zi({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,durationMs:E-x})),this.retryRequest(a,n,i??p,D.headers)}const V=C?"error; no more retries left":"error; not retryable";Se(this).info(`${_} - ${V}`);const L=await D.text().catch(A=>Zd(A).message),B=b2(L),I=B?void 0:L;throw Se(this).debug(`[${p}] response error (${V})`,Zi({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,message:I,durationMs:Date.now()-x})),this.makeStatusError(D.status,B,I,D.headers)}return Se(this).info(_),Se(this).debug(`[${p}] response start`,Zi({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,durationMs:E-x})),{response:D,options:a,controller:b,requestLogID:p,retryOfRequestLogID:i,startTime:x}}async fetchWithTimeout(t,n,i,o){const s=n||{},{signal:r,method:a}=s,u=Cu(s,["signal","method"]);r&&r.addEventListener("abort",()=>o.abort());const c=setTimeout(()=>o.abort(),i),h=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m=Object.assign(Object.assign(Object.assign({signal:o.signal},h?{duplex:"half"}:{}),{method:"GET"}),u);a&&(m.method=a.toUpperCase());try{return await this.fetch.call(void 0,t,m)}finally{clearTimeout(c)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){var s;let r;const a=o==null?void 0:o.get("retry-after-ms");if(a){const c=parseFloat(a);Number.isNaN(c)||(r=c)}const u=o==null?void 0:o.get("retry-after");if(u&&!r){const c=parseFloat(u);Number.isNaN(c)?r=Date.parse(u)-Date.now():r=c*1e3}if(!(r&&0<=r&&r<60*1e3)){const c=(s=t.maxRetries)!==null&&s!==void 0?s:this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(n,c)}return await N2(r),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,r=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return r*a*1e3}async buildRequest(t,{retryCount:n=0}={}){var i,o,s;const r=Object.assign({},t),{method:a,path:u,query:c,defaultBaseURL:h}=r,m=this.buildURL(u,c,h);"timeout"in r&&x2("timeout",r.timeout),r.timeout=(i=r.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:p,body:v}=this.buildBody({options:r}),x=await this.buildHeaders({options:t,method:a,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:x},r.signal&&{signal:r.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=r.fetchOptions)!==null&&s!==void 0?s:{}),url:m,timeout:r.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const r=await this.authHeaders(t);let a=cr([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),P2()),this._options.defaultHeaders,i,t.headers,r]);return this.validateHeaders(a),a.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=cr([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:U2(t)}:this.encoder({body:t,headers:i})}}cc.DEFAULT_TIMEOUT=6e4;class ee extends cc{constructor(){super(...arguments),this.interactions=new lA(this)}}cA=ee;ee.GeminiNextGenAPIClient=cA;ee.GeminiNextGenAPIClientError=ln;ee.APIError=Ce;ee.APIConnectionError=lc;ee.APIConnectionTimeoutError=KS;ee.APIUserAbortError=jd;ee.NotFoundError=XS;ee.ConflictError=WS;ee.RateLimitError=jS;ee.BadRequestError=JS;ee.AuthenticationError=QS;ee.InternalServerError=tA;ee.PermissionDeniedError=$S;ee.UnprocessableEntityError=ZS;ee.toFile=H2;ee.Interactions=lA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nV(e,t){const n={},i=l(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function iV(e,t){const n={},i=l(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function oV(e,t){const n={},i=l(e,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function sV(e,t){const n={},i=l(e,["sdkHttpResponse"]);return i!=null&&d(n,["sdkHttpResponse"],i),n}function rV(e,t,n){const i={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&d(t,["displayName"],o),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(e,["epochCount"]);t!==void 0&&s!=null&&d(t,["tuningTask","hyperparameters","epochCount"],s);const r=l(e,["learningRateMultiplier"]);if(r!=null&&d(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=l(e,["batchSize"]);t!==void 0&&a!=null&&d(t,["tuningTask","hyperparameters","batchSize"],a);const u=l(e,["learningRate"]);if(t!==void 0&&u!=null&&d(t,["tuningTask","hyperparameters","learningRate"],u),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function aV(e,t,n){const i={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const v=l(e,["validationDataset"]);t!==void 0&&v!=null&&d(t,["supervisedTuningSpec"],T0(v))}else if(o==="PREFERENCE_TUNING"){const v=l(e,["validationDataset"]);t!==void 0&&v!=null&&d(t,["preferenceOptimizationSpec"],T0(v))}const s=l(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&d(t,["tunedModelDisplayName"],s);const r=l(e,["description"]);t!==void 0&&r!=null&&d(t,["description"],r);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const v=l(e,["epochCount"]);t!==void 0&&v!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){const v=l(e,["epochCount"]);t!==void 0&&v!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const v=l(e,["learningRateMultiplier"]);t!==void 0&&v!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(u==="PREFERENCE_TUNING"){const v=l(e,["learningRateMultiplier"]);t!==void 0&&v!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const v=l(e,["exportLastCheckpointOnly"]);t!==void 0&&v!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(c==="PREFERENCE_TUNING"){const v=l(e,["exportLastCheckpointOnly"]);t!==void 0&&v!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let h=l(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const v=l(e,["adapterSize"]);t!==void 0&&v!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(h==="PREFERENCE_TUNING"){const v=l(e,["adapterSize"]);t!==void 0&&v!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=l(e,["labels"]);t!==void 0&&m!=null&&d(t,["labels"],m);const p=l(e,["beta"]);return t!==void 0&&p!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function lV(e,t){const n={},i=l(e,["baseModel"]);i!=null&&d(n,["baseModel"],i);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&_V(s);const r=l(e,["config"]);return r!=null&&rV(r,n),n}function uV(e,t){const n={},i=l(e,["baseModel"]);i!=null&&d(n,["baseModel"],i);const o=l(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);const s=l(e,["trainingDataset"]);s!=null&&TV(s,n,t);const r=l(e,["config"]);return r!=null&&aV(r,n,t),n}function cV(e,t){const n={},i=l(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function fV(e,t){const n={},i=l(e,["name"]);return i!=null&&d(n,["_url","name"],i),n}function dV(e,t,n){const i={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const r=l(e,["filter"]);return t!==void 0&&r!=null&&d(t,["_query","filter"],r),i}function hV(e,t,n){const i={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);const s=l(e,["pageToken"]);t!==void 0&&s!=null&&d(t,["_query","pageToken"],s);const r=l(e,["filter"]);return t!==void 0&&r!=null&&d(t,["_query","filter"],r),i}function pV(e,t){const n={},i=l(e,["config"]);return i!=null&&dV(i,n),n}function mV(e,t){const n={},i=l(e,["config"]);return i!=null&&hV(i,n),n}function gV(e,t){const n={},i=l(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>fA(a))),d(n,["tuningJobs"],r)}return n}function yV(e,t){const n={},i=l(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const o=l(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);const s=l(e,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>nh(a))),d(n,["tuningJobs"],r)}return n}function vV(e,t){const n={},i=l(e,["name"]);i!=null&&d(n,["model"],i);const o=l(e,["name"]);return o!=null&&d(n,["endpoint"],o),n}function _V(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=l(e,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(n,["examples","examples"],o)}return n}function TV(e,t,n){const i={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const r=l(e,["gcsUri"]);t!==void 0&&r!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){const r=l(e,["gcsUri"]);t!==void 0&&r!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=l(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const r=l(e,["vertexDatasetResource"]);t!==void 0&&r!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){const r=l(e,["vertexDatasetResource"]);t!==void 0&&r!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function fA(e,t){const n={},i=l(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],IS(s));const r=l(e,["createTime"]);r!=null&&d(n,["createTime"],r);const a=l(e,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);const u=l(e,["tuningTask","completeTime"]);u!=null&&d(n,["endTime"],u);const c=l(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=l(e,["description"]);h!=null&&d(n,["description"],h);const m=l(e,["baseModel"]);m!=null&&d(n,["baseModel"],m);const p=l(e,["_self"]);return p!=null&&d(n,["tunedModel"],vV(p)),n}function nh(e,t){const n={},i=l(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["state"]);s!=null&&d(n,["state"],IS(s));const r=l(e,["createTime"]);r!=null&&d(n,["createTime"],r);const a=l(e,["startTime"]);a!=null&&d(n,["startTime"],a);const u=l(e,["endTime"]);u!=null&&d(n,["endTime"],u);const c=l(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);const h=l(e,["error"]);h!=null&&d(n,["error"],h);const m=l(e,["description"]);m!=null&&d(n,["description"],m);const p=l(e,["baseModel"]);p!=null&&d(n,["baseModel"],p);const v=l(e,["tunedModel"]);v!=null&&d(n,["tunedModel"],v);const x=l(e,["preTunedModel"]);x!=null&&d(n,["preTunedModel"],x);const b=l(e,["supervisedTuningSpec"]);b!=null&&d(n,["supervisedTuningSpec"],b);const D=l(e,["preferenceOptimizationSpec"]);D!=null&&d(n,["preferenceOptimizationSpec"],D);const E=l(e,["tuningDataStats"]);E!=null&&d(n,["tuningDataStats"],E);const _=l(e,["encryptionSpec"]);_!=null&&d(n,["encryptionSpec"],_);const C=l(e,["partnerModelTuningSpec"]);C!=null&&d(n,["partnerModelTuningSpec"],C);const V=l(e,["customBaseModel"]);V!=null&&d(n,["customBaseModel"],V);const L=l(e,["experiment"]);L!=null&&d(n,["experiment"],L);const B=l(e,["labels"]);B!=null&&d(n,["labels"],B);const I=l(e,["outputUri"]);I!=null&&d(n,["outputUri"],I);const w=l(e,["pipelineJob"]);w!=null&&d(n,["pipelineJob"],w);const A=l(e,["serviceAccount"]);A!=null&&d(n,["serviceAccount"],A);const M=l(e,["tunedModelDisplayName"]);M!=null&&d(n,["tunedModelDisplayName"],M);const R=l(e,["veoTuningSpec"]);return R!=null&&d(n,["veoTuningSpec"],R),n}function EV(e,t){const n={},i=l(e,["sdkHttpResponse"]);i!=null&&d(n,["sdkHttpResponse"],i);const o=l(e,["name"]);o!=null&&d(n,["name"],o);const s=l(e,["metadata"]);s!=null&&d(n,["metadata"],s);const r=l(e,["done"]);r!=null&&d(n,["done"],r);const a=l(e,["error"]);return a!=null&&d(n,["error"],a),n}function T0(e,t){const n={},i=l(e,["gcsUri"]);i!=null&&d(n,["validationDatasetUri"],i);const o=l(e,["vertexDatasetResource"]);return o!=null&&d(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SV extends ti{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new So($n.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:zd.JOB_STATE_QUEUED}}}}async getInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=fV(t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>nh(h))}else{const c=cV(t);return a=z("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>fA(h))}}async listInternal(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=mV(t);return a=z("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=yV(h),p=new Kv;return Object.assign(p,m),p})}else{const c=pV(t);return a=z("tunedModels",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=gV(h),p=new Kv;return Object.assign(p,m),p})}}async cancel(t){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=iV(t);return a=z("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=sV(h),p=new Jv;return Object.assign(p,m),p})}else{const c=nV(t);return a=z("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const p=m;return p.sdkHttpResponse={headers:h.headers},p})),r.then(h=>{const m=oV(h),p=new Jv;return Object.assign(p,m),p})}}async tuneInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=uV(t,t);return s=z("tuningJobs",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>nh(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lV(t);return s=z("tunedModels",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>EV(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AV{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const CV=1024*1024*8,wV=3,RV=1e3,IV=2,Ru="x-goog-upload-status";async function xV(e,t,n){var i;const o=await dA(e,t,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Ru])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function bV(e,t,n){var i;const o=await dA(e,t,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Ru])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const r=ES(s),a=new bp;return Object.assign(a,r),a}async function dA(e,t,n){var i,o;let s=0,r=0,a=new Yd(new Response),u="upload";for(s=e.size;r<s;){const c=Math.min(CV,s-r),h=e.slice(r,r+c);r+c>=s&&(u+=", finalize");let m=0,p=RV;for(;m<wV&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(r),"Content-Length":String(c)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[Ru]));)m++,await MV(p),p=p*IV;if(r+=c,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[Ru])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function NV(e){return{size:e.size,type:e.type}}function MV(e){return new Promise(t=>setTimeout(t,e))}class DV{async upload(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await xV(t,n,i)}async uploadToFileSearchStore(t,n,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await bV(t,n,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await NV(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VV{create(t,n,i){return new PV(t,n,i)}}class PV{constructor(t,n,i){this.url=t,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E0="x-goog-api-key";class kV{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(E0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(E0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UV="gl-node/";class LV{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ee({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const i=Mx(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const o=new kV(this.apiKey);this.apiClient=new ND({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:UV+"web",uploader:new DV,downloader:new AV}),this.models=new $D(this.apiClient),this.live=new HD(this.apiClient,o,new VV),this.batches=new r1(this.apiClient),this.chats=new q1(this.models,this.apiClient),this.caches=new O1(this.apiClient),this.files=new W1(this.apiClient),this.operations=new XD(this.apiClient),this.authTokens=new d2(this.apiClient),this.tunings=new SV(this.apiClient),this.fileSearchStores=new T2(this.apiClient)}}var OV={};const S0=OV.API_KEY;let ih=null;if(S0)try{ih=new LV({apiKey:S0})}catch(e){console.error("Error initializing Gemini client:",e)}const BV=async(e,t)=>{if(!ih)return" ( API Key AI )";try{return(await ih.models.generateContent({model:"gemini-3-flash-preview",contents:`I am in Melbourne, Australia at ${e} around ${t}. 
      Give me one short, specific travel tip or a nearby hidden gem recommendation (under 30 words).`})).text||"No suggestion available."}catch(n){return console.error("Gemini API Error:",n),"Could not fetch suggestion."}},GV=({days:e,setDays:t,onMapClick:n})=>{const[i,o]=st.useState(0),[s,r]=st.useState(!1),[a,u]=st.useState(null),[c,h]=st.useState({time:"09:00",title:"",location:"",type:"activity",bookingUrl:"",navLink:""}),[m,p]=st.useState(""),[v,x]=st.useState(!1),[b,D]=st.useState(!1),E=st.useRef(null),_=e[i];st.useEffect(()=>{if(e.length===0||b)return;const R=new Date,P=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}-${String(R.getDate()).padStart(2,"0")}`,N=e.findIndex(gt=>gt.date===P);if(N!==-1)o(N);else{const gt=e[e.length-1].date;P>gt&&o(e.length-1)}D(!0)},[e,b]),st.useEffect(()=>{if(E.current){const R=E.current.children;R[i]&&R[i].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[i]);const C=()=>{u(null),h({time:"09:00",title:"",location:"",type:"activity",bookingUrl:"",navLink:""}),p(""),r(!0)},V=R=>{u(R),h({...R}),p(""),r(!0)},L=()=>{if(!c.title||!c.time)return;const R=[...e],P=R[i].events;if(a){const N=P.findIndex(gt=>gt.id===a.id);N!==-1&&(P[N]={...a,...c})}else{const N={id:Date.now().toString(),time:c.time,title:c.title,location:c.location||"",type:c.type,notes:c.notes,bookingUrl:c.bookingUrl,navLink:c.navLink,flightDetails:c.flightDetails};P.push(N)}P.sort((N,gt)=>N.time.localeCompare(gt.time)),t(R),r(!1)},B=R=>{const P=[...e];P[i].events=P[i].events.filter(N=>N.id!==R),t(P)},I=async()=>{if(!c.location)return;x(!0);const R=await BV(c.location,c.time||"daytime");p(R),x(!1)},w=R=>{if(R.navLink)window.open(R.navLink,"_blank");else if(R.location){const P=encodeURIComponent(R.location);window.open(`https://www.google.com/maps/search/?api=1&query=${P}`,"_blank")}},A=R=>{switch(R){case"food":return"bg-orange-50 text-orange-800 border-orange-100";case"transport":return"bg-slate-100 text-slate-700 border-slate-200";case"hotel":return"bg-blue-50 text-blue-800 border-blue-100";case"flight":return"bg-white border-yellow-400 border-l-4";default:return"bg-emerald-50 text-emerald-800 border-emerald-100"}},M=R=>{switch(R){case"food":return T.jsx(Ax,{className:"w-4 h-4"});case"transport":return T.jsx(Cx,{className:"w-4 h-4"});case"hotel":return T.jsx(wx,{className:"w-4 h-4"});case"flight":return T.jsx(Df,{className:"w-4 h-4"});default:return T.jsx(Rx,{className:"w-4 h-4"})}};return T.jsxs("div",{className:"flex flex-col h-full bg-surface dark:bg-darkSurface transition-colors",children:[T.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm sticky top-0 z-10 transition-colors",children:[T.jsx("div",{ref:E,className:"flex overflow-x-auto py-3 px-2 space-x-2 snap-x",children:e.map((R,P)=>T.jsxs("button",{onClick:()=>o(P),className:`flex-shrink-0 flex flex-col items-center justify-center min-w-[3.5rem] h-16 rounded-xl transition-all border snap-center ${i===P?"bg-primary dark:bg-blue-600 text-white border-primary dark:border-blue-600 shadow-lg scale-105":"bg-white dark:bg-slate-800 text-gray-400 dark:text-gray-500 border-gray-100 dark:border-slate-700 hover:bg-gray-50 dark:hover:bg-slate-700"}`,children:[T.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider",children:"Day"}),T.jsx("span",{className:"text-xl font-bold",children:R.day})]},R.day))}),T.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 dark:border-slate-800 flex justify-between items-start bg-white dark:bg-slate-900 transition-colors",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:_.date}),T.jsx("span",{className:"text-xs font-medium px-2 py-0.5 bg-gray-100 dark:bg-slate-800 rounded text-gray-500 dark:text-gray-400",children:_.weekday})]}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:_.tips})]}),T.jsxs("div",{className:"flex flex-col items-end",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[_.weather==="rain"?T.jsx(Sx,{className:"w-5 h-5 text-blue-400"}):T.jsx(Ex,{className:"w-5 h-5"}),T.jsxs("span",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[_.temp,""]})]}),T.jsxs("button",{onClick:()=>n(i),className:"text-xs text-accent font-semibold mt-1 flex items-center gap-1",children:[" ",T.jsx(qd,{className:"w-3 h-3"})]})]})]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 pb-28",children:[_.events.length===0?T.jsxs("div",{className:"text-center py-10 text-gray-400 dark:text-gray-500",children:[T.jsx("p",{children:""}),T.jsx("button",{onClick:C,className:"mt-4 text-primary dark:text-blue-400 font-medium",children:""})]}):_.events.map(R=>{var P;return T.jsxs("div",{className:"relative flex group",children:[T.jsxs("div",{className:"flex flex-col items-center mr-4 w-12 pt-1",children:[T.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 font-mono",children:R.time}),T.jsx("div",{className:"h-full w-px bg-gray-200 dark:bg-slate-700 mt-2 mb-2 dashed"})]}),R.type==="flight"&&R.flightDetails?T.jsxs("div",{className:"flex-1 rounded-2xl overflow-hidden shadow-sm border border-gray-100 dark:border-none mb-1 relative transition-transform active:scale-[0.99] bg-white dark:bg-slate-800",children:[T.jsx("div",{className:"bg-yellow-400 h-2 w-full"}),T.jsxs("div",{className:"p-4",children:[T.jsxs("div",{className:"flex justify-between items-start mb-4",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"bg-yellow-400 p-1.5 rounded-full text-black",children:T.jsx(Df,{className:"w-4 h-4"})}),T.jsxs("div",{children:[T.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase block",children:R.flightDetails.airline}),T.jsx("span",{className:"text-lg font-black text-gray-900 dark:text-white leading-none",children:R.flightDetails.flightNumber})]})]}),R.bookingUrl&&T.jsxs("a",{href:R.bookingUrl,target:"_blank",rel:"noreferrer",className:"text-xs font-bold text-blue-600 bg-blue-50 dark:bg-blue-900/30 dark:text-blue-300 px-2 py-1 rounded-md",children:["REF: ",(P=R.notes)==null?void 0:P.split(`
`)[0]]})]}),T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsxs("div",{className:"text-center",children:[T.jsx("span",{className:"text-3xl font-black text-gray-800 dark:text-white block",children:R.flightDetails.departCode}),T.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:R.flightDetails.departTerminal?`T${R.flightDetails.departTerminal}`:"T-"}),T.jsx("span",{className:"block text-xs font-bold mt-1 text-gray-800 dark:text-gray-200",children:R.time})]}),T.jsxs("div",{className:"flex-1 px-4 flex flex-col items-center",children:[T.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 mb-1",children:R.flightDetails.duration}),T.jsxs("div",{className:"w-full h-0.5 bg-gray-200 dark:bg-slate-600 relative",children:[T.jsx("div",{className:"absolute -top-1 right-0 w-2 h-2 bg-gray-300 dark:bg-slate-500 rounded-full"}),T.jsx(Df,{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-4 h-4 text-yellow-500 rotate-90"})]})]}),T.jsxs("div",{className:"text-center",children:[T.jsx("span",{className:"text-3xl font-black text-gray-800 dark:text-white block",children:R.flightDetails.arriveCode}),T.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:R.flightDetails.arriveTerminal?`T${R.flightDetails.arriveTerminal}`:"T-"})]})]}),T.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-dashed border-gray-200 dark:border-slate-700",children:[T.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:R.title}),T.jsxs("div",{className:"flex space-x-2",children:[T.jsx("button",{onClick:()=>V(R),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:T.jsx(Fd,{className:"w-4 h-4"})}),T.jsx("button",{onClick:()=>B(R.id),className:"p-1 text-gray-400 hover:text-red-500",children:T.jsx(Tu,{className:"w-4 h-4"})})]})]})]})]}):T.jsxs("div",{className:`flex-1 rounded-2xl p-4 border shadow-sm mb-1 ${A(R.type)} dark:border-none relative transition-transform active:scale-[0.99] dark:bg-slate-800 dark:text-gray-100`,children:[T.jsxs("div",{className:"flex justify-between items-start gap-2",children:[T.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[T.jsx("div",{className:`p-1.5 rounded-lg shrink-0 shadow-sm ${R.type==="food"?"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-300":R.type==="transport"?"bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-slate-300":R.type==="hotel"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900 dark:text-emerald-300"}`,children:M(R.type)}),T.jsx("h3",{className:"font-bold text-base text-gray-900 dark:text-white leading-tight pt-0.5 break-words",children:R.title})]}),T.jsxs("div",{className:"flex space-x-1 shrink-0 ml-1",children:[T.jsx("button",{onClick:()=>V(R),className:"p-1 opacity-50 hover:opacity-100",children:T.jsx(Fd,{className:"w-4 h-4"})}),T.jsx("button",{onClick:()=>B(R.id),className:"p-1 opacity-50 hover:opacity-100",children:T.jsx(Tu,{className:"w-4 h-4"})})]})]}),R.location&&T.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[T.jsxs("p",{className:"text-xs opacity-80 flex items-center truncate max-w-[65%]",children:[T.jsx("span",{className:"mr-1",children:""})," ",R.location]}),T.jsxs("div",{className:"flex gap-2 shrink-0",children:[R.bookingUrl&&T.jsxs("a",{href:R.bookingUrl,target:"_blank",rel:"noreferrer",className:"text-[10px] font-bold bg-white/50 hover:bg-white dark:bg-slate-700 dark:hover:bg-slate-600 px-2 py-1 rounded-full border border-black/5 dark:border-slate-600 text-blue-700 dark:text-blue-300 flex items-center gap-1 transition-colors",children:[T.jsx(Rp,{className:"w-3 h-3"})," "]}),T.jsxs("button",{onClick:()=>w(R),className:"text-[10px] font-bold bg-white/50 hover:bg-white dark:bg-slate-700 dark:hover:bg-slate-600 px-2 py-1 rounded-full border border-black/5 dark:border-slate-600 text-gray-700 dark:text-gray-300 flex items-center gap-1 transition-colors",children:[T.jsx(qd,{className:"w-3 h-3"})," "]})]})]}),R.notes&&T.jsx("p",{className:"text-xs mt-2 italic opacity-70 bg-black/5 dark:bg-white/5 p-2 rounded-lg",children:R.notes})]})]},R.id)}),T.jsx("div",{className:"flex justify-center pt-4",children:T.jsxs("button",{onClick:C,className:"flex items-center space-x-2 text-gray-400 hover:text-primary dark:text-gray-500 dark:hover:text-blue-400 transition-colors",children:[T.jsx("div",{className:"w-8 h-8 rounded-full border border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center",children:T.jsx(TS,{className:"w-4 h-4"})}),T.jsx("span",{className:"text-sm font-medium",children:""})]})})]}),s&&T.jsx("div",{className:"fixed inset-0 bg-primary/20 dark:bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4",children:T.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 fade-in h-[85vh] sm:h-auto overflow-y-auto",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:a?"":""}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[T.jsxs("div",{className:"col-span-1",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsx("input",{type:"time",value:c.time,onChange:R=>h({...c,time:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none"})]}),T.jsxs("div",{className:"col-span-2",children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsxs("select",{value:c.type,onChange:R=>h({...c,type:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none",children:[T.jsx("option",{value:"activity",children:"/ "}),T.jsx("option",{value:"food",children:"/ "}),T.jsx("option",{value:"transport",children:"/ "}),T.jsx("option",{value:"hotel",children:"/ "}),T.jsx("option",{value:"flight",children:"/ "})]})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsx("input",{type:"text",placeholder:"",value:c.title,onChange:R=>h({...c,title:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:" ()"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:"328 Swanston St",value:c.location,onChange:R=>h({...c,location:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none"}),T.jsx("button",{onClick:I,disabled:!c.location||v,className:"mt-1 bg-accent/10 text-accent p-3 rounded-xl hover:bg-accent/20 transition-colors",title:"Ask AI for tips",children:""})]}),v&&T.jsx("p",{className:"text-xs text-accent mt-1",children:"AI ..."}),m&&T.jsxs("div",{className:"mt-2 p-2 bg-accent/5 text-accent text-xs rounded-lg border border-accent/10",children:[T.jsx("strong",{children:":"})," ",m]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:" (Google Maps URL)"}),T.jsx("input",{type:"text",placeholder:"https://maps.app.goo.gl/...",value:c.navLink||"",onChange:R=>h({...c,navLink:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-blue-600 dark:bg-slate-700 dark:text-blue-400 rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none text-sm font-mono"}),T.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:""})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:" ()"}),T.jsx("input",{type:"text",placeholder:"https://...",value:c.bookingUrl||"",onChange:R=>h({...c,bookingUrl:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsx("textarea",{placeholder:"...",value:c.notes||"",onChange:R=>h({...c,notes:R.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none h-20 resize-none"})]}),T.jsxs("div",{className:"flex gap-3 pt-2",children:[T.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-3 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 font-semibold rounded-xl",children:""}),T.jsx("button",{onClick:L,className:"flex-1 py-3 bg-primary dark:bg-blue-600 text-white font-semibold rounded-xl shadow-lg shadow-primary/30",children:""})]})]})]})})]})},xe=["",""],qV=({expenses:e,setExpenses:t})=>{const[n,i]=st.useState(""),[o,s]=st.useState(""),[r,a]=st.useState(xe[0]),[u,c]=st.useState(xe),[h,m]=st.useState(21.5),[p,v]=st.useState(""),x=()=>{if(!n||!o)return;const _={id:Date.now().toString(),title:o,amount:parseFloat(n),currency:"AUD",payer:r,involved:u};t([_,...e]),i(""),s("")},b=_=>{t(e.filter(C=>C.id!==_))},D=_=>{u.includes(_)?u.length>1&&c(u.filter(C=>C!==_)):c([...u,_])},E=st.useMemo(()=>{const _={};return xe.forEach(C=>_[C]=0),e.forEach(C=>{const V=C.payer,L=C.amount,B=C.involved.length,I=L/B;_[V]+=L,C.involved.forEach(w=>{_[w]-=I})}),_},[e]);return T.jsxs("div",{className:"p-4 pb-28 h-full overflow-y-auto bg-surface dark:bg-darkSurface transition-colors",children:[T.jsxs("div",{className:"bg-primary text-white rounded-2xl shadow-lg p-5 mb-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-gray-300",children:" (AUD  TWD)"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"text-xs text-gray-400",children:":"}),T.jsx("input",{type:"number",value:h,onChange:_=>m(parseFloat(_.target.value)),className:"w-16 bg-white/10 text-white text-xs px-2 py-1 rounded border border-white/20 text-center"})]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"flex-1",children:[T.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:" (AUD)"}),T.jsx("input",{type:"number",placeholder:"0",value:p,onChange:_=>v(_.target.value),className:"w-full bg-transparent text-2xl font-bold border-b border-white/30 focus:border-accent outline-none py-1 placeholder-gray-600"})]}),T.jsx("div",{className:"text-2xl text-gray-500",children:""}),T.jsxs("div",{className:"flex-1 text-right",children:[T.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:" (TWD)"}),T.jsx("div",{className:"text-2xl font-bold text-accent",children:p?Math.round(parseFloat(p)*h).toLocaleString():"0"})]})]})]}),T.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm p-5 mb-6 border border-gray-100 dark:border-none",children:[T.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:" (AUD)"}),T.jsx("div",{className:"space-y-3",children:xe.map(_=>{const C=E[_];return T.jsxs("div",{className:"flex justify-between items-center border-b border-gray-50 dark:border-slate-700 last:border-0 pb-2 last:pb-0",children:[T.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:_}),T.jsx("span",{className:`font-bold ${C>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-500 dark:text-rose-400"}`,children:C>=0?` $${C.toFixed(2)}`:` $${Math.abs(C).toFixed(2)}`})]},_)})}),T.jsxs("div",{className:"mt-4 pt-3 border-t border-dashed border-gray-200 dark:border-slate-700 text-xs text-gray-400 text-center",children:[E[xe[0]]>0?`${xe[1]}  ${xe[0]} $${E[xe[0]].toFixed(2)} AUD`:`${xe[0]}  ${xe[1]} $${E[xe[1]].toFixed(2)} AUD`,T.jsxs("div",{className:"text-accent mt-1",children:["( $",Math.abs(E[xe[0]]*h).toFixed(0),")"]})]})]}),T.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm p-5 mb-6 border border-gray-100 dark:border-none",children:[T.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:""}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("input",{className:"w-full bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white p-3 rounded-xl outline-none focus:ring-2 focus:ring-primary border-none",placeholder:" ()",value:o,onChange:_=>s(_.target.value)}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs("div",{className:"relative flex-1",children:[T.jsx("span",{className:"absolute left-3 top-3 text-gray-400 font-bold",children:"$"}),T.jsx("input",{type:"number",className:"w-full bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white p-3 pl-7 rounded-xl outline-none focus:ring-2 focus:ring-primary border-none",placeholder:"0.00",value:n,onChange:_=>i(_.target.value)})]}),T.jsx("select",{className:"bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white p-3 rounded-xl outline-none focus:ring-2 focus:ring-primary border-none text-sm",value:r,onChange:_=>a(_.target.value),children:xe.map(_=>T.jsxs("option",{value:_,children:[_," "]},_))})]}),T.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 my-2 overflow-x-auto",children:[T.jsx("span",{className:"whitespace-nowrap",children:":"}),xe.map(_=>T.jsx("button",{onClick:()=>D(_),className:`px-3 py-1 rounded-full border transition-colors whitespace-nowrap ${u.includes(_)?"bg-primary text-white border-primary dark:bg-blue-600 dark:border-blue-600":"bg-white text-gray-400 border-gray-200 dark:bg-slate-700 dark:text-gray-400 dark:border-slate-600"}`,children:_},_))]}),T.jsx("button",{onClick:x,disabled:!n||!o,className:"w-full bg-accent text-white font-bold py-3 rounded-xl shadow-lg shadow-amber-200 dark:shadow-none disabled:opacity-50 hover:bg-amber-600 transition-colors",children:""})]})]}),T.jsx("h3",{className:"text-gray-400 font-semibold mb-3 px-1 uppercase text-[10px] tracking-widest",children:""}),T.jsxs("div",{className:"space-y-3",children:[e.map(_=>T.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-gray-50 dark:border-slate-700 flex justify-between items-center",children:[T.jsxs("div",{children:[T.jsx("div",{className:"font-bold text-gray-800 dark:text-white text-sm",children:_.title}),T.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[T.jsx("span",{className:"text-primary dark:text-blue-400 font-medium",children:_.payer}),"   ",_.involved.join(", ")," "]})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsxs("div",{className:"text-right",children:[T.jsxs("span",{className:"font-bold text-gray-800 dark:text-white block",children:["$",_.amount.toFixed(2)]}),T.jsxs("span",{className:"text-[10px] text-gray-400",children:[" NT$",(_.amount*h).toFixed(0)]})]}),T.jsx("button",{onClick:()=>b(_.id),className:"text-gray-300 hover:text-rose-400 p-1",children:T.jsx(Tu,{className:"w-4 h-4"})})]})]},_.id)),e.length===0&&T.jsx("div",{className:"text-center text-gray-400 text-xs italic py-4",children:""})]})]})},FV=({links:e,setLinks:t,days:n,setDays:i})=>{const[o,s]=st.useState(!1),[r,a]=st.useState(null),[u,c]=st.useState({title:"",url:"",details:"",type:"ticket"}),h=st.useMemo(()=>{const b=[];return n.forEach((D,E)=>{D.events.forEach((_,C)=>{_.bookingUrl&&b.push({id:_.id,title:_.title,url:_.bookingUrl,type:_.type,details:_.notes||"",isManual:!1,dayIndex:E,eventIndex:C})})}),e.forEach(D=>{b.push({...D,isManual:!0})}),b},[e,n]),m=()=>{a(null),c({title:"",url:"",details:"",type:"ticket"}),s(!0)},p=b=>{a(b),c({...b}),s(!0)},v=(b,D)=>{if(D.preventDefault(),b.isManual)window.confirm("")&&t(e.filter(E=>E.id!==b.id));else if(window.confirm(`${b.title}`)){const E=[...n];if(b.dayIndex!==void 0&&b.eventIndex!==void 0){const _=E[b.dayIndex].events[b.eventIndex];_.bookingUrl=void 0,i(E)}}},x=()=>{if(!(!u.title||!u.url)){if(r)if(r.isManual)t(e.map(b=>b.id===r.id?{...r,...u}:b));else{const b=[...n];if(r.dayIndex!==void 0&&r.eventIndex!==void 0){const D=b[r.dayIndex].events[r.eventIndex];D.title=u.title,D.bookingUrl=u.url,D.notes=u.details,D.type=u.type,i(b)}}else{const b={id:Date.now().toString(),title:u.title,url:u.url,details:u.details||"",type:u.type};t([b,...e])}s(!1)}};return T.jsxs("div",{className:"p-4 bg-surface dark:bg-darkSurface h-full pb-20 overflow-y-auto transition-colors",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[T.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:" & "}),T.jsx("button",{onClick:m,className:"bg-primary dark:bg-blue-600 text-white p-2 rounded-full shadow-lg hover:bg-slate-700 transition-colors",children:T.jsx(TS,{className:"w-5 h-5"})})]}),T.jsx("div",{className:"grid gap-4",children:h.map((b,D)=>T.jsxs("div",{className:"relative group",children:[T.jsx("a",{href:b.url,target:"_blank",rel:"noreferrer",className:"block bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm hover:shadow-md transition-all border border-gray-100 dark:border-slate-700",children:T.jsxs("div",{className:"flex items-start justify-between",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex gap-2 mb-2",children:[T.jsx("span",{className:`inline-block px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wide transition-colors
                                        ${b.type==="car"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":b.type==="flight"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":b.type==="hotel"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300":b.type==="ticket"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:b.type==="car"?"":b.type==="flight"?"":b.type==="hotel"?"":b.type==="ticket"?"":""}),!b.isManual&&T.jsxs("span",{className:"inline-block px-2 py-1 rounded-md text-[10px] font-bold uppercase tracking-wide bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400",children:[" Day ",n[b.dayIndex].day]})]}),T.jsx("h3",{className:"font-bold text-base text-gray-800 dark:text-gray-100",children:b.title}),T.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs mt-1 truncate max-w-[250px]",children:b.details})]}),T.jsx("div",{className:"bg-surface dark:bg-slate-700 p-2 rounded-full text-primary dark:text-blue-400",children:T.jsx(Rp,{className:"w-5 h-5"})})]})}),T.jsxs("div",{className:"absolute top-4 right-14 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[T.jsx("button",{onClick:E=>{E.preventDefault(),p(b)},className:"p-1.5 bg-gray-100 dark:bg-slate-600 text-gray-600 dark:text-gray-200 rounded-full hover:bg-gray-200 dark:hover:bg-slate-500",children:T.jsx(Fd,{className:"w-3 h-3"})}),T.jsx("button",{onClick:E=>v(b,E),className:"p-1.5 bg-rose-100 dark:bg-rose-900/50 text-rose-600 dark:text-rose-300 rounded-full hover:bg-rose-200 dark:hover:bg-rose-800/50",children:T.jsx(Tu,{className:"w-3 h-3"})})]})]},`${b.id}-${D}`))}),h.length===0&&T.jsxs("div",{className:"text-center py-10 text-gray-400 dark:text-gray-500",children:[T.jsx("p",{children:""}),T.jsx("button",{onClick:m,className:"mt-2 text-primary dark:text-blue-400 font-medium",children:""})]}),T.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary to-slate-900 dark:from-slate-800 dark:to-black rounded-2xl text-white shadow-lg",children:[T.jsx("h3",{className:"font-bold text-base mb-2",children:""}),T.jsx("p",{className:"text-gray-300 text-xs mb-4",children:""}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("a",{href:"tel:000",className:"flex-1 bg-white text-primary text-center py-2 rounded-lg font-bold text-sm hover:bg-gray-100 transition-colors",children:" 000"}),T.jsx("a",{href:"https://www.taiwanembassy.org/au/index.html",target:"_blank",rel:"noreferrer",className:"flex-1 bg-white/10 text-white text-center py-2 rounded-lg text-sm backdrop-blur-sm border border-white/20 hover:bg-white/20 transition-colors",children:""})]})]}),o&&T.jsx("div",{className:"fixed inset-0 bg-primary/20 dark:bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4",children:T.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-md rounded-3xl p-6 shadow-2xl animate-in slide-in-from-bottom-10 fade-in",children:[T.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:r?r.isManual?"":"":""}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsx("input",{type:"text",value:u.title,onChange:b=>c({...u,title:b.target.value}),placeholder:"",className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsxs("select",{value:u.type,onChange:b=>c({...u,type:b.target.value}),className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none",children:[T.jsx("option",{value:"ticket",children:" "}),T.jsx("option",{value:"flight",children:" "}),T.jsx("option",{value:"hotel",children:" "}),T.jsx("option",{value:"car",children:" "}),T.jsx("option",{value:"transport",children:" "}),T.jsx("option",{value:"activity",children:" "}),T.jsx("option",{value:"food",children:" "})]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:" URL"}),T.jsx("input",{type:"text",value:u.url,onChange:b=>c({...u,url:b.target.value}),placeholder:"https://...",className:"w-full mt-1 p-3 bg-gray-50 text-blue-600 dark:bg-slate-700 dark:text-blue-400 rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none font-mono text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:""}),T.jsx("input",{type:"text",value:u.details||"",onChange:b=>c({...u,details:b.target.value}),placeholder:" #123456",className:"w-full mt-1 p-3 bg-gray-50 text-gray-900 dark:bg-slate-700 dark:text-white rounded-xl border border-gray-100 dark:border-slate-600 focus:ring-2 focus:ring-primary outline-none"})]}),!(r!=null&&r.isManual)&&r&&T.jsx("p",{className:"text-xs text-amber-500 bg-amber-50 dark:bg-amber-900/20 p-2 rounded-lg",children:" "}),T.jsxs("div",{className:"flex gap-3 pt-2",children:[T.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-3 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 font-semibold rounded-xl hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:""}),T.jsx("button",{onClick:x,className:"flex-1 py-3 bg-primary dark:bg-blue-600 text-white font-semibold rounded-xl shadow-lg shadow-primary/30 dark:shadow-blue-900/30 hover:bg-slate-700 dark:hover:bg-blue-500 transition-colors",children:""})]})]})]})})]})},HV=({day:e})=>{const t=st.useRef(null),n=st.useRef(null),[i,o]=st.useState(null);return st.useEffect(()=>{if(!window.L||!t.current)return;n.current||(n.current=window.L.map(t.current).setView([-37.8136,144.9631],13),window.L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19}).addTo(n.current));const s=n.current;s.eachLayer(a=>{(a instanceof window.L.Marker||a instanceof window.L.Polyline)&&s.removeLayer(a)});const r=[];if(e.events.forEach(a=>{a.lat&&a.lng&&(window.L.marker([a.lat,a.lng]).addTo(s).bindPopup(`<b>${a.time}</b><br>${a.title}`),r.push([a.lat,a.lng]))}),r.length>0){const a=window.L.latLngBounds(r);s.fitBounds(a,{padding:[50,50]})}navigator.geolocation&&navigator.geolocation.getCurrentPosition(a=>{const{latitude:u,longitude:c}=a.coords;o([u,c]);const h=window.L.divIcon({className:"user-location-marker",html:'<div style="background-color: #3b82f6; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3);"></div>',iconSize:[16,16]});window.L.marker([u,c],{icon:h}).addTo(s).bindPopup("")})},[e]),T.jsxs("div",{className:"flex flex-col h-full relative",children:[T.jsxs("div",{className:"absolute top-4 left-4 right-4 z-[400] bg-white/90 backdrop-blur-md p-3 rounded-xl shadow-lg border border-gray-100",children:[T.jsxs("h3",{className:"font-bold text-gray-800 text-sm",children:["Day ",e.day," "]}),T.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[e.events.filter(s=>s.lat).length," "]})]}),T.jsx("div",{ref:t,className:"flex-1 w-full h-full"})]})};var A0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},zV=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const o=e[n++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=e[n++];t[i++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=e[n++],r=e[n++],a=e[n++],u=((o&7)<<18|(s&63)<<12|(r&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],r=e[n++];t[i++]=String.fromCharCode((o&15)<<12|(s&63)<<6|r&63)}}return t.join("")},pA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<e.length;o+=3){const s=e[o],r=o+1<e.length,a=r?e[o+1]:0,u=o+2<e.length,c=u?e[o+2]:0,h=s>>2,m=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,v=c&63;u||(v=64,r||(p=64)),i.push(n[h],n[m],n[p],n[v])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(hA(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):zV(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<e.length;){const s=n[e.charAt(o++)],a=o<e.length?n[e.charAt(o)]:0;++o;const c=o<e.length?n[e.charAt(o)]:64;++o;const m=o<e.length?n[e.charAt(o)]:64;if(++o,s==null||a==null||c==null||m==null)throw new YV;const p=s<<2|a>>4;if(i.push(p),c!==64){const v=a<<4&240|c>>2;if(i.push(v),m!==64){const x=c<<6&192|m;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class YV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KV=function(e){const t=hA(e);return pA.encodeByteArray(t,!0)},Iu=function(e){return KV(e).replace(/\./g,"")},JV=function(e){try{return pA.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=()=>QV().__FIREBASE_DEFAULTS__,XV=()=>{if(typeof process>"u"||typeof A0>"u")return;const e=A0.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},WV=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&JV(e[1]);return t&&JSON.parse(t)},Lp=()=>{try{return $V()||XV()||WV()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ZV=e=>{var t,n;return(n=(t=Lp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},jV=e=>{const t=ZV(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},mA=()=>{var e;return(e=Lp())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",o=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Iu(JSON.stringify(n)),Iu(JSON.stringify(r)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){var e;const t=(e=Lp())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oP(){return!iP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sP(){try{return typeof indexedDB=="object"}catch{return!1}}function rP(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;t(((s=o.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="FirebaseError";class Bs extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=aP,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gA.prototype.create)}}class gA{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},o=`${this.service}/${t}`,s=this.errors[t],r=s?lP(s,i):"Error",a=`${this.serviceName}: ${r} (${o}).`;return new Bs(o,a,i)}}function lP(e,t){return e.replace(uP,(n,i)=>{const o=t[i];return o!=null?String(o):`<${i}?>`})}const uP=/\{\$([^}]+)}/g;function oh(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const o of n){if(!i.includes(o))return!1;const s=e[o],r=t[o];if(C0(s)&&C0(r)){if(!oh(s,r))return!1}else if(s!==r)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function C0(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e){return e&&e._delegate?e._delegate:e}class ea{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new tP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dP(t))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch{}}}}clearInstance(t=ji){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ji){return this.instances.has(t)}getOptions(t=ji){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&r.resolve(o)}return o}onInit(t,n){var i;const o=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(o,s);const r=this.instances.get(o);return r&&t(r,o),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fP(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ji){return this.component?this.component.multipleInstances?t:ji:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fP(e){return e===ji?void 0:e}function dP(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new cP(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ct||(ct={}));const pP={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},mP=ct.INFO,gP={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},yP=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),o=gP[t];if(o)console[o](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yA{constructor(t){this.name=t,this._logLevel=mP,this._logHandler=yP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pP[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const vP=(e,t)=>t.some(n=>e instanceof n);let w0,R0;function _P(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TP(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vA=new WeakMap,sh=new WeakMap,_A=new WeakMap,kf=new WeakMap,Op=new WeakMap;function EP(e){const t=new Promise((n,i)=>{const o=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{n(xi(e.result)),o()},r=()=>{i(e.error),o()};e.addEventListener("success",s),e.addEventListener("error",r)});return t.then(n=>{n instanceof IDBCursor&&vA.set(n,e)}).catch(()=>{}),Op.set(t,e),t}function SP(e){if(sh.has(e))return;const t=new Promise((n,i)=>{const o=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{n(),o()},r=()=>{i(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)});sh.set(e,t)}let rh={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return sh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||_A.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function AP(e){rh=e(rh)}function CP(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(Uf(this),t,...n);return _A.set(i,t.sort?t.sort():[t]),xi(i)}:TP().includes(e)?function(...t){return e.apply(Uf(this),t),xi(vA.get(this))}:function(...t){return xi(e.apply(Uf(this),t))}}function wP(e){return typeof e=="function"?CP(e):(e instanceof IDBTransaction&&SP(e),vP(e,_P())?new Proxy(e,rh):e)}function xi(e){if(e instanceof IDBRequest)return EP(e);if(kf.has(e))return kf.get(e);const t=wP(e);return t!==e&&(kf.set(e,t),Op.set(t,e)),t}const Uf=e=>Op.get(e);function RP(e,t,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const r=indexedDB.open(e,t),a=xi(r);return i&&r.addEventListener("upgradeneeded",u=>{i(xi(r.result),u.oldVersion,u.newVersion,xi(r.transaction),u)}),n&&r.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),o&&u.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const IP=["get","getKey","getAll","getAllKeys","count"],xP=["put","add","delete","clear"],Lf=new Map;function I0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Lf.get(t))return Lf.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=xP.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||IP.includes(n)))return;const s=async function(r,...a){const u=this.transaction(r,o?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&u.done]))[0]};return Lf.set(t,s),s}AP(e=>({...e,get:(t,n,i)=>I0(t,n)||e.get(t,n,i),has:(t,n)=>!!I0(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NP(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function NP(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ah="@firebase/app",x0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new yA("@firebase/app"),MP="@firebase/app-compat",DP="@firebase/analytics-compat",VP="@firebase/analytics",PP="@firebase/app-check-compat",kP="@firebase/app-check",UP="@firebase/auth",LP="@firebase/auth-compat",OP="@firebase/database",BP="@firebase/data-connect",GP="@firebase/database-compat",qP="@firebase/functions",FP="@firebase/functions-compat",HP="@firebase/installations",zP="@firebase/installations-compat",YP="@firebase/messaging",KP="@firebase/messaging-compat",JP="@firebase/performance",QP="@firebase/performance-compat",$P="@firebase/remote-config",XP="@firebase/remote-config-compat",WP="@firebase/storage",ZP="@firebase/storage-compat",jP="@firebase/firestore",tk="@firebase/vertexai-preview",ek="@firebase/firestore-compat",nk="firebase",ik="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="[DEFAULT]",ok={[ah]:"fire-core",[MP]:"fire-core-compat",[VP]:"fire-analytics",[DP]:"fire-analytics-compat",[kP]:"fire-app-check",[PP]:"fire-app-check-compat",[UP]:"fire-auth",[LP]:"fire-auth-compat",[OP]:"fire-rtdb",[BP]:"fire-data-connect",[GP]:"fire-rtdb-compat",[qP]:"fire-fn",[FP]:"fire-fn-compat",[HP]:"fire-iid",[zP]:"fire-iid-compat",[YP]:"fire-fcm",[KP]:"fire-fcm-compat",[JP]:"fire-perf",[QP]:"fire-perf-compat",[$P]:"fire-rc",[XP]:"fire-rc-compat",[WP]:"fire-gcs",[ZP]:"fire-gcs-compat",[jP]:"fire-fst",[ek]:"fire-fst-compat",[tk]:"fire-vertex","fire-js":"fire-js",[nk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new Map,sk=new Map,uh=new Map;function b0(e,t){try{e.container.addComponent(t)}catch(n){Xn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function bu(e){const t=e.name;if(uh.has(t))return Xn.debug(`There were multiple attempts to register component ${t}.`),!1;uh.set(t,e);for(const n of xu.values())b0(n,e);for(const n of sk.values())b0(n,e);return!0}function rk(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new gA("app","Firebase",ak);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=ik;function TA(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:lh,automaticDataCollectionEnabled:!1},t),o=i.name;if(typeof o!="string"||!o)throw bi.create("bad-app-name",{appName:String(o)});if(n||(n=mA()),!n)throw bi.create("no-options");const s=xu.get(o);if(s){if(oh(n,s.options)&&oh(i,s.config))return s;throw bi.create("duplicate-app",{appName:o})}const r=new hP(o);for(const u of uh.values())r.addComponent(u);const a=new lk(n,i,r);return xu.set(o,a),a}function ck(e=lh){const t=xu.get(e);if(!t&&e===lh&&mA())return TA();if(!t)throw bi.create("no-app",{appName:e});return t}function ls(e,t,n){var i;let o=(i=ok[e])!==null&&i!==void 0?i:e;n&&(o+=`-${n}`);const s=o.match(/\s|\//),r=t.match(/\s|\//);if(s||r){const a=[`Unable to register library "${o}" with version "${t}":`];s&&a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&r&&a.push("and"),r&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Xn.warn(a.join(" "));return}bu(new ea(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebase-heartbeat-database",dk=1,na="firebase-heartbeat-store";let Of=null;function EA(){return Of||(Of=RP(fk,dk,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(na)}catch(n){console.warn(n)}}}}).catch(e=>{throw bi.create("idb-open",{originalErrorMessage:e.message})})),Of}async function hk(e){try{const n=(await EA()).transaction(na),i=await n.objectStore(na).get(SA(e));return await n.done,i}catch(t){if(t instanceof Bs)Xn.warn(t.message);else{const n=bi.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Xn.warn(n.message)}}}async function N0(e,t){try{const i=(await EA()).transaction(na,"readwrite");await i.objectStore(na).put(t,SA(e)),await i.done}catch(n){if(n instanceof Bs)Xn.warn(n.message);else{const i=bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(i.message)}}}function SA(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=1024,mk=30*24*60*60*1e3;class gk{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=M0();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const a=new Date(r.date).valueOf();return Date.now()-a<=mk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Xn.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=M0(),{heartbeatsToSend:i,unsentEntries:o}=yk(this._heartbeatsCache.heartbeats),s=Iu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xn.warn(n),""}}}function M0(){return new Date().toISOString().substring(0,10)}function yk(e,t=pk){const n=[];let i=e.slice();for(const o of e){const s=n.find(r=>r.agent===o.agent);if(s){if(s.dates.push(o.date),D0(n)>t){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),D0(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class vk{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sP()?rP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return N0(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return N0(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function D0(e){return Iu(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(e){bu(new ea("platform-logger",t=>new bP(t),"PRIVATE")),bu(new ea("heartbeat",t=>new gk(t),"PRIVATE")),ls(ah,x0,e),ls(ah,x0,"esm2017"),ls("fire-js","")}_k("");var Tk="firebase",Ek="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(Tk,Ek,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,AA;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,w){function A(){}A.prototype=w.prototype,I.D=w.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(M,R,P){for(var N=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)N[gt-2]=arguments[gt];return w.prototype[R].apply(M,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,A){A||(A=0);var M=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)M[R]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(R=0;16>R;++R)M[R]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=I.g[0],A=I.g[1],R=I.g[2];var P=I.g[3],N=w+(P^A&(R^P))+M[0]+3614090360&4294967295;w=A+(N<<7&4294967295|N>>>25),N=P+(R^w&(A^R))+M[1]+3905402710&4294967295,P=w+(N<<12&4294967295|N>>>20),N=R+(A^P&(w^A))+M[2]+606105819&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(w^R&(P^w))+M[3]+3250441966&4294967295,A=R+(N<<22&4294967295|N>>>10),N=w+(P^A&(R^P))+M[4]+4118548399&4294967295,w=A+(N<<7&4294967295|N>>>25),N=P+(R^w&(A^R))+M[5]+1200080426&4294967295,P=w+(N<<12&4294967295|N>>>20),N=R+(A^P&(w^A))+M[6]+2821735955&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(w^R&(P^w))+M[7]+4249261313&4294967295,A=R+(N<<22&4294967295|N>>>10),N=w+(P^A&(R^P))+M[8]+1770035416&4294967295,w=A+(N<<7&4294967295|N>>>25),N=P+(R^w&(A^R))+M[9]+2336552879&4294967295,P=w+(N<<12&4294967295|N>>>20),N=R+(A^P&(w^A))+M[10]+4294925233&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(w^R&(P^w))+M[11]+2304563134&4294967295,A=R+(N<<22&4294967295|N>>>10),N=w+(P^A&(R^P))+M[12]+1804603682&4294967295,w=A+(N<<7&4294967295|N>>>25),N=P+(R^w&(A^R))+M[13]+4254626195&4294967295,P=w+(N<<12&4294967295|N>>>20),N=R+(A^P&(w^A))+M[14]+2792965006&4294967295,R=P+(N<<17&4294967295|N>>>15),N=A+(w^R&(P^w))+M[15]+1236535329&4294967295,A=R+(N<<22&4294967295|N>>>10),N=w+(R^P&(A^R))+M[1]+4129170786&4294967295,w=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(w^A))+M[6]+3225465664&4294967295,P=w+(N<<9&4294967295|N>>>23),N=R+(w^A&(P^w))+M[11]+643717713&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^w&(R^P))+M[0]+3921069994&4294967295,A=R+(N<<20&4294967295|N>>>12),N=w+(R^P&(A^R))+M[5]+3593408605&4294967295,w=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(w^A))+M[10]+38016083&4294967295,P=w+(N<<9&4294967295|N>>>23),N=R+(w^A&(P^w))+M[15]+3634488961&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^w&(R^P))+M[4]+3889429448&4294967295,A=R+(N<<20&4294967295|N>>>12),N=w+(R^P&(A^R))+M[9]+568446438&4294967295,w=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(w^A))+M[14]+3275163606&4294967295,P=w+(N<<9&4294967295|N>>>23),N=R+(w^A&(P^w))+M[3]+4107603335&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^w&(R^P))+M[8]+1163531501&4294967295,A=R+(N<<20&4294967295|N>>>12),N=w+(R^P&(A^R))+M[13]+2850285829&4294967295,w=A+(N<<5&4294967295|N>>>27),N=P+(A^R&(w^A))+M[2]+4243563512&4294967295,P=w+(N<<9&4294967295|N>>>23),N=R+(w^A&(P^w))+M[7]+1735328473&4294967295,R=P+(N<<14&4294967295|N>>>18),N=A+(P^w&(R^P))+M[12]+2368359562&4294967295,A=R+(N<<20&4294967295|N>>>12),N=w+(A^R^P)+M[5]+4294588738&4294967295,w=A+(N<<4&4294967295|N>>>28),N=P+(w^A^R)+M[8]+2272392833&4294967295,P=w+(N<<11&4294967295|N>>>21),N=R+(P^w^A)+M[11]+1839030562&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^w)+M[14]+4259657740&4294967295,A=R+(N<<23&4294967295|N>>>9),N=w+(A^R^P)+M[1]+2763975236&4294967295,w=A+(N<<4&4294967295|N>>>28),N=P+(w^A^R)+M[4]+1272893353&4294967295,P=w+(N<<11&4294967295|N>>>21),N=R+(P^w^A)+M[7]+4139469664&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^w)+M[10]+3200236656&4294967295,A=R+(N<<23&4294967295|N>>>9),N=w+(A^R^P)+M[13]+681279174&4294967295,w=A+(N<<4&4294967295|N>>>28),N=P+(w^A^R)+M[0]+3936430074&4294967295,P=w+(N<<11&4294967295|N>>>21),N=R+(P^w^A)+M[3]+3572445317&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^w)+M[6]+76029189&4294967295,A=R+(N<<23&4294967295|N>>>9),N=w+(A^R^P)+M[9]+3654602809&4294967295,w=A+(N<<4&4294967295|N>>>28),N=P+(w^A^R)+M[12]+3873151461&4294967295,P=w+(N<<11&4294967295|N>>>21),N=R+(P^w^A)+M[15]+530742520&4294967295,R=P+(N<<16&4294967295|N>>>16),N=A+(R^P^w)+M[2]+3299628645&4294967295,A=R+(N<<23&4294967295|N>>>9),N=w+(R^(A|~P))+M[0]+4096336452&4294967295,w=A+(N<<6&4294967295|N>>>26),N=P+(A^(w|~R))+M[7]+1126891415&4294967295,P=w+(N<<10&4294967295|N>>>22),N=R+(w^(P|~A))+M[14]+2878612391&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~w))+M[5]+4237533241&4294967295,A=R+(N<<21&4294967295|N>>>11),N=w+(R^(A|~P))+M[12]+1700485571&4294967295,w=A+(N<<6&4294967295|N>>>26),N=P+(A^(w|~R))+M[3]+2399980690&4294967295,P=w+(N<<10&4294967295|N>>>22),N=R+(w^(P|~A))+M[10]+4293915773&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~w))+M[1]+2240044497&4294967295,A=R+(N<<21&4294967295|N>>>11),N=w+(R^(A|~P))+M[8]+1873313359&4294967295,w=A+(N<<6&4294967295|N>>>26),N=P+(A^(w|~R))+M[15]+4264355552&4294967295,P=w+(N<<10&4294967295|N>>>22),N=R+(w^(P|~A))+M[6]+2734768916&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~w))+M[13]+1309151649&4294967295,A=R+(N<<21&4294967295|N>>>11),N=w+(R^(A|~P))+M[4]+4149444226&4294967295,w=A+(N<<6&4294967295|N>>>26),N=P+(A^(w|~R))+M[11]+3174756917&4294967295,P=w+(N<<10&4294967295|N>>>22),N=R+(w^(P|~A))+M[2]+718787259&4294967295,R=P+(N<<15&4294967295|N>>>17),N=A+(P^(R|~w))+M[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+P&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var A=w-this.blockSize,M=this.B,R=this.h,P=0;P<w;){if(R==0)for(;P<=A;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(M[R++]=I.charCodeAt(P++),R==this.blockSize){o(this,M),R=0;break}}else for(;P<w;)if(M[R++]=I[P++],R==this.blockSize){o(this,M),R=0;break}}this.h=R,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var A=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=A&255,A/=256;for(this.u(I),I=Array(16),w=A=0;4>w;++w)for(var M=0;32>M;M+=8)I[A++]=this.g[w]>>>M&255;return I};function s(I,w){var A=a;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=w(I)}function r(I,w){this.h=w;for(var A=[],M=!0,R=I.length-1;0<=R;R--){var P=I[R]|0;M&&P==w||(A[R]=P,M=!1)}this.g=A}var a={};function u(I){return-128<=I&&128>I?s(I,function(w){return new r([w|0],0>w?-1:0)}):new r([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return m;if(0>I)return D(c(-I));for(var w=[],A=1,M=0;I>=A;M++)w[M]=I/A|0,A*=4294967296;return new r(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return D(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(w,8)),M=m,R=0;R<I.length;R+=8){var P=Math.min(8,I.length-R),N=parseInt(I.substring(R,R+P),w);8>P?(P=c(Math.pow(w,P)),M=M.j(P).add(c(N))):(M=M.j(A),M=M.add(c(N)))}return M}var m=u(0),p=u(1),v=u(16777216);e=r.prototype,e.m=function(){if(b(this))return-D(this).m();for(var I=0,w=1,A=0;A<this.g.length;A++){var M=this.i(A);I+=(0<=M?M:4294967296+M)*w,w*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(b(this))return"-"+D(this).toString(I);for(var w=c(Math.pow(I,6)),A=this,M="";;){var R=V(A,w).g;A=E(A,R.j(w));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=R,x(A))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function b(I){return I.h==-1}e.l=function(I){return I=E(this,I),b(I)?-1:x(I)?0:1};function D(I){for(var w=I.g.length,A=[],M=0;M<w;M++)A[M]=~I.g[M];return new r(A,~I.h).add(p)}e.abs=function(){return b(this)?D(this):this},e.add=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],M=0,R=0;R<=w;R++){var P=M+(this.i(R)&65535)+(I.i(R)&65535),N=(P>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);M=N>>>16,P&=65535,N&=65535,A[R]=N<<16|P}return new r(A,A[A.length-1]&-2147483648?-1:0)};function E(I,w){return I.add(D(w))}e.j=function(I){if(x(this)||x(I))return m;if(b(this))return b(I)?D(this).j(D(I)):D(D(this).j(I));if(b(I))return D(this.j(D(I)));if(0>this.l(v)&&0>I.l(v))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,A=[],M=0;M<2*w;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<I.g.length;R++){var P=this.i(M)>>>16,N=this.i(M)&65535,gt=I.i(R)>>>16,$e=I.i(R)&65535;A[2*M+2*R]+=N*$e,_(A,2*M+2*R),A[2*M+2*R+1]+=P*$e,_(A,2*M+2*R+1),A[2*M+2*R+1]+=N*gt,_(A,2*M+2*R+1),A[2*M+2*R+2]+=P*gt,_(A,2*M+2*R+2)}for(M=0;M<w;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=w;M<2*w;M++)A[M]=0;return new r(A,0)};function _(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function C(I,w){this.g=I,this.h=w}function V(I,w){if(x(w))throw Error("division by zero");if(x(I))return new C(m,m);if(b(I))return w=V(D(I),w),new C(D(w.g),D(w.h));if(b(w))return w=V(I,D(w)),new C(D(w.g),w.h);if(30<I.g.length){if(b(I)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var A=p,M=w;0>=M.l(I);)A=L(A),M=L(M);var R=B(A,1),P=B(M,1);for(M=B(M,2),A=B(A,2);!x(M);){var N=P.add(M);0>=N.l(I)&&(R=R.add(A),P=N),M=B(M,1),A=B(A,1)}return w=E(I,R.j(w)),new C(R,w)}for(R=m;0<=I.l(w);){for(A=Math.max(1,Math.floor(I.m()/w.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=c(A),N=P.j(w);b(N)||0<N.l(I);)A-=M,P=c(A),N=P.j(w);x(P)&&(P=p),R=R.add(P),I=E(I,N)}return new C(R,I)}e.A=function(I){return V(this,I).h},e.and=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],M=0;M<w;M++)A[M]=this.i(M)&I.i(M);return new r(A,this.h&I.h)},e.or=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],M=0;M<w;M++)A[M]=this.i(M)|I.i(M);return new r(A,this.h|I.h)},e.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),A=[],M=0;M<w;M++)A[M]=this.i(M)^I.i(M);return new r(A,this.h^I.h)};function L(I){for(var w=I.g.length+1,A=[],M=0;M<w;M++)A[M]=I.i(M)<<1|I.i(M-1)>>>31;return new r(A,I.h)}function B(I,w){var A=w>>5;w%=32;for(var M=I.g.length-A,R=[],P=0;P<M;P++)R[P]=0<w?I.i(P+A)>>>w|I.i(P+A+1)<<32-w:I.i(P+A);return new r(R,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,AA=i,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=c,r.fromString=h,ro=r}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CA,_r,wA,Gl,ch,RA,IA,xA;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,y){return f==Array.prototype||f==Object.prototype||(f[g]=y.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ml=="object"&&ml];for(var g=0;g<f.length;++g){var y=f[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function o(f,g){if(g)t:{var y=i;f=f.split(".");for(var S=0;S<f.length-1;S++){var k=f[S];if(!(k in y))break t;y=y[k]}f=f[f.length-1],S=y[f],g=g(S),g!=S&&g!=null&&t(y,f,{configurable:!0,writable:!0,value:g})}}function s(f,g){f instanceof String&&(f+="");var y=0,S=!1,k={next:function(){if(!S&&y<f.length){var U=y++;return{value:g(U,f[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}o("Array.prototype.values",function(f){return f||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},a=this||self;function u(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function c(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function h(f,g,y){return f.call.apply(f.bind,arguments)}function m(f,g,y){if(!f)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,S),f.apply(g,k)}}return function(){return f.apply(g,arguments)}}function p(f,g,y){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function v(f,g){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function x(f,g){function y(){}y.prototype=g.prototype,f.aa=g.prototype,f.prototype=new y,f.prototype.constructor=f,f.Qb=function(S,k,U){for(var F=Array(arguments.length-2),St=2;St<arguments.length;St++)F[St-2]=arguments[St];return g.prototype[k].apply(S,F)}}function b(f){const g=f.length;if(0<g){const y=Array(g);for(let S=0;S<g;S++)y[S]=f[S];return y}return[]}function D(f,g){for(let y=1;y<arguments.length;y++){const S=arguments[y];if(u(S)){const k=f.length||0,U=S.length||0;f.length=k+U;for(let F=0;F<U;F++)f[k+F]=S[F]}else f.push(S)}}class E{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(f){return/^[\s\xa0]*$/.test(f)}function C(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function V(f){return V[" "](f),f}V[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(f,g,y){for(const S in f)g.call(y,f[S],S,f)}function I(f,g){for(const y in f)g.call(void 0,f[y],y,f)}function w(f){const g={};for(const y in f)g[y]=f[y];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,g){let y,S;for(let k=1;k<arguments.length;k++){S=arguments[k];for(y in S)f[y]=S[y];for(let U=0;U<A.length;U++)y=A[U],Object.prototype.hasOwnProperty.call(S,y)&&(f[y]=S[y])}}function R(f){var g=1;f=f.split(":");const y=[];for(;0<g&&f.length;)y.push(f.shift()),g--;return f.length&&y.push(f.join(":")),y}function P(f){a.setTimeout(()=>{throw f},0)}function N(){var f=wt;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class gt{constructor(){this.h=this.g=null}add(g,y){const S=$e.get();S.set(g,y),this.h?this.h.next=S:this.g=S,this.h=S}}var $e=new E(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let $,Z=!1,wt=new gt,Lt=()=>{const f=a.Promise.resolve(void 0);$=()=>{f.then(wo)}};var wo=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(y){P(y)}var g=$e;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}Z=!1};function ke(){this.s=this.s,this.C=this.C}ke.prototype.s=!1,ke.prototype.ma=function(){this.s||(this.s=!0,this.N())},ke.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var xn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return f}();function gn(f,g){if(qt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var y=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(L){t:{try{V(g.nodeName);var k=!0;break t}catch{}k=!1}k||(g=null)}}else y=="mouseover"?g=f.fromElement:y=="mouseout"&&(g=f.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:FC[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&gn.aa.h.call(this)}}x(gn,qt);var FC={2:"touch",3:"pen",4:"mouse"};gn.prototype.h=function(){gn.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ba="closure_listenable_"+(1e6*Math.random()|0),HC=0;function zC(f,g,y,S,k){this.listener=f,this.proxy=null,this.src=g,this.type=y,this.capture=!!S,this.ha=k,this.key=++HC,this.da=this.fa=!1}function Na(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ma(f){this.src=f,this.g={},this.h=0}Ma.prototype.add=function(f,g,y,S,k){var U=f.toString();f=this.g[U],f||(f=this.g[U]=[],this.h++);var F=Rc(f,g,S,k);return-1<F?(g=f[F],y||(g.fa=!1)):(g=new zC(g,this.src,U,!!S,k),g.fa=y,f.push(g)),g};function wc(f,g){var y=g.type;if(y in f.g){var S=f.g[y],k=Array.prototype.indexOf.call(S,g,void 0),U;(U=0<=k)&&Array.prototype.splice.call(S,k,1),U&&(Na(g),f.g[y].length==0&&(delete f.g[y],f.h--))}}function Rc(f,g,y,S){for(var k=0;k<f.length;++k){var U=f[k];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==S)return k}return-1}var Ic="closure_lm_"+(1e6*Math.random()|0),xc={};function gm(f,g,y,S,k){if(Array.isArray(g)){for(var U=0;U<g.length;U++)gm(f,g[U],y,S,k);return null}return y=_m(y),f&&f[ba]?f.K(g,y,c(S)?!!S.capture:!1,k):YC(f,g,y,!1,S,k)}function YC(f,g,y,S,k,U){if(!g)throw Error("Invalid event type");var F=c(k)?!!k.capture:!!k,St=Nc(f);if(St||(f[Ic]=St=new Ma(f)),y=St.add(g,y,S,F,U),y.proxy)return y;if(S=KC(),y.proxy=S,S.src=f,S.listener=y,f.addEventListener)xn||(k=F),k===void 0&&(k=!1),f.addEventListener(g.toString(),S,k);else if(f.attachEvent)f.attachEvent(vm(g.toString()),S);else if(f.addListener&&f.removeListener)f.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function KC(){function f(y){return g.call(f.src,f.listener,y)}const g=JC;return f}function ym(f,g,y,S,k){if(Array.isArray(g))for(var U=0;U<g.length;U++)ym(f,g[U],y,S,k);else S=c(S)?!!S.capture:!!S,y=_m(y),f&&f[ba]?(f=f.i,g=String(g).toString(),g in f.g&&(U=f.g[g],y=Rc(U,y,S,k),-1<y&&(Na(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete f.g[g],f.h--)))):f&&(f=Nc(f))&&(g=f.g[g.toString()],f=-1,g&&(f=Rc(g,y,S,k)),(y=-1<f?g[f]:null)&&bc(y))}function bc(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[ba])wc(g.i,f);else{var y=f.type,S=f.proxy;g.removeEventListener?g.removeEventListener(y,S,f.capture):g.detachEvent?g.detachEvent(vm(y),S):g.addListener&&g.removeListener&&g.removeListener(S),(y=Nc(g))?(wc(y,f),y.h==0&&(y.src=null,g[Ic]=null)):Na(f)}}}function vm(f){return f in xc?xc[f]:xc[f]="on"+f}function JC(f,g){if(f.da)f=!0;else{g=new gn(g,this);var y=f.listener,S=f.ha||f.src;f.fa&&bc(f),f=y.call(S,g)}return f}function Nc(f){return f=f[Ic],f instanceof Ma?f:null}var Mc="__closure_events_fn_"+(1e9*Math.random()>>>0);function _m(f){return typeof f=="function"?f:(f[Mc]||(f[Mc]=function(g){return f.handleEvent(g)}),f[Mc])}function de(){ke.call(this),this.i=new Ma(this),this.M=this,this.F=null}x(de,ke),de.prototype[ba]=!0,de.prototype.removeEventListener=function(f,g,y,S){ym(this,f,g,y,S)};function _e(f,g){var y,S=f.F;if(S)for(y=[];S;S=S.F)y.push(S);if(f=f.M,S=g.type||g,typeof g=="string")g=new qt(g,f);else if(g instanceof qt)g.target=g.target||f;else{var k=g;g=new qt(S,f),M(g,k)}if(k=!0,y)for(var U=y.length-1;0<=U;U--){var F=g.g=y[U];k=Da(F,S,!0,g)&&k}if(F=g.g=f,k=Da(F,S,!0,g)&&k,k=Da(F,S,!1,g)&&k,y)for(U=0;U<y.length;U++)F=g.g=y[U],k=Da(F,S,!1,g)&&k}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var y=f.g[g],S=0;S<y.length;S++)Na(y[S]);delete f.g[g],f.h--}}this.F=null},de.prototype.K=function(f,g,y,S){return this.i.add(String(f),g,!1,y,S)},de.prototype.L=function(f,g,y,S){return this.i.add(String(f),g,!0,y,S)};function Da(f,g,y,S){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var k=!0,U=0;U<g.length;++U){var F=g[U];if(F&&!F.da&&F.capture==y){var St=F.listener,ne=F.ha||F.src;F.fa&&wc(f.i,F),k=St.call(ne,S)!==!1&&k}}return k&&!S.defaultPrevented}function Tm(f,g,y){if(typeof f=="function")y&&(f=p(f,y));else if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function Em(f){f.g=Tm(()=>{f.g=null,f.i&&(f.i=!1,Em(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class QC extends ke{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Em(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(f){ke.call(this),this.h=f,this.g={}}x(Hs,ke);var Sm=[];function Am(f){B(f.g,function(g,y){this.g.hasOwnProperty(y)&&bc(g)},f),f.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),Am(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dc=a.JSON.stringify,$C=a.JSON.parse,XC=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Vc(){}Vc.prototype.h=null;function Cm(f){return f.h||(f.h=f.i())}function wm(){}var zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pc(){qt.call(this,"d")}x(Pc,qt);function kc(){qt.call(this,"c")}x(kc,qt);var Hi={},Rm=null;function Va(){return Rm=Rm||new de}Hi.La="serverreachability";function Im(f){qt.call(this,Hi.La,f)}x(Im,qt);function Ys(f){const g=Va();_e(g,new Im(g))}Hi.STAT_EVENT="statevent";function xm(f,g){qt.call(this,Hi.STAT_EVENT,f),this.stat=g}x(xm,qt);function Te(f){const g=Va();_e(g,new xm(g,f))}Hi.Ma="timingevent";function bm(f,g){qt.call(this,Hi.Ma,f),this.size=g}x(bm,qt);function Ks(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function Js(){this.g=!0}Js.prototype.xa=function(){this.g=!1};function WC(f,g,y,S,k,U){f.info(function(){if(f.g)if(U)for(var F="",St=U.split("&"),ne=0;ne<St.length;ne++){var ft=St[ne].split("=");if(1<ft.length){var he=ft[0];ft=ft[1];var pe=he.split("_");F=2<=pe.length&&pe[1]=="type"?F+(he+"="+ft+"&"):F+(he+"=redacted&")}}else F=null;else F=U;return"XMLHTTP REQ ("+S+") [attempt "+k+"]: "+g+`
`+y+`
`+F})}function ZC(f,g,y,S,k,U,F){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+k+"]: "+g+`
`+y+`
`+U+" "+F})}function Ro(f,g,y,S){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+tw(f,y)+(S?" "+S:"")})}function jC(f,g){f.info(function(){return"TIMEOUT: "+g})}Js.prototype.info=function(){};function tw(f,g){if(!f.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(f=0;f<y.length;f++)if(Array.isArray(y[f])){var S=y[f];if(!(2>S.length)){var k=S[1];if(Array.isArray(k)&&!(1>k.length)){var U=k[0];if(U!="noop"&&U!="stop"&&U!="close")for(var F=1;F<k.length;F++)k[F]=""}}}}return Dc(y)}catch{return g}}var Pa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uc;function ka(){}x(ka,Vc),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},Uc=new ka;function ni(f,g,y,S){this.j=f,this.i=g,this.l=y,this.R=S||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mm}function Mm(){this.i=null,this.g="",this.h=!1}var Dm={},Lc={};function Oc(f,g,y){f.L=1,f.v=Ba(bn(g)),f.m=y,f.P=!0,Vm(f,null)}function Vm(f,g){f.F=Date.now(),Ua(f),f.A=bn(f.v);var y=f.A,S=f.R;Array.isArray(S)||(S=[String(S)]),Jm(y.i,"t",S),f.C=0,y=f.j.J,f.h=new Mm,f.g=fg(f.j,y?g:null,!f.m),0<f.O&&(f.M=new QC(p(f.Y,f,f.g),f.O)),g=f.U,y=f.g,S=f.ca;var k="readystatechange";Array.isArray(k)||(k&&(Sm[0]=k.toString()),k=Sm);for(var U=0;U<k.length;U++){var F=gm(y,k[U],S||g.handleEvent,!1,g.h||g);if(!F)break;g.g[F.key]=F}g=f.H?w(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),Ys(),WC(f.i,f.u,f.A,f.l,f.R,f.m)}ni.prototype.ca=function(f){f=f.target;const g=this.M;g&&Nn(f)==3?g.j():this.Y(f)},ni.prototype.Y=function(f){try{if(f==this.g)t:{const pe=Nn(this.g);var g=this.g.Ba();const bo=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||tg(this.g)))){this.J||pe!=4||g==7||(g==8||0>=bo?Ys(3):Ys(2)),Bc(this);var y=this.g.Z();this.X=y;e:if(Pm(this)){var S=tg(this.g);f="";var k=S.length,U=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),Qs(this);var F="";break e}this.h.i=new a.TextDecoder}for(g=0;g<k;g++)this.h.h=!0,f+=this.h.i.decode(S[g],{stream:!(U&&g==k-1)});S.length=0,this.h.g+=f,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=y==200,ZC(this.i,this.u,this.A,this.l,this.R,pe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var St,ne=this.g;if((St=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(St)){var ft=St;break e}}ft=null}if(y=ft)Ro(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gc(this,y);else{this.o=!1,this.s=3,Te(12),zi(this),Qs(this);break t}}if(this.P){y=!0;let un;for(;!this.J&&this.C<F.length;)if(un=ew(this,F),un==Lc){pe==4&&(this.s=4,Te(14),y=!1),Ro(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Dm){this.s=4,Te(15),Ro(this.i,this.l,F,"[Invalid Chunk]"),y=!1;break}else Ro(this.i,this.l,un,null),Gc(this,un);if(Pm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||F.length!=0||this.h.h||(this.s=1,Te(16),y=!1),this.o=this.o&&y,!y)Ro(this.i,this.l,F,"[Invalid Chunked Response]"),zi(this),Qs(this);else if(0<F.length&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.ba&&!he.M&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Kc(he),he.M=!0,Te(11))}}else Ro(this.i,this.l,F,null),Gc(this,F);pe==4&&zi(this),this.o&&!this.J&&(pe==4?ag(this.j,this):(this.o=!1,Ua(this)))}else vw(this.g),y==400&&0<F.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),zi(this),Qs(this)}}}catch{}finally{}};function Pm(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ew(f,g){var y=f.C,S=g.indexOf(`
`,y);return S==-1?Lc:(y=Number(g.substring(y,S)),isNaN(y)?Dm:(S+=1,S+y>g.length?Lc:(g=g.slice(S,S+y),f.C=S+y,g)))}ni.prototype.cancel=function(){this.J=!0,zi(this)};function Ua(f){f.S=Date.now()+f.I,km(f,f.I)}function km(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ks(p(f.ba,f),g)}function Bc(f){f.B&&(a.clearTimeout(f.B),f.B=null)}ni.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(jC(this.i,this.A),this.L!=2&&(Ys(),Te(17)),zi(this),this.s=2,Qs(this)):km(this,this.S-f)};function Qs(f){f.j.G==0||f.J||ag(f.j,f)}function zi(f){Bc(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Am(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Gc(f,g){try{var y=f.j;if(y.G!=0&&(y.g==f||qc(y.h,f))){if(!f.K&&qc(y.h,f)&&y.G==3){try{var S=y.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var k=S;if(k[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<f.F)Ya(y),Ha(y);else break t;Yc(y),Te(18)}}else y.za=k[1],0<y.za-y.T&&37500>k[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ks(p(y.Za,y),6e3));if(1>=Om(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ki(y,11)}else if((f.K||y.g==f)&&Ya(y),!_(g))for(k=y.Da.g.parse(g),g=0;g<k.length;g++){let ft=k[g];if(y.T=ft[0],ft=ft[1],y.G==2)if(ft[0]=="c"){y.K=ft[1],y.ia=ft[2];const he=ft[3];he!=null&&(y.la=he,y.j.info("VER="+y.la));const pe=ft[4];pe!=null&&(y.Aa=pe,y.j.info("SVER="+y.Aa));const bo=ft[5];bo!=null&&typeof bo=="number"&&0<bo&&(S=1.5*bo,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const un=f.g;if(un){const Ja=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ja){var U=S.h;U.g||Ja.indexOf("spdy")==-1&&Ja.indexOf("quic")==-1&&Ja.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Fc(U,U.h),U.h=null))}if(S.D){const Jc=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Jc&&(S.ya=Jc,Rt(S.I,S.D,Jc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-f.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var F=f;if(S.qa=cg(S,S.J?S.ia:null,S.W),F.K){Bm(S.h,F);var St=F,ne=S.L;ne&&(St.I=ne),St.B&&(Bc(St),Ua(St)),S.g=F}else sg(S);0<y.i.length&&za(y)}else ft[0]!="stop"&&ft[0]!="close"||Ki(y,7);else y.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Ki(y,7):zc(y):ft[0]!="noop"&&y.l&&y.l.ta(ft),y.v=0)}}Ys(4)}catch{}}var nw=class{constructor(f,g){this.g=f,this.map=g}};function Um(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lm(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Om(f){return f.h?1:f.g?f.g.size:0}function qc(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Fc(f,g){f.g?f.g.add(g):f.h=g}function Bm(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}Um.prototype.cancel=function(){if(this.i=Gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Gm(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const y of f.g.values())g=g.concat(y.D);return g}return b(f.i)}function iw(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var g=[],y=f.length,S=0;S<y;S++)g.push(f[S]);return g}g=[],y=0;for(S in f)g[y++]=f[S];return g}function ow(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var g=[];f=f.length;for(var y=0;y<f;y++)g.push(y);return g}g=[],y=0;for(const S in f)g[y++]=S;return g}}}function qm(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var y=ow(f),S=iw(f),k=S.length,U=0;U<k;U++)g.call(void 0,S[U],y&&y[U],f)}var Fm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sw(f,g){if(f){f=f.split("&");for(var y=0;y<f.length;y++){var S=f[y].indexOf("="),k=null;if(0<=S){var U=f[y].substring(0,S);k=f[y].substring(S+1)}else U=f[y];g(U,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Yi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Yi){this.h=f.h,La(this,f.j),this.o=f.o,this.g=f.g,Oa(this,f.s),this.l=f.l;var g=f.i,y=new Ws;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Hm(this,y),this.m=f.m}else f&&(g=String(f).match(Fm))?(this.h=!1,La(this,g[1]||"",!0),this.o=$s(g[2]||""),this.g=$s(g[3]||"",!0),Oa(this,g[4]),this.l=$s(g[5]||"",!0),Hm(this,g[6]||"",!0),this.m=$s(g[7]||"")):(this.h=!1,this.i=new Ws(null,this.h))}Yi.prototype.toString=function(){var f=[],g=this.j;g&&f.push(Xs(g,zm,!0),":");var y=this.g;return(y||g=="file")&&(f.push("//"),(g=this.o)&&f.push(Xs(g,zm,!0),"@"),f.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&f.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(Xs(y,y.charAt(0)=="/"?lw:aw,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",Xs(y,cw)),f.join("")};function bn(f){return new Yi(f)}function La(f,g,y){f.j=y?$s(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function Oa(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function Hm(f,g,y){g instanceof Ws?(f.i=g,fw(f.i,f.h)):(y||(g=Xs(g,uw)),f.i=new Ws(g,f.h))}function Rt(f,g,y){f.i.set(g,y)}function Ba(f){return Rt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function $s(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Xs(f,g,y){return typeof f=="string"?(f=encodeURI(f).replace(g,rw),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function rw(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zm=/[#\/\?@]/g,aw=/[#\?:]/g,lw=/[#\?]/g,uw=/[#\?@]/g,cw=/#/g;function Ws(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function ii(f){f.g||(f.g=new Map,f.h=0,f.i&&sw(f.i,function(g,y){f.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}e=Ws.prototype,e.add=function(f,g){ii(this),this.i=null,f=Io(this,f);var y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(g),this.h+=1,this};function Ym(f,g){ii(f),g=Io(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function Km(f,g){return ii(f),g=Io(f,g),f.g.has(g)}e.forEach=function(f,g){ii(this),this.g.forEach(function(y,S){y.forEach(function(k){f.call(g,k,S,this)},this)},this)},e.na=function(){ii(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let S=0;S<g.length;S++){const k=f[S];for(let U=0;U<k.length;U++)y.push(g[S])}return y},e.V=function(f){ii(this);let g=[];if(typeof f=="string")Km(this,f)&&(g=g.concat(this.g.get(Io(this,f))));else{f=Array.from(this.g.values());for(let y=0;y<f.length;y++)g=g.concat(f[y])}return g},e.set=function(f,g){return ii(this),this.i=null,f=Io(this,f),Km(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},e.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function Jm(f,g,y){Ym(f,g),0<y.length&&(f.i=null,f.g.set(Io(f,g),b(y)),f.h+=y.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var S=g[y];const U=encodeURIComponent(String(S)),F=this.V(S);for(S=0;S<F.length;S++){var k=U;F[S]!==""&&(k+="="+encodeURIComponent(String(F[S]))),f.push(k)}}return this.i=f.join("&")};function Io(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function fw(f,g){g&&!f.j&&(ii(f),f.i=null,f.g.forEach(function(y,S){var k=S.toLowerCase();S!=k&&(Ym(this,S),Jm(this,k,y))},f)),f.j=g}function dw(f,g){const y=new Js;if(a.Image){const S=new Image;S.onload=v(oi,y,"TestLoadImage: loaded",!0,g,S),S.onerror=v(oi,y,"TestLoadImage: error",!1,g,S),S.onabort=v(oi,y,"TestLoadImage: abort",!1,g,S),S.ontimeout=v(oi,y,"TestLoadImage: timeout",!1,g,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else g(!1)}function hw(f,g){const y=new Js,S=new AbortController,k=setTimeout(()=>{S.abort(),oi(y,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:S.signal}).then(U=>{clearTimeout(k),U.ok?oi(y,"TestPingServer: ok",!0,g):oi(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),oi(y,"TestPingServer: error",!1,g)})}function oi(f,g,y,S,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),S(y)}catch{}}function pw(){this.g=new XC}function mw(f,g,y){const S=y||"";try{qm(f,function(k,U){let F=k;c(k)&&(F=Dc(k)),g.push(S+U+"="+encodeURIComponent(F))})}catch(k){throw g.push(S+"type="+encodeURIComponent("_badmap")),k}}function Ga(f){this.l=f.Ub||null,this.j=f.eb||!1}x(Ga,Vc),Ga.prototype.g=function(){return new qa(this.l,this.j)},Ga.prototype.i=function(f){return function(){return f}}({});function qa(f,g){de.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(qa,de),e=qa.prototype,e.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,js(this)},e.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},e.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qm(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qm(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}e.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?Zs(this):js(this),this.readyState==3&&Qm(this)}},e.Ra=function(f){this.g&&(this.response=this.responseText=f,Zs(this))},e.Qa=function(f){this.g&&(this.response=f,Zs(this))},e.ga=function(){this.g&&Zs(this)};function Zs(f){f.readyState=4,f.l=null,f.j=null,f.v=null,js(f)}e.setRequestHeader=function(f,g){this.u.append(f,g)},e.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=g.next();return f.join(`\r
`)};function js(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function $m(f){let g="";return B(f,function(y,S){g+=S,g+=":",g+=y,g+=`\r
`}),g}function Hc(f,g,y){t:{for(S in y){var S=!1;break t}S=!0}S||(y=$m(y),typeof f=="string"?y!=null&&encodeURIComponent(String(y)):Rt(f,g,y))}function Vt(f){de.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Vt,de);var gw=/^https?$/i,yw=["POST","PUT"];e=Vt.prototype,e.Ha=function(f){this.J=f},e.ea=function(f,g,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uc.g(),this.v=this.o?Cm(this.o):Cm(Uc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(U){Xm(this,U);return}if(f=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var k in S)y.set(k,S[k]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())y.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),k=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(yw,g,void 0))||S||k||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,F]of y)this.g.setRequestHeader(U,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jm(this),this.u=!0,this.g.send(f),this.u=!1}catch(U){Xm(this,U)}};function Xm(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,Wm(f),Fa(f)}function Wm(f){f.A||(f.A=!0,_e(f,"complete"),_e(f,"error"))}e.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,_e(this,"complete"),_e(this,"abort"),Fa(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fa(this,!0)),Vt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Zm(this):this.bb())},e.bb=function(){Zm(this)};function Zm(f){if(f.h&&typeof r<"u"&&(!f.v[1]||Nn(f)!=4||f.Z()!=2)){if(f.u&&Nn(f)==4)Tm(f.Ea,0,f);else if(_e(f,"readystatechange"),Nn(f)==4){f.h=!1;try{const F=f.Z();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break t;default:g=!1}var y;if(!(y=g)){var S;if(S=F===0){var k=String(f.D).match(Fm)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),S=!gw.test(k?k.toLowerCase():"")}y=S}if(y)_e(f,"complete"),_e(f,"success");else{f.m=6;try{var U=2<Nn(f)?f.g.statusText:""}catch{U=""}f.l=U+" ["+f.Z()+"]",Wm(f)}}finally{Fa(f)}}}}function Fa(f,g){if(f.g){jm(f);const y=f.g,S=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||_e(f,"ready");try{y.onreadystatechange=S}catch{}}}function jm(f){f.I&&(a.clearTimeout(f.I),f.I=null)}e.isActive=function(){return!!this.g};function Nn(f){return f.g?f.g.readyState:0}e.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),$C(g)}};function tg(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function vw(f){const g={};f=(f.g&&2<=Nn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<f.length;S++){if(_(f[S]))continue;var y=R(f[S]);const k=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[k]||[];g[k]=U,U.push(y)}I(g,function(S){return S.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(f,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||g}function eg(f){this.Aa=0,this.i=[],this.j=new Js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,f),this.cb=tr("retryDelaySeedMs",1e4,f),this.Wa=tr("forwardChannelMaxRetries",2,f),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Um(f&&f.concurrentRequestLimit),this.Da=new pw,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=eg.prototype,e.la=8,e.G=1,e.connect=function(f,g,y,S){Te(0),this.W=f,this.H=g||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=cg(this,null,this.W),za(this)};function zc(f){if(ng(f),f.G==3){var g=f.U++,y=bn(f.I);if(Rt(y,"SID",f.K),Rt(y,"RID",g),Rt(y,"TYPE","terminate"),er(f,y),g=new ni(f,f.j,g),g.L=2,g.v=Ba(bn(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=fg(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Ua(g)}ug(f)}function Ha(f){f.g&&(Kc(f),f.g.cancel(),f.g=null)}function ng(f){Ha(f),f.u&&(a.clearTimeout(f.u),f.u=null),Ya(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function za(f){if(!Lm(f.h)&&!f.s){f.s=!0;var g=f.Ga;$||Lt(),Z||($(),Z=!0),wt.add(g,f),f.B=0}}function _w(f,g){return Om(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ks(p(f.Ga,f,g),lg(f,f.B)),f.B++,!0)}e.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const k=new ni(this,this.j,f);let U=this.o;if(this.S&&(U?(U=w(U),M(U,this.S)):U=this.S),this.m!==null||this.O||(k.H=U,U=null),this.P)t:{for(var g=0,y=0;y<this.i.length;y++){e:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=y;break t}if(g===4096||y===this.i.length-1){g=y+1;break t}}g=1e3}else g=1e3;g=og(this,k,g),y=bn(this.I),Rt(y,"RID",f),Rt(y,"CVER",22),this.D&&Rt(y,"X-HTTP-Session-Id",this.D),er(this,y),U&&(this.O?g="headers="+encodeURIComponent(String($m(U)))+"&"+g:this.m&&Hc(y,this.m,U)),Fc(this.h,k),this.Ua&&Rt(y,"TYPE","init"),this.P?(Rt(y,"$req",g),Rt(y,"SID","null"),k.T=!0,Oc(k,y,null)):Oc(k,y,g),this.G=2}}else this.G==3&&(f?ig(this,f):this.i.length==0||Lm(this.h)||ig(this))};function ig(f,g){var y;g?y=g.l:y=f.U++;const S=bn(f.I);Rt(S,"SID",f.K),Rt(S,"RID",y),Rt(S,"AID",f.T),er(f,S),f.m&&f.o&&Hc(S,f.m,f.o),y=new ni(f,f.j,y,f.B+1),f.m===null&&(y.H=f.o),g&&(f.i=g.D.concat(f.i)),g=og(f,y,1e3),y.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fc(f.h,y),Oc(y,S,g)}function er(f,g){f.H&&B(f.H,function(y,S){Rt(g,S,y)}),f.l&&qm({},function(y,S){Rt(g,S,y)})}function og(f,g,y){y=Math.min(f.i.length,y);var S=f.l?p(f.l.Na,f.l,f):null;t:{var k=f.i;let U=-1;for(;;){const F=["count="+y];U==-1?0<y?(U=k[0].g,F.push("ofs="+U)):U=0:F.push("ofs="+U);let St=!0;for(let ne=0;ne<y;ne++){let ft=k[ne].g;const he=k[ne].map;if(ft-=U,0>ft)U=Math.max(0,k[ne].g-100),St=!1;else try{mw(he,F,"req"+ft+"_")}catch{S&&S(he)}}if(St){S=F.join("&");break t}}}return f=f.i.splice(0,y),g.D=f,S}function sg(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;$||Lt(),Z||($(),Z=!0),wt.add(g,f),f.v=0}}function Yc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ks(p(f.Fa,f),lg(f,f.v)),f.v++,!0)}e.Fa=function(){if(this.u=null,rg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ks(p(this.ab,this),f)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Ha(this),rg(this))};function Kc(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function rg(f){f.g=new ni(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=bn(f.qa);Rt(g,"RID","rpc"),Rt(g,"SID",f.K),Rt(g,"AID",f.T),Rt(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&Rt(g,"TO",f.ja),Rt(g,"TYPE","xmlhttp"),er(f,g),f.m&&f.o&&Hc(g,f.m,f.o),f.L&&(f.g.I=f.L);var y=f.g;f=f.ia,y.L=1,y.v=Ba(bn(g)),y.m=null,y.P=!0,Vm(y,f)}e.Za=function(){this.C!=null&&(this.C=null,Ha(this),Yc(this),Te(19))};function Ya(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function ag(f,g){var y=null;if(f.g==g){Ya(f),Kc(f),f.g=null;var S=2}else if(qc(f.h,g))y=g.D,Bm(f.h,g),S=1;else return;if(f.G!=0){if(g.o)if(S==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var k=f.B;S=Va(),_e(S,new bm(S,y)),za(f)}else sg(f);else if(k=g.s,k==3||k==0&&0<g.X||!(S==1&&_w(f,g)||S==2&&Yc(f)))switch(y&&0<y.length&&(g=f.h,g.i=g.i.concat(y)),k){case 1:Ki(f,5);break;case 4:Ki(f,10);break;case 3:Ki(f,6);break;default:Ki(f,2)}}}function lg(f,g){let y=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(y*=2),y*g}function Ki(f,g){if(f.j.info("Error code "+g),g==2){var y=p(f.fb,f),S=f.Xa;const k=!S;S=new Yi(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||La(S,"https"),Ba(S),k?dw(S.toString(),y):hw(S.toString(),y)}else Te(2);f.G=0,f.l&&f.l.sa(g),ug(f),ng(f)}e.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function ug(f){if(f.G=0,f.ka=[],f.l){const g=Gm(f.h);(g.length!=0||f.i.length!=0)&&(D(f.ka,g),D(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function cg(f,g,y){var S=y instanceof Yi?bn(y):new Yi(y);if(S.g!="")g&&(S.g=g+"."+S.g),Oa(S,S.s);else{var k=a.location;S=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;var U=new Yi(null);S&&La(U,S),g&&(U.g=g),k&&Oa(U,k),y&&(U.l=y),S=U}return y=f.D,g=f.ya,y&&g&&Rt(S,y,g),Rt(S,"VER",f.la),er(f,S),S}function fg(f,g,y){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new Vt(new Ga({eb:y})):new Vt(f.pa),g.Ha(f.J),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function dg(){}e=dg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ka(){}Ka.prototype.g=function(f,g){return new Ue(f,g)};function Ue(f,g){de.call(this),this.g=new eg(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!_(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!_(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new xo(this)}x(Ue,de),Ue.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ue.prototype.close=function(){zc(this.g)},Ue.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.u&&(y={},y.__data__=Dc(f),f=y);g.i.push(new nw(g.Ya++,f)),g.G==3&&za(g)},Ue.prototype.N=function(){this.g.l=null,delete this.j,zc(this.g),delete this.g,Ue.aa.N.call(this)};function hg(f){Pc.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){t:{for(const y in g){f=y;break t}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}x(hg,Pc);function pg(){kc.call(this),this.status=1}x(pg,kc);function xo(f){this.g=f}x(xo,dg),xo.prototype.ua=function(){_e(this.g,"a")},xo.prototype.ta=function(f){_e(this.g,new hg(f))},xo.prototype.sa=function(f){_e(this.g,new pg)},xo.prototype.ra=function(){_e(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,Ue.prototype.send=Ue.prototype.o,Ue.prototype.open=Ue.prototype.m,Ue.prototype.close=Ue.prototype.close,xA=function(){return new Ka},IA=function(){return Va()},RA=Hi,ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pa.NO_ERROR=0,Pa.TIMEOUT=8,Pa.HTTP_ERROR=6,Gl=Pa,Nm.COMPLETE="complete",wA=Nm,wm.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",de.prototype.listen=de.prototype.K,_r=wm,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,CA=Vt}).apply(typeof ml<"u"?ml:typeof self<"u"?self:typeof window<"u"?window:{});const P0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ge.UNAUTHENTICATED=new ge(null),ge.GOOGLE_CREDENTIALS=new ge("google-credentials-uid"),ge.FIRST_PARTY=new ge("first-party-uid"),ge.MOCK_USER=new ge("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new yA("@firebase/firestore");function fr(){return po.logLevel}function Y(e,...t){if(po.logLevel<=ct.DEBUG){const n=t.map(Bp);po.debug(`Firestore (${Gs}): ${e}`,...n)}}function Wn(e,...t){if(po.logLevel<=ct.ERROR){const n=t.map(Bp);po.error(`Firestore (${Gs}): ${e}`,...n)}}function Es(e,...t){if(po.logLevel<=ct.WARN){const n=t.map(Bp);po.warn(`Firestore (${Gs}): ${e}`,...n)}}function Bp(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(e="Unexpected state"){const t=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+e;throw Wn(t),new Error(t)}function _t(e,t){e||X()}function tt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Bs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ge.UNAUTHENTICATED))}shutdown(){}}class Ak{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ck{constructor(t){this.t=t,this.currentUser=ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){_t(this.o===void 0);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new ao;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ao,t.enqueueRetryable(()=>o(this.currentUser))};const r=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await o(this.currentUser)})},a=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ao)}},0),r()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_t(typeof i.accessToken=="string"),new bA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return _t(t===null||typeof t=="string"),new ge(t)}}class wk{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Rk{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new wk(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ik{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xk{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){_t(this.o===void 0);const i=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const r=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const o=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?o(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(_t(typeof n.token=="string"),this.R=n.token,new Ik(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const o=bk(40);for(let s=0;s<o.length;++s)i.length<20&&o[s]<n&&(i+=t.charAt(o[s]%t.length))}return i}}function dt(e,t){return e<t?-1:e>t?1:0}function Ss(e,t,n){return e.length===t.length&&e.every((i,o)=>n(i,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new K(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new K(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new K(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $t.fromMillis(Date.now())}static fromDate(t){return $t.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new $t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.timestamp=t}static fromTimestamp(t){return new j(t)}static min(){return new j(new $t(0,0))}static max(){return new j(new $t(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n,i){n===void 0?n=0:n>t.length&&X(),i===void 0?i=t.length-n:i>t.length-n&&X(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ia.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ia?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let o=0;o<i;o++){const s=t.get(o),r=n.get(o);if(s<r)return-1;if(s>r)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ut extends ia{construct(t,n,i){return new Ut(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new K(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Ut(n)}static emptyPath(){return new Ut([])}}const Nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ae extends ia{construct(t,n,i){return new ae(t,n,i)}static isValidIdentifier(t){return Nk.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ae.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ae(["__name__"])}static fromServerFormat(t){const n=[];let i="",o=0;const s=()=>{if(i.length===0)throw new K(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let r=!1;for(;o<t.length;){const a=t[o];if(a==="\\"){if(o+1===t.length)throw new K(q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[o+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=u,o+=2}else a==="`"?(r=!r,o++):a!=="."||r?(i+=a,o++):(s(),o++)}if(s(),r)throw new K(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ae(n)}static emptyPath(){return new ae([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.path=t}static fromPath(t){return new J(Ut.fromString(t))}static fromName(t){return new J(Ut.fromString(t).popFirst(5))}static empty(){return new J(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ut.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ut.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new J(new Ut(t.slice()))}}function Mk(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,o=j.fromTimestamp(i===1e9?new $t(n+1,0):new $t(n,i));return new Ui(o,J.empty(),t)}function Dk(e){return new Ui(e.readTime,e.key,-1)}class Ui{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Ui(j.min(),J.empty(),-1)}static max(){return new Ui(j.max(),J.empty(),-1)}}function Vk(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=J.comparator(e.documentKey,t.documentKey),n!==0?n:dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==Pk)throw e;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new G((i,o)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,o)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):G.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):G.reject(n)}static resolve(t){return new G((n,i)=>{n(t)})}static reject(t){return new G((n,i)=>{i(t)})}static waitFor(t){return new G((n,i)=>{let o=0,s=0,r=!1;t.forEach(a=>{++o,a.next(()=>{++s,r&&s===o&&n()},u=>i(u))}),r=!0,s===o&&n()})}static or(t){let n=G.resolve(!1);for(const i of t)n=n.next(o=>o?G.resolve(o):i());return n}static forEach(t,n){const i=[];return t.forEach((o,s)=>{i.push(n.call(this,o,s))}),this.waitFor(i)}static mapArray(t,n){return new G((i,o)=>{const s=t.length,r=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(t[c]).next(h=>{r[c]=h,++a,a===s&&i(r)},h=>o(h))}})}static doWhile(t,n){return new G((i,o)=>{const s=()=>{t()===!0?n().next(()=>{s()},o):i()};s()})}}function Uk(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Gp.oe=-1;function fc(e){return e==null}function Nu(e){return e===0&&1/e==-1/0}function Lk(e){return typeof e=="number"&&Number.isInteger(e)&&!Nu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ao(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function MA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t,n){this.comparator=t,this.root=n||oe.EMPTY}insert(t,n){return new Dt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,oe.BLACK,null,null))}remove(t){return new Dt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,oe.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(t,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gl(this.root,t,this.comparator,!1)}getReverseIterator(){return new gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gl(this.root,t,this.comparator,!0)}}class gl{constructor(t,n,i,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&o&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class oe{constructor(t,n,i,o,s){this.key=t,this.value=n,this.color=i??oe.RED,this.left=o??oe.EMPTY,this.right=s??oe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,o,s){return new oe(t??this.key,n??this.value,i??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let o=this;const s=i(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,n,i),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return oe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return oe.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const t=this.left.check();if(t!==this.right.check())throw X();return t+(this.isRed()?0:1)}}oe.EMPTY=null,oe.RED=!0,oe.BLACK=!1;oe.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(t,n,i,o,s){return this}insert(t,n,i){return new oe(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.comparator=t,this.data=new Dt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new U0(this.data.getIterator())}getIteratorFrom(t){return new U0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ce)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ce(this.comparator);return n.data=t,n}}class U0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.fields=t,t.sort(ae.comparator)}static empty(){return new qe([])}unionWith(t){let n=new ce(ae.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new qe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ss(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DA("Invalid base64 string: "+s):s}}(t);return new fe(n)}static fromUint8Array(t){const n=function(o){let s="";for(let r=0;r<o.length;++r)s+=String.fromCharCode(o[r]);return s}(t);return new fe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}fe.EMPTY_BYTE_STRING=new fe("");const Ok=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(e){if(_t(!!e),typeof e=="string"){let t=0;const n=Ok.exec(e);if(_t(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mo(e){return typeof e=="string"?fe.fromBase64String(e):fe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fp(e){const t=e.mapValue.fields.__previous_value__;return qp(t)?Fp(t):t}function oa(e){const t=Li(e.mapValue.fields.__local_write_time__.timestampValue);return new $t(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(t,n,i,o,s,r,a,u,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class sa{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof sa&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl={mapValue:{}};function go(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qp(e)?4:qk(e)?9007199254740991:Gk(e)?10:11:X()}function Cn(e,t){if(e===t)return!0;const n=go(e);if(n!==go(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return oa(e).isEqual(oa(t));case 3:return function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const r=Li(o.timestampValue),a=Li(s.timestampValue);return r.seconds===a.seconds&&r.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(o,s){return mo(o.bytesValue).isEqual(mo(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(o,s){return Ot(o.geoPointValue.latitude)===Ot(s.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(s.geoPointValue.longitude)}(e,t);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return Ot(o.integerValue)===Ot(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const r=Ot(o.doubleValue),a=Ot(s.doubleValue);return r===a?Nu(r)===Nu(a):isNaN(r)&&isNaN(a)}return!1}(e,t);case 9:return Ss(e.arrayValue.values||[],t.arrayValue.values||[],Cn);case 10:case 11:return function(o,s){const r=o.mapValue.fields||{},a=s.mapValue.fields||{};if(k0(r)!==k0(a))return!1;for(const u in r)if(r.hasOwnProperty(u)&&(a[u]===void 0||!Cn(r[u],a[u])))return!1;return!0}(e,t);default:return X()}}function ra(e,t){return(e.values||[]).find(n=>Cn(n,t))!==void 0}function As(e,t){if(e===t)return 0;const n=go(e),i=go(t);if(n!==i)return dt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(e.booleanValue,t.booleanValue);case 2:return function(s,r){const a=Ot(s.integerValue||s.doubleValue),u=Ot(r.integerValue||r.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return L0(e.timestampValue,t.timestampValue);case 4:return L0(oa(e),oa(t));case 5:return dt(e.stringValue,t.stringValue);case 6:return function(s,r){const a=mo(s),u=mo(r);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,r){const a=s.split("/"),u=r.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=dt(a[c],u[c]);if(h!==0)return h}return dt(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,r){const a=dt(Ot(s.latitude),Ot(r.latitude));return a!==0?a:dt(Ot(s.longitude),Ot(r.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return O0(e.arrayValue,t.arrayValue);case 10:return function(s,r){var a,u,c,h;const m=s.fields||{},p=r.fields||{},v=(a=m.value)===null||a===void 0?void 0:a.arrayValue,x=(u=p.value)===null||u===void 0?void 0:u.arrayValue,b=dt(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:O0(v,x)}(e.mapValue,t.mapValue);case 11:return function(s,r){if(s===yl.mapValue&&r===yl.mapValue)return 0;if(s===yl.mapValue)return 1;if(r===yl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=r.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=dt(u[m],h[m]);if(p!==0)return p;const v=As(a[u[m]],c[h[m]]);if(v!==0)return v}return dt(u.length,h.length)}(e.mapValue,t.mapValue);default:throw X()}}function L0(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return dt(e,t);const n=Li(e),i=Li(t),o=dt(n.seconds,i.seconds);return o!==0?o:dt(n.nanos,i.nanos)}function O0(e,t){const n=e.values||[],i=t.values||[];for(let o=0;o<n.length&&o<i.length;++o){const s=As(n[o],i[o]);if(s)return s}return dt(n.length,i.length)}function Cs(e){return fh(e)}function fh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Li(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return mo(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return J.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",o=!0;for(const s of n.values||[])o?o=!1:i+=",",i+=fh(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",s=!0;for(const r of i)s?s=!1:o+=",",o+=`${r}:${fh(n.fields[r])}`;return o+"}"}(e.mapValue):X()}function dh(e){return!!e&&"integerValue"in e}function Hp(e){return!!e&&"arrayValue"in e}function B0(e){return!!e&&"nullValue"in e}function G0(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ql(e){return!!e&&"mapValue"in e}function Gk(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ao(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Lr(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qk(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.value=t}static empty(){return new Me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!ql(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Lr(n)}setAll(t){let n=ae.emptyPath(),i={},o=[];t.forEach((r,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,i,o),i={},o=[],n=a.popLast()}r?i[a.lastSegment()]=Lr(r):o.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,o)}delete(t){const n=this.field(t.popLast());ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Cn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let o=n.mapValue.fields[t.get(i)];ql(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,i){Ao(n,(o,s)=>t[o]=s);for(const o of i)delete t[o]}clone(){return new Me(Lr(this.value))}}function VA(e){const t=[];return Ao(e.fields,(n,i)=>{const o=new ae([n]);if(ql(i)){const s=VA(i.mapValue).fields;if(s.length===0)t.push(o);else for(const r of s)t.push(o.child(r))}else t.push(o)}),new qe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(t,n,i,o,s,r,a){this.key=t,this.documentType=n,this.version=i,this.readTime=o,this.createTime=s,this.data=r,this.documentState=a}static newInvalidDocument(t){return new ye(t,0,j.min(),j.min(),j.min(),Me.empty(),0)}static newFoundDocument(t,n,i,o){return new ye(t,1,n,j.min(),i,o,0)}static newNoDocument(t,n){return new ye(t,2,n,j.min(),j.min(),Me.empty(),0)}static newUnknownDocument(t,n){return new ye(t,3,n,j.min(),j.min(),Me.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ye&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ye(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(t,n){this.position=t,this.inclusive=n}}function q0(e,t,n){let i=0;for(let o=0;o<e.position.length;o++){const s=t[o],r=e.position[o];if(s.field.isKeyField()?i=J.comparator(J.fromName(r.referenceValue),n.key):i=As(r,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function F0(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Cn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,n="asc"){this.field=t,this.dir=n}}function Fk(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{}class Qt extends PA{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new zk(t,n,i):n==="array-contains"?new Jk(t,i):n==="in"?new Qk(t,i):n==="not-in"?new $k(t,i):n==="array-contains-any"?new Xk(t,i):new Qt(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new Yk(t,i):new Kk(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(As(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(As(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends PA{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new wn(t,n)}matches(t){return kA(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kA(e){return e.op==="and"}function UA(e){return Hk(e)&&kA(e)}function Hk(e){for(const t of e.filters)if(t instanceof wn)return!1;return!0}function hh(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+Cs(e.value);if(UA(e))return e.filters.map(t=>hh(t)).join(",");{const t=e.filters.map(n=>hh(n)).join(",");return`${e.op}(${t})`}}function LA(e,t){return e instanceof Qt?function(i,o){return o instanceof Qt&&i.op===o.op&&i.field.isEqual(o.field)&&Cn(i.value,o.value)}(e,t):e instanceof wn?function(i,o){return o instanceof wn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((s,r,a)=>s&&LA(r,o.filters[a]),!0):!1}(e,t):void X()}function OA(e){return e instanceof Qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Cs(n.value)}`}(e):e instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(OA).join(" ,")+"}"}(e):"Filter"}class zk extends Qt{constructor(t,n,i){super(t,n,i),this.key=J.fromName(i.referenceValue)}matches(t){const n=J.comparator(t.key,this.key);return this.matchesComparison(n)}}class Yk extends Qt{constructor(t,n){super(t,"in",n),this.keys=BA("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Kk extends Qt{constructor(t,n){super(t,"not-in",n),this.keys=BA("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function BA(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>J.fromName(i.referenceValue))}class Jk extends Qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Hp(n)&&ra(n.arrayValue,this.value)}}class Qk extends Qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&ra(this.value.arrayValue,n)}}class $k extends Qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!ra(this.value.arrayValue,n)}}class Xk extends Qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ra(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(t,n=null,i=[],o=[],s=null,r=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=s,this.startAt=r,this.endAt=a,this.ue=null}}function H0(e,t=null,n=[],i=[],o=null,s=null,r=null){return new Wk(e,t,n,i,o,s,r)}function zp(e){const t=tt(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>hh(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),fc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Cs(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Cs(i)).join(",")),t.ue=n}return t.ue}function Yp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fk(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!LA(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!F0(e.startAt,t.startAt)&&F0(e.endAt,t.endAt)}function ph(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(t,n=null,i=[],o=[],s=null,r="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=s,this.limitType=r,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Zk(e,t,n,i,o,s,r,a){return new dc(e,t,n,i,o,s,r,a)}function Kp(e){return new dc(e)}function z0(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function jk(e){return e.collectionGroup!==null}function Or(e){const t=tt(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(r){let a=new ce(ae.comparator);return r.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Du(s,i))}),n.has(ae.keyField().canonicalString())||t.ce.push(new Du(ae.keyField(),i))}return t.ce}function En(e){const t=tt(e);return t.le||(t.le=tU(t,Or(e))),t.le}function tU(e,t){if(e.limitType==="F")return H0(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(o=>{const s=o.dir==="desc"?"asc":"desc";return new Du(o.field,s)});const n=e.endAt?new Mu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Mu(e.startAt.position,e.startAt.inclusive):null;return H0(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function mh(e,t,n){return new dc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function hc(e,t){return Yp(En(e),En(t))&&e.limitType===t.limitType}function GA(e){return`${zp(En(e))}|lt:${e.limitType}`}function Uo(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>OA(o)).join(", ")}]`),fc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>Cs(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>Cs(o)).join(",")),`Target(${i})`}(En(e))}; limitType=${e.limitType})`}function pc(e,t){return t.isFoundDocument()&&function(i,o){const s=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):J.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,o){for(const s of Or(i))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,o){for(const s of i.filters)if(!s.matches(o))return!1;return!0}(e,t)&&function(i,o){return!(i.startAt&&!function(r,a,u){const c=q0(r,a,u);return r.inclusive?c<=0:c<0}(i.startAt,Or(i),o)||i.endAt&&!function(r,a,u){const c=q0(r,a,u);return r.inclusive?c>=0:c>0}(i.endAt,Or(i),o))}(e,t)}function eU(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qA(e){return(t,n)=>{let i=!1;for(const o of Or(e)){const s=nU(o,t,n);if(s!==0)return s;i=i||o.field.isKeyField()}return 0}}function nU(e,t,n){const i=e.field.isKeyField()?J.comparator(t.key,n.key):function(s,r,a){const u=r.data.field(s),c=a.data.field(s);return u!==null&&c!==null?As(u,c):X()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[o,s]of i)if(this.equalsFn(o,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),o=this.inner[i];if(o===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],t))return void(o[s]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Ao(this.inner,(n,i)=>{for(const[o,s]of i)t(o,s)})}isEmpty(){return MA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=new Dt(J.comparator);function Zn(){return iU}const FA=new Dt(J.comparator);function Tr(...e){let t=FA;for(const n of e)t=t.insert(n.key,n);return t}function HA(e){let t=FA;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function to(){return Br()}function zA(){return Br()}function Br(){return new qs(e=>e.toString(),(e,t)=>e.isEqual(t))}const oU=new Dt(J.comparator),sU=new ce(J.comparator);function rt(...e){let t=sU;for(const n of e)t=t.add(n);return t}const rU=new ce(dt);function aU(){return rU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nu(t)?"-0":t}}function YA(e){return{integerValue:""+e}}function lU(e,t){return Lk(t)?YA(t):Jp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this._=void 0}}function uU(e,t,n){return e instanceof Vu?function(o,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&qp(s)&&(s=Fp(s)),s&&(r.fields.__previous_value__=s),{mapValue:r}}(n,t):e instanceof aa?JA(e,t):e instanceof la?QA(e,t):function(o,s){const r=KA(o,s),a=Y0(r)+Y0(o.Pe);return dh(r)&&dh(o.Pe)?YA(a):Jp(o.serializer,a)}(e,t)}function cU(e,t,n){return e instanceof aa?JA(e,t):e instanceof la?QA(e,t):n}function KA(e,t){return e instanceof Pu?function(i){return dh(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class Vu extends mc{}class aa extends mc{constructor(t){super(),this.elements=t}}function JA(e,t){const n=$A(t);for(const i of e.elements)n.some(o=>Cn(o,i))||n.push(i);return{arrayValue:{values:n}}}class la extends mc{constructor(t){super(),this.elements=t}}function QA(e,t){let n=$A(t);for(const i of e.elements)n=n.filter(o=>!Cn(o,i));return{arrayValue:{values:n}}}class Pu extends mc{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Y0(e){return Ot(e.integerValue||e.doubleValue)}function $A(e){return Hp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function fU(e,t){return e.field.isEqual(t.field)&&function(i,o){return i instanceof aa&&o instanceof aa||i instanceof la&&o instanceof la?Ss(i.elements,o.elements,Cn):i instanceof Pu&&o instanceof Pu?Cn(i.Pe,o.Pe):i instanceof Vu&&o instanceof Vu}(e.transform,t.transform)}class dU{constructor(t,n){this.version=t,this.transformResults=n}}class Sn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Sn}static exists(t){return new Sn(void 0,t)}static updateTime(t){return new Sn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Fl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class gc{}function XA(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new ZA(e.key,Sn.none()):new wa(e.key,e.data,Sn.none());{const n=e.data,i=Me.empty();let o=new ce(ae.comparator);for(let s of t.fields)if(!o.has(s)){let r=n.field(s);r===null&&s.length>1&&(s=s.popLast(),r=n.field(s)),r===null?i.delete(s):i.set(s,r),o=o.add(s)}return new Fi(e.key,i,new qe(o.toArray()),Sn.none())}}function hU(e,t,n){e instanceof wa?function(o,s,r){const a=o.value.clone(),u=J0(o.fieldTransforms,s,r.transformResults);a.setAll(u),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Fi?function(o,s,r){if(!Fl(o.precondition,s))return void s.convertToUnknownDocument(r.version);const a=J0(o.fieldTransforms,s,r.transformResults),u=s.data;u.setAll(WA(o)),u.setAll(a),s.convertToFoundDocument(r.version,u).setHasCommittedMutations()}(e,t,n):function(o,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,t,n)}function Gr(e,t,n,i){return e instanceof wa?function(s,r,a,u){if(!Fl(s.precondition,r))return a;const c=s.value.clone(),h=Q0(s.fieldTransforms,u,r);return c.setAll(h),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Fi?function(s,r,a,u){if(!Fl(s.precondition,r))return a;const c=Q0(s.fieldTransforms,u,r),h=r.data;return h.setAll(WA(s)),h.setAll(c),r.convertToFoundDocument(r.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(e,t,n,i):function(s,r,a){return Fl(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):a}(e,t,n)}function pU(e,t){let n=null;for(const i of e.fieldTransforms){const o=t.data.field(i.field),s=KA(i.transform,o||null);s!=null&&(n===null&&(n=Me.empty()),n.set(i.field,s))}return n||null}function K0(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ss(i,o,(s,r)=>fU(s,r))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class wa extends gc{constructor(t,n,i,o=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fi extends gc{constructor(t,n,i,o,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function WA(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function J0(e,t,n){const i=new Map;_t(e.length===n.length);for(let o=0;o<n.length;o++){const s=e[o],r=s.transform,a=t.data.field(s.field);i.set(s.field,cU(r,a,n[o]))}return i}function Q0(e,t,n){const i=new Map;for(const o of e){const s=o.transform,r=n.data.field(o.field);i.set(o.field,uU(s,r,t))}return i}class ZA extends gc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mU extends gc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(t,n,i,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(t.key)&&hU(s,t,i[o])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Gr(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Gr(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=zA();return this.mutations.forEach(o=>{const s=t.get(o.key),r=s.overlayedDocument;let a=this.applyToLocalView(r,s.mutatedFields);a=n.has(o.key)?null:a;const u=XA(r,a);u!==null&&i.set(o.key,u),r.isValidDocument()||r.convertToNoDocument(j.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),rt())}isEqual(t){return this.batchId===t.batchId&&Ss(this.mutations,t.mutations,(n,i)=>K0(n,i))&&Ss(this.baseMutations,t.baseMutations,(n,i)=>K0(n,i))}}class Qp{constructor(t,n,i,o){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(t,n,i){_t(t.mutations.length===i.length);let o=function(){return oU}();const s=t.mutations;for(let r=0;r<s.length;r++)o=o.insert(s[r].key,i[r].version);return new Qp(t,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,ut;function _U(e){switch(e){default:return X();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function jA(e){if(e===void 0)return Wn("GRPC error has no .code"),q.UNKNOWN;switch(e){case Ft.OK:return q.OK;case Ft.CANCELLED:return q.CANCELLED;case Ft.UNKNOWN:return q.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return q.INTERNAL;case Ft.UNAVAILABLE:return q.UNAVAILABLE;case Ft.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Ft.NOT_FOUND:return q.NOT_FOUND;case Ft.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Ft.ABORTED:return q.ABORTED;case Ft.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Ft.DATA_LOSS:return q.DATA_LOSS;default:return X()}}(ut=Ft||(Ft={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=new ro([4294967295,4294967295],0);function $0(e){const t=TU().encode(e),n=new AA;return n.update(t),new Uint8Array(n.digest())}function X0(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ro([n,i],0),new ro([o,s],0)]}class $p{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Er(`Invalid padding: ${n}`);if(i<0)throw new Er(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Er(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Er(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=ro.fromNumber(this.Ie)}Ee(t,n,i){let o=t.add(n.multiply(ro.fromNumber(i)));return o.compare(EU)===1&&(o=new ro([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=$0(t),[i,o]=X0(n);for(let s=0;s<this.hashCount;s++){const r=this.Ee(i,o,s);if(!this.de(r))return!1}return!0}static create(t,n,i){const o=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),r=new $p(s,o,n);return i.forEach(a=>r.insert(a)),r}insert(t){if(this.Ie===0)return;const n=$0(t),[i,o]=X0(n);for(let s=0;s<this.hashCount;s++){const r=this.Ee(i,o,s);this.Ae(r)}}Ae(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class Er extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n,i,o,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const o=new Map;return o.set(t,Ra.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new yc(j.min(),o,new Dt(dt),Zn(),rt())}}class Ra{constructor(t,n,i,o,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Ra(i,n,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,n,i,o){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=o}}class tC{constructor(t,n){this.targetId=t,this.me=n}}class eC{constructor(t,n,i=fe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=o}}class W0{constructor(){this.fe=0,this.ge=j0(),this.pe=fe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=rt(),n=rt(),i=rt();return this.ge.forEach((o,s)=>{switch(s){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:X()}}),new Ra(this.pe,this.ye,t,n,i)}Ce(){this.we=!1,this.ge=j0()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SU{constructor(t){this.Le=t,this.Be=new Map,this.ke=Zn(),this.qe=Z0(),this.Qe=new Dt(dt)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:X()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,o)=>{this.ze(o)&&n(o)})}He(t){const n=t.targetId,i=t.me.count,o=this.Je(n);if(o){const s=o.target;if(ph(s))if(i===0){const r=new J(s.path);this.Ue(n,r,ye.newNoDocument(r,j.min()))}else _t(i===1);else{const r=this.Ye(n);if(r!==i){const a=this.Ze(t),u=a?this.Xe(a,t,r):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let r,a;try{r=mo(i).toUint8Array()}catch(u){if(u instanceof DA)return Es("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new $p(r,o,s)}catch(u){return Es(u instanceof Er?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){const i=this.Le.getRemoteKeysForTarget(n);let o=0;return i.forEach(s=>{const r=this.Le.tt(),a=`projects/${r.projectId}/databases/${r.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),o++)}),o}rt(t){const n=new Map;this.Be.forEach((s,r)=>{const a=this.Je(r);if(a){if(s.current&&ph(a.target)){const u=new J(a.target.path);this.ke.get(u)!==null||this.it(r,u)||this.Ue(r,u,ye.newNoDocument(u,t))}s.be&&(n.set(r,s.ve()),s.Ce())}});let i=rt();this.qe.forEach((s,r)=>{let a=!0;r.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,r)=>r.setReadTime(t));const o=new yc(t,n,this.Qe,this.ke,i);return this.ke=Zn(),this.qe=Z0(),this.Qe=new Dt(dt),o}$e(t,n){if(!this.ze(t))return;const i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;const o=this.Ge(t);this.it(t,n)?o.Fe(n,1):o.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new W0,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new ce(dt),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new W0),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Z0(){return new Dt(J.comparator)}function j0(){return new Dt(J.comparator)}const AU={asc:"ASCENDING",desc:"DESCENDING"},CU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wU={and:"AND",or:"OR"};class RU{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gh(e,t){return e.useProto3Json||fc(t)?t:{value:t}}function ku(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function nC(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function IU(e,t){return ku(e,t.toTimestamp())}function An(e){return _t(!!e),j.fromTimestamp(function(n){const i=Li(n);return new $t(i.seconds,i.nanos)}(e))}function Xp(e,t){return yh(e,t).canonicalString()}function yh(e,t){const n=function(o){return new Ut(["projects",o.projectId,"databases",o.database])}(e).child("documents");return t===void 0?n:n.child(t)}function iC(e){const t=Ut.fromString(e);return _t(lC(t)),t}function vh(e,t){return Xp(e.databaseId,t.path)}function Bf(e,t){const n=iC(t);if(n.get(1)!==e.databaseId.projectId)throw new K(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new K(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(sC(n))}function oC(e,t){return Xp(e.databaseId,t)}function xU(e){const t=iC(e);return t.length===4?Ut.emptyPath():sC(t)}function _h(e){return new Ut(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sC(e){return _t(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function t_(e,t,n){return{name:vh(e,t),fields:n.value.mapValue.fields}}function bU(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(_t(h===void 0||typeof h=="string"),fe.fromBase64String(h||"")):(_t(h===void 0||h instanceof Buffer||h instanceof Uint8Array),fe.fromUint8Array(h||new Uint8Array))}(e,t.targetChange.resumeToken),r=t.targetChange.cause,a=r&&function(c){const h=c.code===void 0?q.UNKNOWN:jA(c.code);return new K(h,c.message||"")}(r);n=new eC(i,o,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const o=Bf(e,i.document.name),s=An(i.document.updateTime),r=i.document.createTime?An(i.document.createTime):j.min(),a=new Me({mapValue:{fields:i.document.fields}}),u=ye.newFoundDocument(o,s,r,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Hl(c,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const o=Bf(e,i.document),s=i.readTime?An(i.readTime):j.min(),r=ye.newNoDocument(o,s),a=i.removedTargetIds||[];n=new Hl([],a,r.key,r)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const o=Bf(e,i.document),s=i.removedTargetIds||[];n=new Hl([],s,o,null)}else{if(!("filter"in t))return X();{t.filter;const i=t.filter;i.targetId;const{count:o=0,unchangedNames:s}=i,r=new vU(o,s),a=i.targetId;n=new tC(a,r)}}return n}function NU(e,t){let n;if(t instanceof wa)n={update:t_(e,t.key,t.value)};else if(t instanceof ZA)n={delete:vh(e,t.key)};else if(t instanceof Fi)n={update:t_(e,t.key,t.data),updateMask:BU(t.fieldMask)};else{if(!(t instanceof mU))return X();n={verify:vh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,r){const a=r.transform;if(a instanceof Vu)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof aa)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof la)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pu)return{fieldPath:r.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),t.precondition.isNone||(n.currentDocument=function(o,s){return s.updateTime!==void 0?{updateTime:IU(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(e,t.precondition)),n}function MU(e,t){return e&&e.length>0?(_t(t!==void 0),e.map(n=>function(o,s){let r=o.updateTime?An(o.updateTime):An(s);return r.isEqual(j.min())&&(r=An(s)),new dU(r,o.transformResults||[])}(n,t))):[]}function DU(e,t){return{documents:[oC(e,t.path)]}}function VU(e,t){const n={structuredQuery:{}},i=t.path;let o;t.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=oC(e,o);const s=function(c){if(c.length!==0)return aC(wn.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const r=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Lo(p.field),direction:UU(p.dir)}}(h))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const a=gh(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:n,parent:o}}function PU(e){let t=xU(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){_t(i===1);const h=n.from[0];h.allDescendants?o=h.collectionId:t=t.child(h.collectionId)}let s=[];n.where&&(s=function(m){const p=rC(m);return p instanceof wn&&UA(p)?p.getFilters():[p]}(n.where));let r=[];n.orderBy&&(r=function(m){return m.map(p=>function(x){return new Du(Oo(x.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(m){let p;return p=typeof m=="object"?m.value:m,fc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new Mu(v,p)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const p=!m.before,v=m.values||[];return new Mu(v,p)}(n.endAt)),Zk(t,o,r,s,a,"F",u,c)}function kU(e,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function rC(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Oo(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(n.unaryFilter.field);return Qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Oo(n.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Oo(n.unaryFilter.field);return Qt.create(r,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(e):e.fieldFilter!==void 0?function(n){return Qt.create(Oo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(i=>rC(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(e):X()}function UU(e){return AU[e]}function LU(e){return CU[e]}function OU(e){return wU[e]}function Lo(e){return{fieldPath:e.canonicalString()}}function Oo(e){return ae.fromServerFormat(e.fieldPath)}function aC(e){return e instanceof Qt?function(n){if(n.op==="=="){if(G0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(B0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(B0(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:LU(n.op),value:n.value}}}(e):e instanceof wn?function(n){const i=n.getFilters().map(o=>aC(o));return i.length===1?i[0]:{compositeFilter:{op:OU(n.op),filters:i}}}(e):X()}function BU(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function lC(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,n,i,o,s=j.min(),r=j.min(),a=fe.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new vi(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(t){this.ct=t}}function qU(e){const t=PU({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?mh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this.un=new HU}addToCollectionParentIndex(t,n){return this.un.add(n),G.resolve()}getCollectionParents(t,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return G.resolve()}deleteFieldIndex(t,n){return G.resolve()}deleteAllFieldIndexes(t){return G.resolve()}createTargetIndexes(t,n){return G.resolve()}getDocumentsMatchingTarget(t,n){return G.resolve(null)}getIndexType(t,n){return G.resolve(0)}getFieldIndexes(t,n){return G.resolve([])}getNextCollectionGroupToUpdate(t){return G.resolve(null)}getMinOffset(t,n){return G.resolve(Ui.min())}getMinOffsetFromCollectionGroup(t,n){return G.resolve(Ui.min())}updateCollectionGroup(t,n,i){return G.resolve()}updateIndexEntries(t,n){return G.resolve()}}class HU{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),o=this.index[n]||new ce(Ut.comparator),s=!o.has(i);return this.index[n]=o.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(t){return(this.index[t]||new ce(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new ws(0)}static kn(){return new ws(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(){this.changes=new qs(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ye.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?G.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(t,n,i,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(i!==null&&Gr(i.mutation,o,qe.empty(),$t.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,rt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=rt()){const o=to();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,i).next(s=>{let r=Tr();return s.forEach((a,u)=>{r=r.insert(a,u.overlayedDocument)}),r}))}getOverlayedDocuments(t,n){const i=to();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,rt()))}populateOverlays(t,n,i){const o=[];return i.forEach(s=>{n.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(t,o).next(s=>{s.forEach((r,a)=>{n.set(r,a)})})}computeViews(t,n,i,o){let s=Zn();const r=Br(),a=function(){return Br()}();return n.forEach((u,c)=>{const h=i.get(c.key);o.has(c.key)&&(h===void 0||h.mutation instanceof Fi)?s=s.insert(c.key,c):h!==void 0?(r.set(c.key,h.mutation.getFieldMask()),Gr(h.mutation,c,h.mutation.getFieldMask(),$t.now())):r.set(c.key,qe.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,h)=>r.set(c,h)),n.forEach((c,h)=>{var m;return a.set(c,new YU(h,(m=r.get(c))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(t,n){const i=Br();let o=new Dt((r,a)=>r-a),s=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(r=>{for(const a of r)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=i.get(u)||qe.empty();h=a.applyToLocalView(c,h),i.set(u,h);const m=(o.get(a.batchId)||rt()).add(u);o=o.insert(a.batchId,m)})}).next(()=>{const r=[],a=o.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,m=zA();h.forEach(p=>{if(!s.has(p)){const v=XA(n.get(p),i.get(p));v!==null&&m.set(p,v),s=s.add(p)}}),r.push(this.documentOverlayCache.saveOverlays(t,c,m))}return G.waitFor(r)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,o){return function(r){return J.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):jk(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,o):this.getDocumentsMatchingCollectionQuery(t,n,i,o)}getNextDocuments(t,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,o).next(s=>{const r=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,o-s.size):G.resolve(to());let a=-1,u=s;return r.next(c=>G.forEach(c,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(t,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,rt())).next(h=>({batchId:a,changes:HA(h)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new J(n)).next(i=>{let o=Tr();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,i,o){const s=n.collectionGroup;let r=Tr();return this.indexManager.getCollectionParents(t,s).next(a=>G.forEach(a,u=>{const c=function(m,p){return new dc(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,o).next(h=>{h.forEach((m,p)=>{r=r.insert(m,p)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(t,n,i,o){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,o))).next(r=>{s.forEach((u,c)=>{const h=c.getKey();r.get(h)===null&&(r=r.insert(h,ye.newInvalidDocument(h)))});let a=Tr();return r.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Gr(h.mutation,c,qe.empty(),$t.now()),pc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:An(o.createTime)}}(n)),G.resolve()}getNamedQuery(t,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(o){return{name:o.name,query:qU(o.bundledQuery),readTime:An(o.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(){this.overlays=new Dt(J.comparator),this.Ir=new Map}getOverlay(t,n){return G.resolve(this.overlays.get(n))}getOverlays(t,n){const i=to();return G.forEach(n,o=>this.getOverlay(t,o).next(s=>{s!==null&&i.set(o,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((o,s)=>{this.ht(t,n,s)}),G.resolve()}removeOverlaysForBatchId(t,n,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(t,n,i){const o=to(),s=n.length+1,r=new J(n.child("")),a=this.overlays.getIteratorFrom(r);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>i&&o.set(u.getKey(),u)}return G.resolve(o)}getOverlaysForCollectionGroup(t,n,i,o){let s=new Dt((c,h)=>c-h);const r=this.overlays.getIterator();for(;r.hasNext();){const c=r.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=to(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=to(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=o)););return G.resolve(a)}ht(t,n,i){const o=this.overlays.get(i.key);if(o!==null){const r=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,r)}this.overlays=this.overlays.insert(i.key,new yU(n,i));let s=this.Ir.get(n);s===void 0&&(s=rt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this.sessionToken=fe.EMPTY_BYTE_STRING}getSessionToken(t){return G.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.Tr=new ce(Wt.Er),this.dr=new ce(Wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){const i=new Wt(t,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Vr(new Wt(t,n))}mr(t,n){t.forEach(i=>this.removeReference(i,n))}gr(t){const n=new J(new Ut([])),i=new Wt(n,t),o=new Wt(n,t+1),s=[];return this.dr.forEachInRange([i,o],r=>{this.Vr(r),s.push(r.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const n=new J(new Ut([])),i=new Wt(n,t),o=new Wt(n,t+1);let s=rt();return this.dr.forEachInRange([i,o],r=>{s=s.add(r.key)}),s}containsKey(t){const n=new Wt(t,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Wt{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return J.comparator(t.key,n.key)||dt(t.wr,n.wr)}static Ar(t,n){return dt(t.wr,n.wr)||J.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ce(Wt.Er)}checkEmpty(t){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,o){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new gU(s,n,i,o);this.mutationQueue.push(r);for(const a of o)this.br=this.br.add(new Wt(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return G.resolve(r)}lookupMutationBatch(t,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,o=this.vr(i),s=o<0?0:o;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Wt(n,0),o=new Wt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,o],r=>{const a=this.Dr(r.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ce(dt);return n.forEach(o=>{const s=new Wt(o,0),r=new Wt(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,r],a=>{i=i.add(a.wr)})}),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,o=i.length+1;let s=i;J.isDocumentKey(s)||(s=s.child(""));const r=new Wt(new J(s),0);let a=new ce(dt);return this.br.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===o&&(a=a.add(u.wr)),!0)},r),G.resolve(this.Cr(a))}Cr(t){const n=[];return t.forEach(i=>{const o=this.Dr(i);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){_t(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(n.mutations,o=>{const s=new Wt(o.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,n){const i=new Wt(n,0),o=this.br.firstAfterOrEqual(i);return G.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,G.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(t){this.Mr=t,this.docs=function(){return new Dt(J.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,o=this.docs.get(i),s=o?o.size:0,r=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return G.resolve(i?i.document.mutableCopy():ye.newInvalidDocument(n))}getEntries(t,n){let i=Zn();return n.forEach(o=>{const s=this.docs.get(o);i=i.insert(o,s?s.document.mutableCopy():ye.newInvalidDocument(o))}),G.resolve(i)}getDocumentsMatchingQuery(t,n,i,o){let s=Zn();const r=n.path,a=new J(r.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!r.isPrefixOf(c.path))break;c.path.length>r.length+1||Vk(Dk(h),i)<=0||(o.has(h.key)||pc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(t,n,i,o){X()}Or(t,n){return G.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new ZU(this)}getSize(t){return G.resolve(this.size)}}class ZU extends zU{constructor(t){super(),this.cr=t}applyChanges(t){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.cr.addEntry(t,o)):this.cr.removeEntry(i)}),G.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(t){this.persistence=t,this.Nr=new qs(n=>zp(n),Yp),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wp,this.targetCount=0,this.kr=ws.Bn()}forEachTarget(t,n){return this.Nr.forEach((i,o)=>n(o)),G.resolve()}getLastRemoteSnapshotVersion(t){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return G.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(t){this.Nr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.kr=new ws(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(t,n){return this.Kn(n),G.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(t,n,i){let o=0;const s=[];return this.Nr.forEach((r,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(r),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),o++)}),G.waitFor(s).next(()=>o)}getTargetCount(t){return G.resolve(this.targetCount)}getTargetData(t,n){const i=this.Nr.get(n)||null;return G.resolve(i)}addMatchingKeys(t,n,i){return this.Br.Rr(n,i),G.resolve()}removeMatchingKeys(t,n,i){this.Br.mr(n,i);const o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(r=>{s.push(o.markPotentiallyOrphaned(t,r))}),G.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Br.yr(n);return G.resolve(i)}containsKey(t,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(t,n){this.qr={},this.overlays={},this.Qr=new Gp(0),this.Kr=!1,this.Kr=!0,this.$r=new $U,this.referenceDelegate=t(this),this.Ur=new jU(this),this.indexManager=new FU,this.remoteDocumentCache=function(o){return new WU(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new GU(n),this.Gr=new JU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QU,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.qr[t.toKey()];return i||(i=new XU(n,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,i){Y("MemoryPersistence","Starting transaction:",t);const o=new e4(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(s=>this.referenceDelegate.jr(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Hr(t,n){return G.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,n)))}}class e4 extends kk{constructor(t){super(),this.currentSequenceNumber=t}}class Zp{constructor(t){this.persistence=t,this.Jr=new Wp,this.Yr=null}static Zr(t){return new Zp(t)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(t,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),G.resolve()}removeReference(t,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,i=>{const o=J.fromPath(i);return this.ei(t,o).next(s=>{s||n.removeEntry(o,j.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t,n,i,o){this.targetId=t,this.fromCache=n,this.$i=i,this.Ui=o}static Wi(t,n){let i=rt(),o=rt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new jp(t,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return oP()?8:Uk(nP())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,i,o){const s={result:null};return this.Yi(t,n).next(r=>{s.result=r}).next(()=>{if(!s.result)return this.Zi(t,n,o,i).next(r=>{s.result=r})}).next(()=>{if(s.result)return;const r=new n4;return this.Xi(t,n,r).next(a=>{if(s.result=a,this.zi)return this.es(t,n,r,a.size)})}).next(()=>s.result)}es(t,n,i,o){return i.documentReadCount<this.ji?(fr()<=ct.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(fr()<=ct.DEBUG&&Y("QueryEngine","Query:",Uo(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(fr()<=ct.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,En(n))):G.resolve())}Yi(t,n){if(z0(n))return G.resolve(null);let i=En(n);return this.indexManager.getIndexType(t,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=mh(n,null,"F"),i=En(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const r=rt(...s);return this.Ji.getDocuments(t,r).next(a=>this.indexManager.getMinOffset(t,i).next(u=>{const c=this.ts(n,a);return this.ns(n,c,r,u.readTime)?this.Yi(t,mh(n,null,"F")):this.rs(t,c,n,u)}))})))}Zi(t,n,i,o){return z0(n)||o.isEqual(j.min())?G.resolve(null):this.Ji.getDocuments(t,i).next(s=>{const r=this.ts(n,s);return this.ns(n,r,i,o)?G.resolve(null):(fr()<=ct.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uo(n)),this.rs(t,r,n,Mk(o,-1)).next(a=>a))})}ts(t,n){let i=new ce(qA(t));return n.forEach((o,s)=>{pc(t,s)&&(i=i.add(s))}),i}ns(t,n,i,o){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}Xi(t,n,i){return fr()<=ct.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Ji.getDocumentsMatchingQuery(t,n,Ui.min(),i)}rs(t,n,i,o){return this.Ji.getDocumentsMatchingQuery(t,i,o).next(s=>(n.forEach(r=>{s=s.insert(r.key,r)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(t,n,i,o){this.persistence=t,this.ss=n,this.serializer=o,this.os=new Dt(dt),this._s=new qs(s=>zp(s),Yp),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new KU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}}function s4(e,t,n,i){return new o4(e,t,n,i)}async function uC(e,t){const n=tt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(s=>(o=s,n.ls(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const r=[],a=[];let u=rt();for(const c of o){r.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(i,u).next(c=>({hs:c,removedBatchIds:r,addedBatchIds:a}))})})}function r4(e,t){const n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const m=c.batch,p=m.keys();let v=G.resolve();return p.forEach(x=>{v=v.next(()=>h.getEntry(u,x)).next(b=>{const D=c.docVersions.get(x);_t(D!==null),b.version.compareTo(D)<0&&(m.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let u=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(t))).next(()=>n.localDocuments.getDocuments(i,o))})}function cC(e){const t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function a4(e,t){const n=tt(e),i=t.snapshotVersion;let o=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const r=n.cs.newChangeBuffer({trackRemovals:!0});o=n.os;const a=[];t.targetChanges.forEach((h,m)=>{const p=o.get(m);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,m)));let v=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(m)!==null?v=v.withResumeToken(fe.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,i)),o=o.insert(m,v),function(b,D,E){return b.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=Zn(),c=rt();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(l4(s,r,t.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!i.isEqual(j.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return G.waitFor(a).next(()=>r.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=o,s))}function l4(e,t,n){let i=rt(),o=rt();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let r=Zn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(o=o.add(a)),u.isNoDocument()&&u.version.isEqual(j.min())?(t.removeEntry(a,u.readTime),r=r.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),r=r.insert(a,u)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:r,Is:o}})}function u4(e,t){const n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function c4(e,t){const n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Ur.getTargetData(i,t).next(s=>s?(o=s,G.resolve(o)):n.Ur.allocateTargetId(i).next(r=>(o=new vi(t,r,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(t,i.targetId)),i})}async function Th(e,t,n){const i=tt(e),o=i.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,r=>i.persistence.referenceDelegate.removeTarget(r,o))}catch(r){if(!Ca(r))throw r;Y("LocalStore",`Failed to update sequence numbers for target ${t}: ${r}`)}i.os=i.os.remove(t),i._s.delete(o.target)}function e_(e,t,n){const i=tt(e);let o=j.min(),s=rt();return i.persistence.runTransaction("Execute query","readwrite",r=>function(u,c,h){const m=tt(u),p=m._s.get(h);return p!==void 0?G.resolve(m.os.get(p)):m.Ur.getTargetData(c,h)}(i,r,En(t)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(r,a.targetId).next(u=>{s=u})}).next(()=>i.ss.getDocumentsMatchingQuery(r,t,n?o:j.min(),n?s:rt())).next(a=>(f4(i,eU(t),a),{documents:a,Ts:s})))}function f4(e,t,n){let i=e.us.get(t)||j.min();n.forEach((o,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.us.set(t,i)}class n_{constructor(){this.activeTargetIds=aU()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class d4{constructor(){this.so=new n_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,i){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new n_,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl=null;function Gf(){return vl===null?vl=function(){return 268435456+Math.round(2147483648*Math.random())}():vl++,"0x"+vl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me="WebChannelConnection";class g4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${o}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${s}`}get Fo(){return!1}Mo(n,i,o,s,r){const a=Gf(),u=this.xo(n,i.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${a}:`,u,o);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,r),this.No(n,u,c,o).then(h=>(Y("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Es("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",o),h})}Lo(n,i,o,s,r,a){return this.Mo(n,i,o,s,r)}Oo(n,i,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,r)=>n[r]=s),o&&o.headers.forEach((s,r)=>n[r]=s)}xo(n,i){const o=p4[n];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,i,o){const s=Gf();return new Promise((r,a)=>{const u=new CA;u.setWithCredentials(!0),u.listenOnce(wA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gl.NO_ERROR:const h=u.getResponseJson();Y(me,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),r(h);break;case Gl.TIMEOUT:Y(me,`RPC '${t}' ${s} timed out`),a(new K(q.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const m=u.getStatus();if(Y(me,`RPC '${t}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const x=function(D){const E=D.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(E)>=0?E:q.UNKNOWN}(v.status);a(new K(x,v.message))}else a(new K(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new K(q.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{Y(me,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(o);Y(me,`RPC '${t}' ${s} sending request:`,o),u.send(n,"POST",c,i,15)})}Bo(t,n,i){const o=Gf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=xA(),a=IA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const h=s.join("");Y(me,`Creating RPC '${t}' stream ${o}: ${h}`,u);const m=r.createWebChannel(h,u);let p=!1,v=!1;const x=new m4({Io:D=>{v?Y(me,`Not sending because RPC '${t}' stream ${o} is closed:`,D):(p||(Y(me,`Opening RPC '${t}' stream ${o} transport.`),m.open(),p=!0),Y(me,`RPC '${t}' stream ${o} sending:`,D),m.send(D))},To:()=>m.close()}),b=(D,E,_)=>{D.listen(E,C=>{try{_(C)}catch(V){setTimeout(()=>{throw V},0)}})};return b(m,_r.EventType.OPEN,()=>{v||(Y(me,`RPC '${t}' stream ${o} transport opened.`),x.yo())}),b(m,_r.EventType.CLOSE,()=>{v||(v=!0,Y(me,`RPC '${t}' stream ${o} transport closed`),x.So())}),b(m,_r.EventType.ERROR,D=>{v||(v=!0,Es(me,`RPC '${t}' stream ${o} transport errored:`,D),x.So(new K(q.UNAVAILABLE,"The operation could not be completed")))}),b(m,_r.EventType.MESSAGE,D=>{var E;if(!v){const _=D.data[0];_t(!!_);const C=_,V=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(V){Y(me,`RPC '${t}' stream ${o} received error:`,V);const L=V.status;let B=function(A){const M=Ft[A];if(M!==void 0)return jA(M)}(L),I=V.message;B===void 0&&(B=q.INTERNAL,I="Unknown error status: "+L+" with message "+V.message),v=!0,x.So(new K(B,I)),m.close()}else Y(me,`RPC '${t}' stream ${o} received:`,_),x.bo(_)}}),b(a,RA.STAT_EVENT,D=>{D.stat===ch.PROXY?Y(me,`RPC '${t}' stream ${o} detected buffering proxy`):D.stat===ch.NOPROXY&&Y(me,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(e){return new RU(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(t,n,i=1e3,o=1.5,s=6e4){this.ui=t,this.timerId=n,this.ko=i,this.qo=o,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,n-i);o>0&&Y("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(t,n,i,o,s,r,a,u){this.ui=t,this.Ho=i,this.Jo=o,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fC(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(n)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===n&&this.P_(i,o)},i=>{t(()=>{const o=new K(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(t,n){const i=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return Y("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y4 extends dC{constructor(t,n,i,o,s,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,r),this.serializer=s}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const n=bU(this.serializer,t),i=function(s){if(!("targetChange"in s))return j.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?j.min():r.readTime?An(r.readTime):j.min()}(t);return this.listener.d_(n,i)}A_(t){const n={};n.database=_h(this.serializer),n.addTarget=function(s,r){let a;const u=r.target;if(a=ph(u)?{documents:DU(s,u)}:{query:VU(s,u)._t},a.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){a.resumeToken=nC(s,r.resumeToken);const c=gh(s,r.expectedCount);c!==null&&(a.expectedCount=c)}else if(r.snapshotVersion.compareTo(j.min())>0){a.readTime=ku(s,r.snapshotVersion.toTimestamp());const c=gh(s,r.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=kU(this.serializer,t);i&&(n.labels=i),this.a_(n)}R_(t){const n={};n.database=_h(this.serializer),n.removeTarget=t,this.a_(n)}}class v4 extends dC{constructor(t,n,i,o,s,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,r),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return _t(!!t.streamToken),this.lastStreamToken=t.streamToken,_t(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const n=MU(t.writeResults,t.commitTime),i=An(t.commitTime);return this.listener.g_(i,n)}p_(){const t={};t.database=_h(this.serializer),this.a_(t)}m_(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>NU(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4 extends class{}{constructor(t,n,i,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new K(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.Mo(t,yh(n,i),o,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(q.UNKNOWN,s.toString())})}Lo(t,n,i,o,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Lo(t,yh(n,i),o,r,a,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new K(q.UNKNOWN,r.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class T4{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wn(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(t,n,i,o,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(r=>{i.enqueueAndForget(async()=>{Co(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=tt(u);c.L_.add(4),await Ia(c),c.q_.set("Unknown"),c.L_.delete(4),await _c(c)}(this))})}),this.q_=new T4(i,o)}}async function _c(e){if(Co(e))for(const t of e.B_)await t(!0)}async function Ia(e){for(const t of e.B_)await t(!1)}function hC(e,t){const n=tt(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),im(n)?nm(n):Fs(n).r_()&&em(n,t))}function tm(e,t){const n=tt(e),i=Fs(n);n.N_.delete(t),i.r_()&&pC(n,t),n.N_.size===0&&(i.r_()?i.o_():Co(n)&&n.q_.set("Unknown"))}function em(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(j.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fs(e).A_(t)}function pC(e,t){e.Q_.xe(t),Fs(e).R_(t)}function nm(e){e.Q_=new SU({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Fs(e).start(),e.q_.v_()}function im(e){return Co(e)&&!Fs(e).n_()&&e.N_.size>0}function Co(e){return tt(e).L_.size===0}function mC(e){e.Q_=void 0}async function S4(e){e.q_.set("Online")}async function A4(e){e.N_.forEach((t,n)=>{em(e,t)})}async function C4(e,t){mC(e),im(e)?(e.q_.M_(t),nm(e)):e.q_.set("Unknown")}async function w4(e,t,n){if(e.q_.set("Online"),t instanceof eC&&t.state===2&&t.cause)try{await async function(o,s){const r=s.cause;for(const a of s.targetIds)o.N_.has(a)&&(await o.remoteSyncer.rejectListen(a,r),o.N_.delete(a),o.Q_.removeTarget(a))}(e,t)}catch(i){Y("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Uu(e,i)}else if(t instanceof Hl?e.Q_.Ke(t):t instanceof tC?e.Q_.He(t):e.Q_.We(t),!n.isEqual(j.min()))try{const i=await cC(e.localStore);n.compareTo(i)>=0&&await function(s,r){const a=s.Q_.rt(r);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,r))}}),a.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(fe.EMPTY_BYTE_STRING,h.snapshotVersion)),pC(s,u);const m=new vi(h.target,u,c,h.sequenceNumber);em(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){Y("RemoteStore","Failed to raise snapshot:",i),await Uu(e,i)}}async function Uu(e,t,n){if(!Ca(t))throw t;e.L_.add(1),await Ia(e),e.q_.set("Offline"),n||(n=()=>cC(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await _c(e)})}function gC(e,t){return t().catch(n=>Uu(e,n,t))}async function Tc(e){const t=tt(e),n=Oi(t);let i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;R4(t);)try{const o=await u4(t.localStore,i);if(o===null){t.O_.length===0&&n.o_();break}i=o.batchId,I4(t,o)}catch(o){await Uu(t,o)}yC(t)&&vC(t)}function R4(e){return Co(e)&&e.O_.length<10}function I4(e,t){e.O_.push(t);const n=Oi(e);n.r_()&&n.V_&&n.m_(t.mutations)}function yC(e){return Co(e)&&!Oi(e).n_()&&e.O_.length>0}function vC(e){Oi(e).start()}async function x4(e){Oi(e).p_()}async function b4(e){const t=Oi(e);for(const n of e.O_)t.m_(n.mutations)}async function N4(e,t,n){const i=e.O_.shift(),o=Qp.from(i,t,n);await gC(e,()=>e.remoteSyncer.applySuccessfulWrite(o)),await Tc(e)}async function M4(e,t){t&&Oi(e).V_&&await async function(i,o){if(function(r){return _U(r)&&r!==q.ABORTED}(o.code)){const s=i.O_.shift();Oi(i).s_(),await gC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),await Tc(i)}}(e,t),yC(e)&&vC(e)}async function o_(e,t){const n=tt(e);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const i=Co(n);n.L_.add(3),await Ia(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await _c(n)}async function D4(e,t){const n=tt(e);t?(n.L_.delete(2),await _c(n)):t||(n.L_.add(2),await Ia(n),n.q_.set("Unknown"))}function Fs(e){return e.K_||(e.K_=function(n,i,o){const s=tt(n);return s.w_(),new y4(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(e.datastore,e.asyncQueue,{Eo:S4.bind(null,e),Ro:A4.bind(null,e),mo:C4.bind(null,e),d_:w4.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),im(e)?nm(e):e.q_.set("Unknown")):(await e.K_.stop(),mC(e))})),e.K_}function Oi(e){return e.U_||(e.U_=function(n,i,o){const s=tt(n);return s.w_(),new v4(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:x4.bind(null,e),mo:M4.bind(null,e),f_:b4.bind(null,e),g_:N4.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Tc(e)):(await e.U_.stop(),e.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t,n,i,o,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=s,this.deferred=new ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,o,s){const r=Date.now()+i,a=new om(t,n,r,o,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sm(e,t){if(Wn("AsyncQueue",`${t}: ${e}`),Ca(e))return new K(q.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t){this.comparator=t?(n,i)=>t(n,i)||J.comparator(n.key,i.key):(n,i)=>J.comparator(n.key,i.key),this.keyedMap=Tr(),this.sortedSet=new Dt(this.comparator)}static emptySet(t){return new us(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof us)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new us;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.W_=new Dt(J.comparator)}track(t){const n=t.doc.key,i=this.W_.get(n);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(n,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(n):t.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):X():this.W_=this.W_.insert(n,t)}G_(){const t=[];return this.W_.inorderTraversal((n,i)=>{t.push(i)}),t}}class Rs{constructor(t,n,i,o,s,r,a,u,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,o,s){const r=[];return n.forEach(a=>{r.push({type:0,doc:a})}),new Rs(t,n,us.emptySet(n),r,i,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class P4{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const o=tt(n),s=o.queries;o.queries=r_(),s.forEach((r,a)=>{for(const u of a.j_)u.onError(i)})})(this,new K(q.ABORTED,"Firestore shutting down"))}}function r_(){return new qs(e=>GA(e),hc)}async function k4(e,t){const n=tt(e);let i=3;const o=t.query;let s=n.queries.get(o);s?!s.H_()&&t.J_()&&(i=2):(s=new V4,i=t.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(o,!0);break;case 1:s.z_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(r){const a=sm(r,`Initialization of query '${Uo(t.query)}' failed`);return void t.onError(a)}n.queries.set(o,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&rm(n)}async function U4(e,t){const n=tt(e),i=t.query;let o=3;const s=n.queries.get(i);if(s){const r=s.j_.indexOf(t);r>=0&&(s.j_.splice(r,1),s.j_.length===0?o=t.J_()?0:1:!s.H_()&&t.J_()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function L4(e,t){const n=tt(e);let i=!1;for(const o of t){const s=o.query,r=n.queries.get(s);if(r){for(const a of r.j_)a.X_(o)&&(i=!0);r.z_=o}}i&&rm(n)}function O4(e,t,n){const i=tt(e),o=i.queries.get(t);if(o)for(const s of o.j_)s.onError(n);i.queries.delete(t)}function rm(e){e.Y_.forEach(t=>{t.next()})}var Eh,a_;(a_=Eh||(Eh={})).ea="default",a_.Cache="cache";class B4{constructor(t,n,i){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){const i=[];for(const o of t.docChanges)o.type!==3&&i.push(o);t=new Rs(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=Rs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t){this.key=t}}class TC{constructor(t){this.key=t}}class G4{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=rt(),this.mutatedKeys=rt(),this.Aa=qA(t),this.Ra=new us(this.Aa)}get Va(){return this.Ta}ma(t,n){const i=n?n.fa:new s_,o=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,r=o,a=!1;const u=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,c=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((h,m)=>{const p=o.get(h),v=pc(this.query,m)?m:null,x=!!p&&this.mutatedKeys.has(p.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;p&&v?p.data.isEqual(v.data)?x!==b&&(i.track({type:3,doc:v}),D=!0):this.ga(p,v)||(i.track({type:2,doc:v}),D=!0,(u&&this.Aa(v,u)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!p&&v?(i.track({type:0,doc:v}),D=!0):p&&!v&&(i.track({type:1,doc:p}),D=!0,(u||c)&&(a=!0)),D&&(v?(r=r.add(v),s=b?s.add(h):s.delete(h)):(r=r.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const h=this.query.limitType==="F"?r.last():r.first();r=r.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:r,fa:i,ns:a,mutatedKeys:s}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,o){const s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const r=t.fa.G_();r.sort((h,m)=>function(v,x){const b=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return b(v)-b(x)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(i),o=o!=null&&o;const a=n&&!o?this.ya():[],u=this.da.size===0&&this.current&&!o?1:0,c=u!==this.Ea;return this.Ea=u,r.length!==0||c?{snapshot:new Rs(this.query,t.Ra,s,r,t.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new s_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=rt(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return t.forEach(i=>{this.da.has(i)||n.push(new TC(i))}),this.da.forEach(i=>{t.has(i)||n.push(new _C(i))}),n}ba(t){this.Ta=t.Ts,this.da=rt();const n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return Rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class q4{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class F4{constructor(t){this.key=t,this.va=!1}}class H4{constructor(t,n,i,o,s,r){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Ca={},this.Fa=new qs(a=>GA(a),hc),this.Ma=new Map,this.xa=new Set,this.Oa=new Dt(J.comparator),this.Na=new Map,this.La=new Wp,this.Ba={},this.ka=new Map,this.qa=ws.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function z4(e,t,n=!0){const i=RC(e);let o;const s=i.Fa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.Da()):o=await EC(i,t,n,!0),o}async function Y4(e,t){const n=RC(e);await EC(n,t,!0,!1)}async function EC(e,t,n,i){const o=await c4(e.localStore,En(t)),s=o.targetId,r=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await K4(e,t,s,r==="current",o.resumeToken)),e.isPrimaryClient&&n&&hC(e.remoteStore,o),a}async function K4(e,t,n,i,o){e.Ka=(m,p,v)=>async function(b,D,E,_){let C=D.view.ma(E);C.ns&&(C=await e_(b.localStore,D.query,!1).then(({documents:I})=>D.view.ma(I,C)));const V=_&&_.targetChanges.get(D.targetId),L=_&&_.targetMismatches.get(D.targetId)!=null,B=D.view.applyChanges(C,b.isPrimaryClient,V,L);return u_(b,D.targetId,B.wa),B.snapshot}(e,m,p,v);const s=await e_(e.localStore,t,!0),r=new G4(t,s.Ts),a=r.ma(s.documents),u=Ra.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",o),c=r.applyChanges(a,e.isPrimaryClient,u);u_(e,n,c.wa);const h=new q4(t,n,r);return e.Fa.set(t,h),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function J4(e,t,n){const i=tt(e),o=i.Fa.get(t),s=i.Ma.get(o.targetId);if(s.length>1)return i.Ma.set(o.targetId,s.filter(r=>!hc(r,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Th(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&tm(i.remoteStore,o.targetId),Sh(i,o.targetId)}).catch(Aa)):(Sh(i,o.targetId),await Th(i.localStore,o.targetId,!0))}async function Q4(e,t){const n=tt(e),i=n.Fa.get(t),o=n.Ma.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),tm(n.remoteStore,i.targetId))}async function $4(e,t,n){const i=nL(e);try{const o=await function(r,a){const u=tt(r),c=$t.now(),h=a.reduce((v,x)=>v.add(x.key),rt());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=Zn(),b=rt();return u.cs.getEntries(v,h).next(D=>{x=D,x.forEach((E,_)=>{_.isValidDocument()||(b=b.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,x)).next(D=>{m=D;const E=[];for(const _ of a){const C=pU(_,m.get(_.key).overlayedDocument);C!=null&&E.push(new Fi(_.key,C,VA(C.value.mapValue),Sn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,E,a)}).next(D=>{p=D;const E=D.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(v,D.batchId,E)})}).then(()=>({batchId:p.batchId,changes:HA(m)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(o.batchId),function(r,a,u){let c=r.Ba[r.currentUser.toKey()];c||(c=new Dt(dt)),c=c.insert(a,u),r.Ba[r.currentUser.toKey()]=c}(i,o.batchId,n),await xa(i,o.changes),await Tc(i.remoteStore)}catch(o){const s=sm(o,"Failed to persist write");n.reject(s)}}async function SC(e,t){const n=tt(e);try{const i=await a4(n.localStore,t);t.targetChanges.forEach((o,s)=>{const r=n.Na.get(s);r&&(_t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?r.va=!0:o.modifiedDocuments.size>0?_t(r.va):o.removedDocuments.size>0&&(_t(r.va),r.va=!1))}),await xa(n,i,t)}catch(i){await Aa(i)}}function l_(e,t,n){const i=tt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Fa.forEach((s,r)=>{const a=r.view.Z_(t);a.snapshot&&o.push(a.snapshot)}),function(r,a){const u=tt(r);u.onlineState=a;let c=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(a)&&(c=!0)}),c&&rm(u)}(i.eventManager,t),o.length&&i.Ca.d_(o),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function X4(e,t,n){const i=tt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const o=i.Na.get(t),s=o&&o.key;if(s){let r=new Dt(J.comparator);r=r.insert(s,ye.newNoDocument(s,j.min()));const a=rt().add(s),u=new yc(j.min(),new Map,new Dt(dt),r,a);await SC(i,u),i.Oa=i.Oa.remove(s),i.Na.delete(t),am(i)}else await Th(i.localStore,t,!1).then(()=>Sh(i,t,n)).catch(Aa)}async function W4(e,t){const n=tt(e),i=t.batch.batchId;try{const o=await r4(n.localStore,t);CC(n,i,null),AC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await xa(n,o)}catch(o){await Aa(o)}}async function Z4(e,t,n){const i=tt(e);try{const o=await function(r,a){const u=tt(r);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(m=>(_t(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,t);CC(i,t,n),AC(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await xa(i,o)}catch(o){await Aa(o)}}function AC(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function CC(e,t,n){const i=tt(e);let o=i.Ba[i.currentUser.toKey()];if(o){const s=o.get(t);s&&(n?s.reject(n):s.resolve(),o=o.remove(t)),i.Ba[i.currentUser.toKey()]=o}}function Sh(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(i=>{e.La.containsKey(i)||wC(e,i)})}function wC(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);n!==null&&(tm(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),am(e))}function u_(e,t,n){for(const i of n)i instanceof _C?(e.La.addReference(i.key,t),j4(e,i)):i instanceof TC?(Y("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||wC(e,i.key)):X()}function j4(e,t){const n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(Y("SyncEngine","New document in limbo: "+n),e.xa.add(i),am(e))}function am(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new J(Ut.fromString(t)),i=e.qa.next();e.Na.set(i,new F4(n)),e.Oa=e.Oa.insert(n,i),hC(e.remoteStore,new vi(En(Kp(n.path)),i,"TargetPurposeLimboResolution",Gp.oe))}}async function xa(e,t,n){const i=tt(e),o=[],s=[],r=[];i.Fa.isEmpty()||(i.Fa.forEach((a,u)=>{r.push(i.Ka(u,t,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){o.push(c);const m=jp.Wi(u.targetId,c);s.push(m)}}))}),await Promise.all(r),i.Ca.d_(o),await async function(u,c){const h=tt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(c,p=>G.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>G.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!Ca(m))throw m;Y("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const p=m.targetId;if(!m.fromCache){const v=h.os.get(p),x=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(p,b)}}}(i.localStore,s))}async function tL(e,t){const n=tt(e);if(!n.currentUser.isEqual(t)){Y("SyncEngine","User change. New user:",t.toKey());const i=await uC(n.localStore,t);n.currentUser=t,function(s,r){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new K(q.CANCELLED,r))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await xa(n,i.hs)}}function eL(e,t){const n=tt(e),i=n.Na.get(t);if(i&&i.va)return rt().add(i.key);{let o=rt();const s=n.Ma.get(t);if(!s)return o;for(const r of s){const a=n.Fa.get(r);o=o.unionWith(a.view.Va)}return o}}function RC(e){const t=tt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=SC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=X4.bind(null,t),t.Ca.d_=L4.bind(null,t.eventManager),t.Ca.$a=O4.bind(null,t.eventManager),t}function nL(e){const t=tt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=W4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Z4.bind(null,t),t}class Lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=vc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,n){return null}Ha(t,n){return null}za(t){return s4(this.persistence,new i4,t.initialUser,this.serializer)}Ga(t){return new t4(Zp.Zr,this.serializer)}Wa(t){return new d4}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lu.provider={build:()=>new Lu};class Ah{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>l_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tL.bind(null,this.syncEngine),await D4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new P4}()}createDatastore(t){const n=vc(t.databaseInfo.databaseId),i=function(s){return new g4(s)}(t.databaseInfo);return function(s,r,a,u){return new _4(s,r,a,u)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,o,s,r,a){return new E4(i,o,s,r,a)}(this.localStore,this.datastore,t.asyncQueue,n=>l_(this.syncEngine,n,0),function(){return i_.D()?new i_:new h4}())}createSyncEngine(t,n){return function(o,s,r,a,u,c,h){const m=new H4(o,s,r,a,u,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(o){const s=tt(o);Y("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ia(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ah.provider={build:()=>new Ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Wn("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(t,n,i,o,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=ge.UNAUTHENTICATED,this.clientId=NA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async r=>{Y("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Y("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=sm(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Ff(e,t){e.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async o=>{i.isEqual(o)||(await uC(t.localStore,o),i=o)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function c_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await sL(e);Y("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>o_(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,o)=>o_(t.remoteStore,o)),e._onlineComponents=t}async function sL(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ff(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===q.FAILED_PRECONDITION||o.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),await Ff(e,new Lu)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Ff(e,new Lu);return e._offlineComponents}async function IC(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await c_(e,e._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await c_(e,new Ah))),e._onlineComponents}function rL(e){return IC(e).then(t=>t.syncEngine)}async function f_(e){const t=await IC(e),n=t.eventManager;return n.onListen=z4.bind(null,t.syncEngine),n.onUnlisten=J4.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Y4.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Q4.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(e,t,n){if(!n)throw new K(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lL(e,t,n,i){if(t===!0&&i===!0)throw new K(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function h_(e){if(!J.isDocumentKey(e))throw new K(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lm(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":X()}function Ni(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new K(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lm(e);throw new K(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new K(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new K(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}lL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xC((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class um{constructor(t,n,i,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new K(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Sk;switch(i.type){case"firstParty":return new Rk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=d_.get(n);i&&(Y("ComponentProvider","Removing Datastore"),d_.delete(n),i.terminate())}(this),Promise.resolve()}}function uL(e,t,n,i={}){var o;const s=(e=Ni(e,um))._getSettings(),r=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==r&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:r,ssl:!1})),i.mockUserToken){let a,u;if(typeof i.mockUserToken=="string")a=i.mockUserToken,u=ge.MOCK_USER;else{a=eP(i.mockUserToken,(o=e._app)===null||o===void 0?void 0:o.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new K(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ge(c)}e._authCredentials=new Ak(new bA(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ec(this.firestore,t,this._query)}}class Ke{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ke(this.firestore,t,this._key)}}class ua extends Ec{constructor(t,n,i){super(t,n,Kp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ke(this.firestore,null,new J(t))}withConverter(t){return new ua(this.firestore,t,this._path)}}function _l(e,t,...n){if(e=ki(e),arguments.length===1&&(t=NA.newId()),aL("doc","path",t),e instanceof um){const i=Ut.fromString(t,...n);return h_(i),new Ke(e,null,new J(i))}{if(!(e instanceof Ke||e instanceof ua))throw new K(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(Ut.fromString(t,...n));return h_(i),new Ke(e.firestore,e instanceof ua?e.converter:null,new J(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fC(this,"async_queue_retry"),this.Vu=()=>{const i=qf();i&&Y("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;const n=qf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const n=qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ao;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Ca(t))throw t;Y("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const n=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;const o=function(r){let a=r.message||"";return r.stack&&(a=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),a}(i);throw Wn("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(t,n,i){this.fu(),this.Ru.indexOf(t)>-1&&(n=0);const o=om.createAndSchedule(this,t,n,i,s=>this.yu(s));return this.Tu.push(o),o}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const n of this.Tu)if(n.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const n=this.Tu.indexOf(t);this.Tu.splice(n,1)}}function g_(e){return function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const s of i)if(s in o&&typeof o[s]=="function")return!0;return!1}(e,["next","error","complete"])}class ca extends um{constructor(t,n,i,o){super(t,n,i,o),this.type="firestore",this._queue=new m_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new m_(t),this._firestoreClient=void 0,await t}}}function cL(e,t){const n=typeof e=="object"?e:ck(),i=typeof e=="string"?e:"(default)",o=rk(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const s=jV("firestore");s&&uL(o,...s)}return o}function bC(e){if(e._terminated)throw new K(q.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fL(e),e._firestoreClient}function fL(e){var t,n,i;const o=e._freezeSettings(),s=function(a,u,c,h){return new Bk(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xC(h.experimentalLongPollingOptions),h.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,o);e._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new oL(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Is(fe.fromBase64String(t))}catch(n){throw new K(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Is(fe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new K(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ae(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new K(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new K(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,o){if(i.length!==o.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==o[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=/^__.*__$/;class hL{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Fi(t,this.data,this.fieldMask,n,this.fieldTransforms):new wa(t,this.data,n,this.fieldTransforms)}}class NC{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Fi(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function MC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class hm{constructor(t,n,i,o,s,r){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new hm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.Fu({path:i,xu:!1});return o.Ou(t),o}Nu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Ou(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(MC(this.Cu)&&dL.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class pL{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||vc(t)}Qu(t,n,i,o=!1){return new hm({Cu:t,methodName:n,qu:i,path:ae.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DC(e){const t=e._freezeSettings(),n=vc(e._databaseId);return new pL(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mL(e,t,n,i,o,s={}){const r=e.Qu(s.merge||s.mergeFields?2:0,t,n,o);pm("Data must be an object, but it was:",r,i);const a=VC(i,r);let u,c;if(s.merge)u=new qe(r.fieldMask),c=r.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const p=Ch(t,m,n);if(!r.contains(p))throw new K(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kC(h,p)||h.push(p)}u=new qe(h),c=r.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=r.fieldTransforms;return new hL(new Me(a),u,c)}class Ac extends cm{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ac}}function gL(e,t,n,i){const o=e.Qu(1,t,n);pm("Data must be an object, but it was:",o,i);const s=[],r=Me.empty();Ao(i,(u,c)=>{const h=mm(t,u,n);c=ki(c);const m=o.Nu(h);if(c instanceof Ac)s.push(h);else{const p=Cc(c,m);p!=null&&(s.push(h),r.set(h,p))}});const a=new qe(s);return new NC(r,a,o.fieldTransforms)}function yL(e,t,n,i,o,s){const r=e.Qu(1,t,n),a=[Ch(t,i,n)],u=[o];if(s.length%2!=0)throw new K(q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Ch(t,s[p])),u.push(s[p+1]);const c=[],h=Me.empty();for(let p=a.length-1;p>=0;--p)if(!kC(c,a[p])){const v=a[p];let x=u[p];x=ki(x);const b=r.Nu(v);if(x instanceof Ac)c.push(v);else{const D=Cc(x,b);D!=null&&(c.push(v),h.set(v,D))}}const m=new qe(c);return new NC(h,m,r.fieldTransforms)}function Cc(e,t){if(PC(e=ki(e)))return pm("Unsupported field value:",t,e),VC(e,t);if(e instanceof cm)return function(i,o){if(!MC(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,o){const s=[];let r=0;for(const a of i){let u=Cc(a,o.Lu(r));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),r++}return{arrayValue:{values:s}}}(e,t)}return function(i,o){if((i=ki(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lU(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=$t.fromDate(i);return{timestampValue:ku(o.serializer,s)}}if(i instanceof $t){const s=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ku(o.serializer,s)}}if(i instanceof fm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Is)return{bytesValue:nC(o.serializer,i._byteString)};if(i instanceof Ke){const s=o.databaseId,r=i.firestore._databaseId;if(!r.isEqual(s))throw o.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Xp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof dm)return function(r,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Jp(a.serializer,u)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${lm(i)}`)}(e,t)}function VC(e,t){const n={};return MA(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ao(e,(i,o)=>{const s=Cc(o,t.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function PC(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $t||e instanceof fm||e instanceof Is||e instanceof Ke||e instanceof cm||e instanceof dm)}function pm(e,t,n){if(!PC(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const i=lm(n);throw i==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function Ch(e,t,n){if((t=ki(t))instanceof Sc)return t._internalPath;if(typeof t=="string")return mm(e,t);throw Ou("Field path arguments must be of type string or ",e,!1,void 0,n)}const vL=new RegExp("[~\\*/\\[\\]]");function mm(e,t,n){if(t.search(vL)>=0)throw Ou(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Sc(...t.split("."))._internalPath}catch{throw Ou(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ou(e,t,n,i,o){const s=i&&!i.isEmpty(),r=o!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||r)&&(u+=" (found",s&&(u+=` in field ${i}`),r&&(u+=` in document ${o}`),u+=")"),new K(q.INVALID_ARGUMENT,a+e+u)}function kC(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t,n,i,o,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new _L(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(LC("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _L extends UC{data(){return super.data()}}function LC(e,t){return typeof t=="string"?mm(e,t):t instanceof Sc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new K(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EL{convertValue(t,n="none"){switch(go(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(mo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw X()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Ao(t,(o,s)=>{i[o]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,o;const s=(o=(i=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(r=>Ot(r.doubleValue));return new dm(s)}convertGeoPoint(t){return new fm(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Fp(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(oa(t));default:return null}}convertTimestamp(t){const n=Li(t);return new $t(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Ut.fromString(t);_t(lC(i));const o=new sa(i.get(1),i.get(3)),s=new J(i.popFirst(5));return o.isEqual(n)||Wn(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(e,t,n){let i;return i=e?e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class OC extends UC{constructor(t,n,i,o,s,r){super(t,n,i,o,r),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(LC("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class zl extends OC{data(t={}){return super.data(t)}}class AL{constructor(t,n,i,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Sr(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new zl(this._firestore,this._userDataWriter,i.key,i,new Sr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,s){if(o._snapshot.oldDocs.isEmpty()){let r=0;return o._snapshot.docChanges.map(a=>{const u=new zl(o._firestore,o._userDataWriter,a.doc.key,a.doc,new Sr(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:r++}})}{let r=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new zl(o._firestore,o._userDataWriter,a.doc.key,a.doc,new Sr(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);let c=-1,h=-1;return a.type!==0&&(c=r.indexOf(a.doc.key),r=r.delete(a.doc.key)),a.type!==1&&(r=r.add(a.doc),h=r.indexOf(a.doc.key)),{type:CL(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CL(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class BC extends EL{constructor(t){super(),this.firestore=t}convertBytes(t){return new Is(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ke(this.firestore,null,n)}}function wL(e,t,n){e=Ni(e,Ke);const i=Ni(e.firestore,ca),o=SL(e.converter,t);return GC(i,[mL(DC(i),"setDoc",e._key,o,e.converter!==null,n).toMutation(e._key,Sn.none())])}function Hf(e,t,n,...i){e=Ni(e,Ke);const o=Ni(e.firestore,ca),s=DC(o);let r;return r=typeof(t=ki(t))=="string"||t instanceof Sc?yL(s,"updateDoc",e._key,t,n,i):gL(s,"updateDoc",e._key,t),GC(o,[r.toMutation(e._key,Sn.exists(!0))])}function RL(e,...t){var n,i,o;e=ki(e);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||g_(t[r])||(s=t[r],r++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(g_(t[r])){const m=t[r];t[r]=(n=m.next)===null||n===void 0?void 0:n.bind(m),t[r+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),t[r+2]=(o=m.complete)===null||o===void 0?void 0:o.bind(m)}let u,c,h;if(e instanceof Ke)c=Ni(e.firestore,ca),h=Kp(e._key.path),u={next:m=>{t[r]&&t[r](IL(c,e,m))},error:t[r+1],complete:t[r+2]};else{const m=Ni(e,Ec);c=Ni(m.firestore,ca),h=m._query;const p=new BC(c);u={next:v=>{t[r]&&t[r](new AL(c,p,m,v))},error:t[r+1],complete:t[r+2]},TL(e._query)}return function(p,v,x,b){const D=new iL(b),E=new B4(v,D,x);return p.asyncQueue.enqueueAndForget(async()=>k4(await f_(p),E)),()=>{D.Za(),p.asyncQueue.enqueueAndForget(async()=>U4(await f_(p),E))}}(bC(c),h,a,u)}function GC(e,t){return function(i,o){const s=new ao;return i.asyncQueue.enqueueAndForget(async()=>$4(await rL(i),o,s)),s.promise}(bC(e),t)}function IL(e,t,n){const i=n.docs.get(t._key),o=new BC(e);return new OC(e,o,t._key,i,new Sr(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){Gs=o})(uk),bu(new ea("firestore",(i,{instanceIdentifier:o,options:s})=>{const r=i.getProvider("app").getImmediate(),a=new ca(new Ck(i.getProvider("auth-internal")),new xk(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(c.options.projectId,h)}(r,o),r);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ls(P0,"4.7.3",t),ls(P0,"4.7.3","esm2017")})();const xL={apiKey:"AIzaSyDhdfcG6ONFjii9sZdMn9zLoOA2oaiACG8",authDomain:"mel-trip-95837.firebaseapp.com",projectId:"mel-trip-95837",storageBucket:"mel-trip-95837.firebasestorage.app",messagingSenderId:"201385610606",appId:"1:201385610606:web:57ab03c06c24fe9ae9057f"},bL=TA(xL),Tl=cL(bL),zf=[{day:1,date:"2026-01-21",weekday:"",weather:"sunny",temp:24,tips:" 4  T1 ",events:[{id:"1-0",time:"01:45",title:"(TPE)  (SIN)",location:"Taoyuan Intl Airport (TPE)",type:"flight",notes:`Scoot TR 897
Booking: M87K4P`,bookingUrl:"https://www.flyscoot.com/",flightDetails:{flightNumber:"TR 897",airline:"Scoot B787-9",departCode:"TPE",arriveCode:"SIN",departTerminal:"1",arriveTerminal:"1",duration:"4h 40m"}},{id:"1-1",time:"10:20",title:"(SIN)  (MEL)",location:"Changi Airport (SIN)",type:"flight",notes:`Scoot TR 24
Layover: 3h 55m`,bookingUrl:"https://www.flyscoot.com/",flightDetails:{flightNumber:"TR 24",airline:"Scoot B787-9",departCode:"SIN",arriveCode:"MEL",departTerminal:"1",arriveTerminal:"2",duration:"7h 30m"}},{id:"1-2",time:"20:50",title:"",location:"Melbourne Airport",lat:-37.669,lng:144.841,type:"transport",notes:""},{id:"1-3",time:"21:40",title:" SkyBus ",location:"Southern Cross Station",lat:-37.8183,lng:144.9525,type:"transport",notes:""},{id:"1-4",time:"22:30",title:": Inner CBD Apartment",location:"Melbourne CBD (Near Southern Cross)",lat:-37.815,lng:144.955,type:"hotel",notes:"HDSS07/InnerCBD/1Min->Station"}]},{day:2,date:"2026-01-22",weekday:"",weather:"sunny",temp:28,tips:"",events:[{id:"2-1",time:"10:00",title:": ",location:"Melbourne Park",lat:-37.8216,lng:144.9785,type:"activity",notes:""},{id:"2-2",time:"12:00",title:"",location:"Melbourne Park Outdoor Courts",lat:-37.822,lng:144.979,type:"activity",notes:""},{id:"2-3",time:"15:00",title:"John Cain / KIA Arena",location:"John Cain Arena",lat:-37.823,lng:144.98,type:"activity",notes:"Ground Pass "},{id:"2-4",time:"18:00",title:"Garden Square ",location:"Garden Square",lat:-37.821,lng:144.978,type:"food",notes:""}]},{day:3,date:"2026-01-23",weekday:"",weather:"partly-cloudy",temp:26,tips:"",events:[{id:"3-1",time:"10:00",title:" &  Day 2",location:"Melbourne Park",lat:-37.8216,lng:144.9785,type:"activity",notes:""},{id:"3-2",time:"13:00",title:"Grand Slam Oval ",location:"Grand Slam Oval",lat:-37.8225,lng:144.9795,type:"food",notes:""},{id:"3-3",time:"16:00",title:"",location:"Melbourne Park",lat:-37.8216,lng:144.9785,type:"activity",notes:" 70 "},{id:"3-4",time:"20:00",title:": ",location:"300 Spencer St, Melbourne",lat:-37.8119,lng:144.9536,type:"hotel",notes:"Atlantis Hotel Melbourne",bookingUrl:"https://www.agoda.com/zh-tw/account/editbooking.html?bookingId=Z8C4Kfulw2iR33s2tqaz9g%3D%3D&landFrom=TripDetail&sort=BookingStartDate&state=Upcoming&page=1&ds=xCyHKy4CaORlQkTX"}]},{day:4,date:"2026-01-24",weekday:"",weather:"sunny",temp:25,tips:"",events:[{id:"4-0",time:"10:15",title:" Footscray ",location:"300 Spencer St to Footscray",lat:-37.8119,lng:144.9536,type:"transport",notes:" Uber/Didi (15) "},{id:"4-1",time:"11:00",title:"SIXT : Toyota Yaris",location:"SIXT Car Rental Footscray",lat:-37.803,lng:144.902,type:"transport",notes:"Booking: 9729138629. /",bookingUrl:"https://mail.google.com/mail/u/0/?ogbl#search/sixt/FMfcgzQdzwHKBFvZVxCLZzsKMsMqBlbV"},{id:"4-2",time:"12:30",title:"",location:"Torquay Surf Beach",lat:-38.3324,lng:144.3159,type:"activity",notes:""},{id:"4-3",time:"13:30",title:"",location:"Lorne",lat:-38.5415,lng:143.9754,type:"food",notes:""},{id:"4-4",time:"16:00",title:"",location:"Apollo Bay",lat:-38.7558,lng:143.6558,type:"activity",notes:""},{id:"4-5",time:"18:00",title:": Apollo Stay",location:"38 Thomson Street, Apollo Bay",lat:-38.756,lng:143.656,type:"hotel",notes:"Check-in: 15:00~20:00",bookingUrl:"https://secure.booking.com/confirmation.zh-tw.html?label=mkt123sc-d7a379ea-aab6-4237-b9c5-b29721aadb1f&sid=e6ffd707b4250120589a18d560ea263f&aid=1536461&auth_key=sk2PHyKEv8wF0rTa&source=mytrips"}]},{day:5,date:"2026-01-25",weekday:"",weather:"partly-cloudy",temp:23,tips:"",events:[{id:"5-1",time:"09:00",title:"",location:"Twelve Apostles",lat:-38.6621,lng:143.1051,type:"activity",notes:""},{id:"5-2",time:"10:30",title:" & ",location:"London Bridge",lat:-38.6235,lng:142.9304,type:"activity",notes:""},{id:"5-3",time:"13:00",title:"",location:"Grampians Road",lat:-37.5,lng:142.5,type:"transport",notes:""},{id:"5-4",time:"16:30",title:": Mountain View Motor Inn",location:"4236 Ararat-Halls Gap Road, Halls Gap",lat:-37.155,lng:142.535,type:"hotel",notes:"",bookingUrl:"https://secure.booking.com/confirmation.zh-tw.html?label=mkt123sc-d7a379ea-aab6-4237-b9c5-b29721aadb1f&sid=e6ffd707b4250120589a18d560ea263f&aid=1536461&auth_key=SqXbY6BoFNUqmawu&source=mytrips"}]},{day:6,date:"2026-01-26",weekday:"",weather:"cloudy",temp:22,tips:"",events:[{id:"6-1",time:"09:00",title:"Boroka ",location:"Boroka Lookout",lat:-37.1235,lng:142.5028,type:"activity",notes:""},{id:"6-2",time:"11:00",title:"Brambuk ",location:"Brambuk Cultural Centre",lat:-37.1472,lng:142.5273,type:"activity",notes:""},{id:"6-3",time:"15:00",title:"",location:"Western Highway",lat:-37.5,lng:143.5,type:"transport",notes:" 3.5 "},{id:"6-4",time:"18:00",title:": City Apartment (Bozhu)",location:"371 Little Lonsdale Street",lat:-37.8115,lng:144.959,type:"hotel",notes:""}]},{day:7,date:"2026-01-27",weekday:"",weather:"sunny",temp:27,tips:"",events:[{id:"7-0",time:"10:00",title:"",location:"Footscray",lat:-37.803,lng:144.902,type:"transport",notes:""},{id:"7-1",time:"11:00",title:"SIXT ",location:"SIXT Car Rental Footscray",lat:-37.803,lng:144.902,type:"transport",notes:" 11:00 AM"},{id:"7-2",time:"11:30",title:"",location:"Rod Laver Arena",lat:-37.8216,lng:144.9785,type:"transport",notes:" Uber"},{id:"7-3",time:"12:00",title:":  Day 1",location:"Rod Laver Arena",lat:-37.8216,lng:144.9785,type:"activity",notes:""},{id:"7-4",time:"19:00",title:"",location:"Melbourne CBD",lat:-37.8136,lng:144.9631,type:"food",notes:""}]},{day:8,date:"2026-01-28",weekday:"",weather:"sunny",temp:29,tips:"",events:[{id:"8-1",time:"11:00",title:":  Day 2",location:"Rod Laver Arena",lat:-37.8216,lng:144.9785,type:"activity",notes:""},{id:"8-2",time:"16:00",title:"",location:"Royal Arcade",lat:-37.8143,lng:144.9644,type:"activity",notes:""},{id:"8-3",time:"19:00",title:"Yarra River ",location:"Southbank",lat:-37.82,lng:144.965,type:"activity",notes:""}]},{day:9,date:"2026-01-29",weekday:"",weather:"partly-cloudy",temp:24,tips:"",events:[{id:"9-1",time:"12:30",title:"",location:"Federation Square",lat:-37.8179,lng:144.9691,type:"transport",notes:" ()"},{id:"9-2",time:"15:00",title:"Moonlit Sanctuary",location:"Moonlit Sanctuary",lat:-38.2173,lng:145.253,type:"activity",notes:""},{id:"9-3",time:"19:30",title:"",location:"Penguin Parade",lat:-38.5089,lng:145.1485,type:"activity",notes:""},{id:"9-4",time:"22:30",title:"",location:"Melbourne CBD",lat:-37.8136,lng:144.9631,type:"transport",notes:""}]},{day:10,date:"2026-01-30",weekday:"",weather:"cloudy",temp:21,tips:"3",events:[{id:"10-1",time:"09:00",title:"",location:"Degraves Street",lat:-37.8166,lng:144.966,type:"food",notes:""},{id:"10-2",time:"10:30",title:"",location:"Queen Victoria Market",lat:-37.8076,lng:144.9568,type:"activity",notes:""},{id:"10-3",time:"13:00",title:"Bratwurst ",location:"QVM Deli Hall",lat:-37.8076,lng:144.9568,type:"food",notes:""},{id:"10-4",time:"15:00",title:"",location:"CBD",lat:-37.8136,lng:144.9631,type:"activity",notes:""}]},{day:11,date:"2026-01-31",weekday:"",weather:"sunny",temp:23,tips:"",events:[{id:"11-1",time:"10:00",title:"",location:"Spencer Outlet Centre",lat:-37.8155,lng:144.953,type:"activity",notes:""},{id:"11-2",time:"13:00",title:"",location:"Southbank Promenade",lat:-37.8205,lng:144.9654,type:"activity",notes:""},{id:"11-3",time:"19:00",title:" SkyBus ",location:"Southern Cross Station",lat:-37.8183,lng:144.9525,type:"transport",notes:" T2 "},{id:"11-4",time:"22:35",title:"(MEL)  (SIN)",location:"Tullamarine Airport (MEL)",type:"flight",notes:`Scoot TR 25
Booking: M87K4P`,bookingUrl:"https://www.flyscoot.com/",flightDetails:{flightNumber:"TR 25",airline:"Scoot B787-9",departCode:"MEL",arriveCode:"SIN",departTerminal:"2",arriveTerminal:"1",duration:"7h 45m"}}]},{day:12,date:"2026-02-01",weekday:"",weather:"partly-cloudy",temp:20,tips:"",events:[{id:"12-1",time:"03:20",title:" ()",location:"Changi Airport (SIN)",type:"transport",notes:"Layover: 4h 50m"},{id:"12-2",time:"08:10",title:"(SIN)  (TPE)",location:"Changi Airport (SIN)",type:"flight",notes:"Scoot TR 874",bookingUrl:"https://www.flyscoot.com/",flightDetails:{flightNumber:"TR 874",airline:"Scoot B787-9",departCode:"SIN",arriveCode:"TPE",departTerminal:"1",arriveTerminal:"1",duration:"4h 35m"}},{id:"12-3",time:"12:45",title:"",location:"Taoyuan Intl Airport",type:"transport",notes:""}]}],El=[{id:"1",title:"SkyBus ",type:"transport",url:"https://www.skybus.com.au/",details:""},{id:"2",title:" 2026 ",type:"ticket",url:"https://www.ticketmaster.com.au/australian-open-tickets/artist/1154563",details:"Ground Pass / RLA"},{id:"4",title:"",type:"ticket",url:"https://www.penguins.org.au/",details:" QR Code"}],Sl="melbourne-trip-2026",dr=e=>JSON.parse(JSON.stringify(e)),NL=()=>{const[e,t]=st.useState("itinerary"),[n,i]=st.useState([]),[o,s]=st.useState([]),[r,a]=st.useState([]),[u,c]=st.useState(0),[h,m]=st.useState(!0),[p,v]=st.useState("offline");st.useEffect(()=>{const _=_l(Tl,"trips",Sl),C=RL(_,async V=>{if(v("connected"),V.exists()){const L=V.data();L.days&&i(L.days),L.expenses&&s(L.expenses),L.links?a(L.links):a(El)}else await wL(_,{days:dr(zf),expenses:[],links:dr(El)}),i(zf),a(El);m(!1)},V=>{console.error("Firebase sync error:",V),v("offline"),n.length===0&&(i(zf),a(El),m(!1))});return()=>C()},[]);const x=_=>{let C;typeof _=="function"?C=_(n):C=_,i(C);const V=_l(Tl,"trips",Sl);Hf(V,{days:dr(C)}).catch(L=>console.error("Update failed",L))},b=_=>{let C;typeof _=="function"?C=_(o):C=_,s(C);const V=_l(Tl,"trips",Sl);Hf(V,{expenses:dr(C)}).catch(L=>console.error("Update failed",L))},D=_=>{let C;typeof _=="function"?C=_(r):C=_,a(C);const V=_l(Tl,"trips",Sl);Hf(V,{links:dr(C)}).catch(L=>console.error("Update failed",L))},E=_=>{c(_),t("map")};return h?T.jsx("div",{className:"bg-slate-900 min-h-screen flex items-center justify-center text-white",children:T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"w-10 h-10 border-4 border-primary border-t-accent rounded-full animate-spin mx-auto mb-4"}),T.jsx("p",{className:"text-sm font-medium",children:"..."})]})}):T.jsx("div",{className:"min-h-screen flex justify-center font-sans bg-gradient-to-br from-slate-100 to-blue-50 dark:from-slate-900 dark:to-slate-800 transition-colors duration-500",children:T.jsxs("div",{className:"w-full max-w-md bg-surface dark:bg-darkSurface h-screen flex flex-col shadow-2xl overflow-hidden relative transition-colors duration-500",children:[T.jsx("header",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm pt-12 pb-3 px-6 flex justify-between items-center z-20 border-b border-gray-100 dark:border-slate-800 transition-colors",children:T.jsxs("div",{children:[T.jsxs("h1",{className:"text-2xl font-black text-primary dark:text-white tracking-tight",children:[e==="itinerary"&&"MelbGo ",e==="expenses"&&" ",e==="links"&&" ",e==="map"&&" "]}),T.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[T.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium tracking-widest uppercase",children:e==="itinerary"?"Melbourne Trip":e==="expenses"?"Split Bills":e==="links"?"Bookings":"Navigation"}),p==="connected"?T.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.5)]",title:""}):T.jsx("span",{className:"w-2 h-2 rounded-full bg-red-400",title:""})]})]})}),T.jsxs("main",{className:"flex-1 overflow-hidden relative",children:[e==="itinerary"&&T.jsx(GV,{days:n,setDays:x,onMapClick:E}),e==="expenses"&&T.jsx(qV,{expenses:o,setExpenses:b}),e==="links"&&T.jsx(FV,{links:r,setLinks:D,days:n,setDays:x}),e==="map"&&T.jsx(HV,{day:n[u]})]}),T.jsxs("nav",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border-t border-gray-100 dark:border-slate-800 px-6 py-2 pb-6 flex justify-between items-center z-30 shadow-[0_-5px_15px_rgba(0,0,0,0.02)]",children:[T.jsxs("button",{onClick:()=>t("itinerary"),className:`flex flex-col items-center space-y-1 w-12 transition-all duration-300 ${e==="itinerary"?"text-primary dark:text-blue-400 scale-110":"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[T.jsx(_x,{className:"w-6 h-6"}),T.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:""})]}),T.jsxs("button",{onClick:()=>t("map"),className:`flex flex-col items-center space-y-1 w-12 transition-all duration-300 ${e==="map"?"text-primary dark:text-blue-400 scale-110":"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[T.jsx(qd,{className:"w-6 h-6"}),T.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:""})]}),T.jsxs("button",{onClick:()=>t("expenses"),className:`flex flex-col items-center space-y-1 w-12 transition-all duration-300 ${e==="expenses"?"text-primary dark:text-blue-400 scale-110":"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[T.jsx(Tx,{className:"w-6 h-6"}),T.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:""})]}),T.jsxs("button",{onClick:()=>t("links"),className:`flex flex-col items-center space-y-1 w-12 transition-all duration-300 ${e==="links"?"text-primary dark:text-blue-400 scale-110":"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400"}`,children:[T.jsx(Rp,{className:"w-6 h-6"}),T.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:""})]})]})]})})},qC=document.getElementById("root");if(!qC)throw new Error("Could not find root element to mount to");const ML=vx.createRoot(qC);ML.render(T.jsx(Ow.StrictMode,{children:T.jsx(NL,{})}));
